!function(e){function webpackJsonpCallback(t){for(var n,o,i=t[0],s=t[1],c=t[2],d=0,u=[];d<i.length;d++)o=i[d],r[o]&&u.push(r[o][0]),r[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(l&&l(t);u.length;)u.shift()();return a.push.apply(a,c||[]),checkDeferredModules()}function checkDeferredModules(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(o=!1)}o&&(a.splice(t--,1),e=__webpack_require__(__webpack_require__.s=n[0]))}return e}var t={},r={0:0},a=[];function __webpack_require__(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,__webpack_require__),a.l=!0,a.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)__webpack_require__.d(r,a,function(t){return e[t]}.bind(null,a));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="";var n=this.webpackJsonp=this.webpackJsonp||[],o=n.push.bind(n);n.push=webpackJsonpCallback,n=n.slice();for(var i=0;i<n.length;i++)webpackJsonpCallback(n[i]);var l=o;a.push([192,1]),checkDeferredModules()}({100:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>'},102:function(e,t,r){var a=r(103);"string"==typeof a&&(a=[[e.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};r(20)(a,n);a.locals&&(e.exports=a.locals)},103:function(e,t,r){(t=e.exports=r(19)(!1)).i(r(104),""),t.push([e.i,'*{box-sizing:border-box}html,body{background-color:#fff;color:#222;font-family:-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;height:100%;margin:0;padding:0}h1{font-size:28px;font-weight:bold;margin:0}h2{font-size:24px;font-weight:bold;margin:0}h3{font-size:20px;font-weight:normal;margin:0}h3.header-with-loader{align-items:center;display:flex;height:30px;justify-content:space-between}h4{color:#222;font-size:16px;font-weight:normal;margin:.5rem 0 .25rem}a{text-decoration:none}a,a:visited{color:#555}a.link{display:block}a.image-link{display:flex}ul{display:flex;list-style-type:none;margin:0;padding:0}ul li{display:inline}select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:url("data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0Ljk1IDEwIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2ZmZjt9LmNscy0ye2ZpbGw6IzQ0NDt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPmFycm93czwvdGl0bGU+PHJlY3QgY2xhc3M9ImNscy0xIiB3aWR0aD0iNC45NSIgaGVpZ2h0PSIxMCIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMiIgcG9pbnRzPSIxLjQxIDQuNjcgMi40OCAzLjE4IDMuNTQgNC42NyAxLjQxIDQuNjciLz48cG9seWdvbiBjbGFzcz0iY2xzLTIiIHBvaW50cz0iMy41NCA1LjMzIDIuNDggNi44MiAxLjQxIDUuMzMgMy41NCA1LjMzIi8+PC9zdmc+") no-repeat 98% 50%;border:1px solid #ccc;border-radius:0;cursor:pointer;font-size:16px;height:32px;padding:0 0 0 .25rem;width:250px}input{height:32px}input,textarea,pre{border:1px solid #ddd;padding:0 .25rem}pre{font-family:"SFMono-Regular",Consolas,"Liberation Mono",Menlo,Courier,monospace;margin:0;overflow:auto;padding:.75rem .5rem;white-space:pre-wrap;word-wrap:break-word}.-elv-copyable{cursor:pointer}.app-version{display:none}html{font-size:14px;overflow-x:hidden}@media screen and (min-width: 1000px){html{font-size:16px}}@media screen and (min-width: 1500px){html{font-size:18px}}@media screen and (min-width: 2000px){html{font-size:20px}}html,body,.app,.video-editor{background-color:#131315;min-height:100%}body{font-size:.8rem;height:auto}body *{color:#f0f0f0}body,.app{display:flex;flex-direction:column}.app,.video-editor{flex-grow:1}.video-editor:focus,.video-component:focus{outline:0}.mono{font-family:monospace}.hidden{display:none !important}.error-message{align-items:center;color:#e33;display:flex;font-size:1rem;height:100%;justify-content:center;padding-bottom:2rem;position:absolute;width:100%;z-index:100}.-elv-tooltip.-elv-tooltip{background-color:#2c2a28;border:1px solid #666;color:#f0f0f0;font-size:.7rem;margin:0;padding:0}.-elv-tooltip.-elv-tooltip span{margin:0;padding:.25rem .5rem}.rc-slider-tooltip{background-color:#2c2a28;border:1px solid #666;color:#f0f0f0}button{background-color:#131315;border:1px solid #3a3a3a;cursor:pointer;font-size:.7rem;padding:.5rem 1rem}button:not(.-elv-icon-button):hover{background-color:#0c89c7}button:focus{outline:1px dotted #acacac}button.primary{background-color:#1b73e8}.-elv-async-component,.-elv-async-component-loading,.-elv-async-component-error{align-items:center;display:flex;justify-content:center;overflow-wrap:anywhere;overflow-y:hidden;padding:0 .5rem;width:100%}.-elv-async-component.-elv-async-component-loading,.-elv-async-component-loading.-elv-async-component-loading,.-elv-async-component-error.-elv-async-component-loading{height:50%}.async-component-error{color:#f33}.wrap{max-width:100%;word-break:break-all;word-wrap:break-word}.resize-handle{background-color:#131315;padding:3px;position:absolute;z-index:100}.resize-handle:hover{background-color:#0c89c7}.checkbox-container{cursor:pointer;padding:.5rem}.checkbox{background-color:#000;border-radius:3px;height:.5rem;outline:1px solid #3a3a3a;position:relative;width:.5rem}.checkbox.checked::after{color:#fff;content:"\\2713";font-size:.8rem;font-weight:600;left:0;position:absolute;top:-0.3rem}.back-button{border-radius:3px;width:50px}.back-button:hover{background-color:#2c2a28}.-elv-modal.-elv-modal{background:rgba(0,0,0,0.7)}.-elv-modal.-elv-modal .-elv-modal-content{background-color:#131315;border:1px solid #3a3a3a;box-shadow:none;color:#f0f0f0}.-elv-modal.-elv-modal .-elv-modal-content form legend{border-bottom:1px solid #3a3a3a}.-elv-modal.-elv-modal .-elv-modal-content .-elv-button{background-color:#0c89c7;border:1px solid #3a3a3a;color:#f0f0f0}.-elv-modal.-elv-modal .-elv-modal-content .-elv-button.secondary{background-color:#131315}.-elv-modal.-elv-modal .-elv-modal-content .-elv-button.secondary:hover{background-color:#2c2a28;border:1px solid #3a3a3a;color:#f0f0f0}.-elv-modal.-elv-modal .-elv-modal-content .-elv-button:hover{background-color:#0ea5ef;border:1px solid #3a3a3a;color:#f0f0f0}.labelled-field{align-items:baseline;display:grid;grid-template-columns:8rem 1fr;padding:1.5rem 0 0}.-elv-browse-widget .-elv-browse-widget-files{background:#2c2a28}.-elv-browse-widget .-elv-browse-widget-files.-elv-browse-widget-files{border:1px solid #666}.-elv-browse-widget .-elv-browse-widget-files table tr{border-top:1px solid #3a3a3a}.-elv-tab-container.secondary{font-size:.7rem;margin:0}.-elv-tab-container.secondary .-elv-tab.-elv-tab{border:1px solid #444;border-right:0}.-elv-tab-container.secondary .-elv-tab.-elv-tab.selected{background:#555;border:1px solid #444}.-elv-tab-container.secondary .-elv-tab.-elv-tab.selected:last-child{border-right:1px solid #444}.-elv-tab-container.secondary .-elv-tab.-elv-tab:hover{background:#444;color:#fff}.-elv-tab-container.secondary .-elv-tab.-elv-tab:last-child{border-right:1px solid #444}.progress-bar-container{background-color:#2c2a28;border-radius:.5rem;flex:1 1 0;height:.5rem;position:relative}.progress-bar-container .progress-bar{background-color:#0ea5ef;border-radius:.25rem;height:100%;position:absolute}header{height:55px}.menu-container{background-color:#131315;box-shadow:3px -3px 8px #000;height:calc(100% - 55px);max-height:calc(100% - 55px);position:absolute;width:600px;z-index:1000}.video-level{display:flex;height:50vh;position:relative}.side-panel{min-width:20rem;overflow:hidden;width:500px;word-wrap:break-word}.side-panel .resize-handle{cursor:e-resize;height:100%;right:0;top:0;width:0}.side-panel .side-panel-content{height:100%;left:0;position:absolute;top:0;width:100%}.video-component{background-color:#000}.video-component .resize-handle{bottom:-6px;cursor:s-resize;height:0;width:100%}header{align-items:center;display:flex;justify-content:space-between}header .header-left,header .header-right{align-items:center;display:flex;height:100%;width:auto}header .header-right{padding:0 1.5rem}header .menu-button{height:100%;margin-right:.5rem;z-index:1001}header .menu-button svg{padding:.5rem}header .menu-button-active{background-color:#2c2a28}header .menu-button-active svg{color:#acacac}header h1{font-size:1rem;font-weight:normal}header .header-icon{cursor:pointer;height:1.4rem;margin-right:1.5rem;padding:0;width:1.4rem}header .header-icon svg{stroke:#555}header .header-icon svg:hover{stroke:#aaa}header .header-icon.save-icon-loading{-webkit-transform:scale(0.7);transform:scale(0.7)}header .header-icon.save-icon-loading div{color:#aaa}header .header-icon.save-failed svg{stroke:#a33}header .header-icon.save-failed svg:hover{stroke:#f33}header .header-icon.keyboard-controls-icon{height:1.9rem}header .header-icon.keyboard-controls-icon path{fill:#555;stroke:transparent}header .header-icon.keyboard-controls-icon path:hover{fill:#aaa}.upload-section{margin-bottom:2rem}.upload-section h3{font-size:.8rem;font-weight:500;margin:2rem 0 0;text-align:center}.keyboard-control-info{font-size:.7rem;min-width:25rem;padding:1rem;position:relative}.keyboard-control-info .close-button{height:1.2rem;position:absolute;right:.25rem;top:.25rem}.keyboard-control-info .close-button svg{stroke:#ddd}.keyboard-control-info .close-button svg:hover{stroke:#fff}.keyboard-control-info h3{font-size:.8rem;font-weight:500;padding:1rem 1.5rem 1rem 0;text-align:center}.keyboard-control-info label{color:#acacac}.keyboard-control-info .control-section{margin-bottom:1rem}.keyboard-control-info .control-group{display:grid;grid-template-columns:2fr 3fr;padding:.25rem 1rem;width:100%}.keyboard-control-info .control-group:not(:last-child){border-bottom:1px solid #444}.keyboard-control-info .control-labels{padding-right:1rem;text-align:center}.video-component{display:flex;flex-direction:column;flex-shrink:1;max-height:100%;width:100%}.video-component .video-seek,.video-component .video-scale{margin-bottom:.5rem;padding:0 1.5rem}.video-container{align-items:center;background-color:#000;display:flex;flex-grow:1;height:100%;justify-content:center;max-height:100%;position:relative}.video-container .video-poster{cursor:pointer;height:100%;left:0;margin:auto;max-height:100%;-o-object-fit:contain;object-fit:contain;position:absolute;top:0;width:100%;z-index:100}.video-container video{cursor:pointer;display:block;flex:1 1 auto;height:100%;max-height:100%;max-width:100%;position:absolute}.video-controls-loading{height:300px}.video-seek .-elv-slider,.video-scale .-elv-slider{background-color:#000}.video-seek .-elv-slider-active,.video-scale .-elv-slider-active{background-color:#464646}.video-seek .-elv-slider-overlay,.video-scale .-elv-slider-overlay{outline:1px solid #3a3a3a}.video-seek .video-seek-handle{background-color:transparent}.video-seek .-elv-slider{background:linear-gradient(180deg, #02141d, #052f43);border:0;outline:0}.video-seek .-elv-slider-active{background:linear-gradient(90deg, #08577f, #2db1f2)}.video-seek .-elv-slider-marks-container .-elv-slider-mark-notch{background-color:transparent}.video-scale .video-seek-handle{background-color:#0c89c7}.video-time,.video-controls{align-items:center;color:#acacac;display:flex;font-size:.8rem;font-weight:lighter;justify-content:center}.video-time{height:35px;text-align:center;width:100%}.video-controls-container{background-color:#000}.video-controls-container:not(.fullscreen){flex-grow:1}.video-controls{align-items:end;display:grid;grid-template-columns:repeat(auto-fit, minmax(33.33%, 1fr));padding-bottom:.5rem;position:relative}.video-controls button{align-items:center;display:flex;height:1.4rem;justify-content:center;width:50px}.video-controls button svg{color:#acacac;fill:#acacac;stroke:transparent}.video-controls button:active svg,.video-controls button:hover svg{color:#0c89c7;fill:#0c89c7}.video-controls button.video-control-play-pause{height:1.8rem}.video-controls button.video-control-play-pause svg{stroke:none}.video-controls button.video-control-save-frame svg{fill:transparent;stroke:#acacac;stroke-width:1.5px}.video-controls select{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:.8rem}.video-controls select:active:not(:disabled),.video-controls select:hover:not(:disabled){color:#0c89c7}.video-controls .controls{height:100%}.video-controls .left-controls,.video-controls .right-controls{align-items:center;display:flex;height:auto;padding:0 1rem}.video-controls .right-controls{justify-content:flex-end}.video-controls .center-top-controls{padding-top:.25rem}.video-controls .center-bottom-controls{align-items:center;display:flex;justify-content:center;padding-bottom:.25rem}.video-controls .video-volume-icon{height:1rem;margin-right:1rem}.video-controls .video-volume-icon svg{stroke:#acacac}.video-controls .video-volume-icon svg:hover{stroke:#0c89c7}.video-controls .video-volume-controls{align-items:center;display:flex;margin-right:1rem;width:125px}.video-controls .video-volume-controls .-elv-slider-active{background-color:#acacac}.video-controls .video-volume-controls .-elv-slider{background-color:#131315}.video-controls .video-volume-controls .-elv-slider-handle{background-color:transparent}select{background:none;border:0;color:#acacac;left:.5rem;width:5rem}select option{background-color:#2c2a28}select.video-playback-rate{width:3.5rem}select.video-playback-level{margin-right:1.5rem;width:10rem}.timeline{padding-bottom:1.5rem}.tracks-container{margin:0 0 1.5rem;position:relative;width:100%}.track-time-indicator{background-color:#0fafff;margin-left:-1px;opacity:0.6;pointer-events:none;position:absolute;width:4px;z-index:100}.track-time-indicator .track-time-handle{border-radius:100%;height:5px;position:absolute;top:0;width:5px}.track-lane{display:flex;height:3rem}.track-lane .-elv-slider .-elv-slider-mark{font-size:.6rem}.track-lane:last-child .track-label-container{border-bottom:1px solid #3a3a3a}.track-lane:last-child .track-lane-content{border-bottom:1px solid #3a3a3a}.track-lane-content{background-color:#000;border:1px solid #3a3a3a;border-bottom:0;flex-grow:1;margin-right:1.5rem}.video-seek-lane,.video-scale-lane{background-color:#000;max-height:2.5rem}.video-seek-lane .track-label-container span,.video-scale-lane .track-label-container span{color:#acacac}.video-seek-lane .track-label-container:focus,.video-scale-lane .track-label-container:focus{outline:none}.video-seek-lane .track-label-container{border:0;border-top:1px solid #2a2a2a;font-size:.7rem}.video-seek-lane .track-lane-content{background-color:inherit;border:0;border-top:1px solid #2a2a2a}.video-scale-lane{border:0;margin-top:1px}.video-scale-lane .track-label-container{border:0;font-size:.6rem}.video-scale-lane .track-lane-content{border:0}.track-container{display:flex}.track-container .track-canvas-container{height:3rem;width:100%}.track-container canvas{cursor:pointer;max-width:100%}.track-lane-audio{height:5rem}.track-lane-audio .track-lane-content{background-color:#000}.track-lane-audio .track-canvas-container{height:5rem}.track-lane-preview{height:5rem}.preview-frame{display:flex;flex:1 1 auto;height:5rem;max-height:100%;overflow:hidden;padding-bottom:2px;width:100%}.preview-frame img{height:100%;max-height:100%;max-width:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center;width:100%}.track-label-container{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;align-items:center;border:1px solid #3a3a3a;border-bottom:0;border-left:0;display:flex;font-size:.8rem;height:100%;min-width:12rem;padding:1rem;position:relative;width:12rem}.track-label-container .track-toggle{position:absolute;right:.5rem;top:0}.track-label-clickable{cursor:pointer}.track-label-clickable:hover{background-color:#2c2a28}.track-label-selected{background-color:#0c89c7}.track-label-selected:hover{background-color:#0ea5ef}.overlay-toggle{max-height:.8rem;max-width:.8rem;position:absolute;right:.5rem;top:.5rem;z-index:100}.overlay-toggle svg{stroke:#ddd}.overlay-toggle:hover svg{stroke:#fff}.overlay-toggle.overlay-toggle-disabled svg{stroke:#aaa}.timeline-actions{display:flex;padding:0 1rem;width:100%}.timeline-actions button{margin-right:.5rem;width:7rem}.timeline-actions button:hover{background-color:#0c89c7}.timeline-actions button.enabled{background-color:#2c2a28}.timeline-actions button.enabled:hover{background-color:#0ea5ef}.toggle-tracks{justify-content:center}.track-entry-timestamps,.track-entry-content{padding:.5rem 1rem;white-space:normal;word-wrap:break-spaces}.track-entry-timestamps{display:flex;justify-content:center}.track-entry-container{padding:.25rem}.track-entry-content{white-space:normal;word-wrap:break-word}.track-entry-content:empty{border:0;display:none}.entries-container{display:flex;flex-direction:column;height:100%;text-align:center}.entries-container h4{margin:0}.entries-container .entries-header{background-color:#2c2a28;padding:1rem 0;position:relative}.entries-container .entries-header.modifiable{cursor:pointer}.entries-container .entries-header.modifiable:hover{background-color:#085d87}.entries-container .entries-header.modifiable:hover .track-edit-icon{stroke:#acacac}.entries-container .track-edit-icon{height:1.4rem;position:absolute;right:.5rem;top:.5rem}.entries-container .entries-filter input{background-color:#000;border:1px solid #000;color:#acacac;font-size:1rem;height:2rem;padding:0 .5rem;width:100%}.entries-container .add-entry-button{bottom:0;display:flex;width:100%;z-index:100}.entries-container .add-entry-button button{background-color:#0c89c7;border:0;flex-grow:1}.entries-container .add-entry-button button:hover{background-color:#0ea5ef}.entries-container .entries-time-range{color:#8c8c8c;font-size:.7rem}.entries-container .entries{flex-grow:1;margin-right:.33rem;max-height:100%;overflow-y:scroll;position:relative}.entries-container .entry-time-range{color:#6c6c6c}.entries-container .load-entries-button{align-items:center;display:flex;flex-grow:1;justify-content:center;width:100%}.entries-container .entry{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;align-items:center;border-bottom:1px solid #3a3a3a;cursor:pointer;display:flex;flex-direction:column;font-size:.7rem;justify-content:center;min-height:2.5rem;padding:.5rem;position:relative;text-align:center}.entries-container .entry.entry-hover,.entries-container .entry:hover{background-color:#2c2a28}.entries-container .entry.entry-active{background-color:#0c89c7}.entries-container .entry.entry-active .entry-time-range{color:#fff}.entries-container .entry:not(.entry-active) .entry-play-icon:hover{fill:#0c89c7}.entries-container .entry .entry-text{padding:0 1rem}.entries-container .entry-play-icon{fill:#fff;padding:.5rem;position:absolute;right:0;top:0}.entries-container .entry-play-icon svg{height:.8rem;width:.8rem}.entries-container .entry-actions{align-items:center;border-bottom:1px solid #3a3a3a;display:flex;padding:.5rem 1rem}.entries-container .entry-actions .back-button{margin-right:.5rem}.delete-button{margin-top:auto;padding-bottom:1rem}.delete-button.delete-button button{background-color:#131315;border:1px solid #3a3a3a;color:#fff;width:100%}.delete-button.delete-button button:hover{background-color:#a33}.entry-form{display:flex;flex-direction:column;flex-grow:1;overflow-y:auto;padding:1rem;position:relative}.entry-form button{background-color:#0c89c7;flex-grow:1;margin-top:1.5rem}.entry-form button:hover{background-color:#0ea5ef}.entry-form button.invalid{background-color:#131315}.entry-form .time-input{display:flex;margin-bottom:.25rem}.entry-form .time-input .-elv-icon-button{background-color:transparent;flex:1 1 0;margin:0;width:auto}.entry-form .time-input .-elv-icon-button svg{padding:.25rem}.entry-form .time-input input{flex:3 1 0;margin:0}.entry-form .time-input .entry-form-smpte-time{align-items:center;color:#acacac;display:flex;flex:2 1 0;font-size:.6rem;font-weight:500;justify-content:center;padding-left:.25rem}.entry-details{align-items:center;display:grid;grid-row-gap:.25rem;grid-template-columns:8rem 2fr;width:100%}.entry-details label{color:#8c8c8c;text-align:left}.entry-details input{background-color:#2c2a28;border:#3a3a3a;color:#f0f0f0;font-size:.8rem;margin-bottom:.25rem;max-width:100%;min-width:0;width:100%}.entry-details input.invalid,.entry-details input:invalid{box-shadow:#f33 0 0 4px;outline:1px solid #a33}.entry-actions-container{align-items:center;display:flex;margin-bottom:1rem}.entry-actions-container .cancel-button{background-color:#131315;margin-right:.5rem}.entry-actions-container .cancel-button:hover{background-color:#2c2a28}.entry-actions-container .back-button{margin-right:.5rem}.entry-container{overflow-y:auto;padding:.75rem 1rem;text-align:left}.entry-container .entry-edit-button{margin-top:1rem;width:10rem}.entry-container .entry-actions{align-items:center;border:0;display:flex;flex-grow:1;padding:0}.entry-container .entry-actions button{flex:1 1;margin-right:.5rem;max-width:40%;padding:.33rem}.entry-container .entry-actions button:last-child{margin-right:0}.entry-container .entry-actions .back-button{flex-grow:0;margin-right:2rem}.menu-container{background-color:#131315;min-height:500px;padding:1rem 0 0}.menu-container .menu-header{align-self:center;display:flex;margin:0 0 1rem .5rem}.menu-container .menu-back{border-radius:3px;width:50px}.menu-container .menu-back:hover{background-color:#2c2a28}.menu-container .menu-page-controls{align-items:center;display:flex;padding:0 .5rem}.menu-container .menu-page-controls .current-page{font-size:1rem;padding:0 .5rem}.menu-container .menu-page-controls button svg{border-radius:100%;height:1.5rem;stroke:#0c89c7;width:1.5rem}.menu-container .menu-page-controls button:hover svg{stroke:#0ea5ef}.menu-container .menu-filter{width:100%}.menu-container .menu-filter input{background:#2c2a28;border:#666;color:#acacac;font-size:1.2rem;height:2.5rem;padding:0 1rem;width:100%}.menu-container .menu-video-filter{display:flex}.menu-container .menu-video-filter button{flex:1 1 0;max-width:unset}.menu-container h4{align-items:center;display:flex;flex-grow:1;font-size:1rem;margin:0;padding:0 .5rem;text-align:center}.menu-container .menu-entries{height:100%;max-height:100%;overflow-y:auto}.menu-container ul{flex-direction:column}.menu-container li{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;max-width:100%;padding:.75rem 1rem}.menu-container li:hover{background-color:#0c89c7}.menu-container h5{font-style:italic;font-weight:normal;padding:0 1rem}.menu-container .menu-empty{margin-top:4rem;text-align:center;width:100%}.menu-container .video-info{display:grid;font-size:.7rem;grid-row-gap:1rem;grid-template-columns:minmax(50px, 2fr) minmax(100px, 5fr);max-width:100%;padding:1rem}.overlay-container{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;z-index:500}\n',""])},192:function(e,t,r){"use strict";r.r(t);var a={};r.r(a),r.d(a,"root",(function(){return Ka})),r.d(a,"edit",(function(){return qa})),r.d(a,"entry",(function(){return $a})),r.d(a,"keyboardControls",(function(){return Ga})),r.d(a,"menu",(function(){return Xa})),r.d(a,"overlay",(function(){return Ya})),r.d(a,"tracks",(function(){return Ja})),r.d(a,"video",(function(){return Za}));var n,o,i,l,s,c,d,u,p,h,m,v,y,b,f,k,g,T,S,w,E,x,C,O,j,M,P,I,z,F,R,_,H,N,D,A,L,V,U,W,B,K,q,$,G,X,Y,J,Z,Q,ee,te,re,ae,ne,oe,ie,le,se,ce,de,ue,pe,he,me,ve,ye,be,fe,ke,ge,Te,Se,we,Ee,xe,Ce,Oe,je,Me,Pe,Ie,ze,Fe,Re,_e,He,Ne,De,Ae,Le,Ve,Ue,We,Be,Ke,qe,$e,Ge,Xe,Ye,Je,Ze,Qe,et,tt,rt,at,nt,ot,it,lt,st,ct,dt,ut,pt,ht,mt,vt,yt,bt,ft,kt,gt,Tt,St,wt,Et,xt,Ct,Ot,jt,Mt,Pt,It,zt,Ft,Rt,_t,Ht,Nt,Dt,At,Lt,Vt,Ut,Wt,Bt,Kt,qt,$t,Gt,Xt,Yt,Jt,Zt,Qt,er,tr,rr,ar,nr,or,ir,lr,sr,cr,dr,ur,pr,hr,mr,vr,yr,br,fr,kr,gr,Tr,Sr,wr,Er,xr=r(8),Cr=r.n(xr),Or=r(7),jr=r.n(Or),Mr=r(11),Pr=r.n(Mr),Ir=r(12),zr=r.n(Ir),Fr=r(13),Rr=r.n(Fr),_r=(r(102),r(0)),Hr=r.n(_r),Nr=r(23),Dr=r(5),Ar=r(16),Lr=r.n(Ar),Vr=r(4),Ur=r.n(Vr),Wr=r(14),Br=r.n(Wr),Kr=r(6),qr=r.n(Kr),$r=r(3),Gr=r.n($r),Xr=(r(30),r(1)),Yr=r(22),Jr=r.n(Yr),Zr=r(17),Qr=r.n(Zr),ea=r(70),ta=r(21),ra=r.n(ta),aa=function StopScroll(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shift,r=void 0!==t&&t;return function(e){if(e){e.addEventListener("wheel",(function Handler(e){!r&&e.shiftKey||r&&!e.shiftKey||e.preventDefault()}),!1)}}},na=function DownloadFromUrl(e,t){var r=document.createElement("a");r.href=e,r.download=t,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(e)},oa=function SortEntries(e){return e.sort((function(e,t){return e=Qr()({},e,{startTime:e.startTime||e.start_time,endTime:e.endTime||e.end_time}),t=Qr()({},t,{startTime:t.startTime||t.start_time,endTime:t.endTime||t.end_time}),e.startTime===t.startTime?e.endTime===t.endTime?e.label<t.label?-1:1:e.endTime<t.endTime?-1:1:e.startTime<t.startTime?-1:1}))},ia=function Input(e){return Hr.a.createElement("input",ra()({},e,{onKeyPress:function onKeyPress(t){t.stopPropagation(),e.onKeyPress&&e.onKeyPress(t)}}))},la=(n=Xr.d.bound,o=Xr.d.bound,u=function(){function EditStore(e){Cr()(this,EditStore),qr()(this,"saving",l,this),qr()(this,"saveFailed",s,this),qr()(this,"Save",c,this),qr()(this,"UploadMetadataTags",d,this),this.rootStore=e}return jr()(EditStore,[{key:"Reset",value:function Reset(){this.saving=!1}}]),EditStore}(),i=u,l=Gr()(i.prototype,"saving",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),s=Gr()(i.prototype,"saveFailed",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),c=Gr()(i.prototype,"Save",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Object(Xr.h)(Ur.a.mark((function _callee(){var e,t,r,a,n,o,i,l,s,c,d,u,p,h,m,v,y,b,f,k,g,T,S,w,E,x=this;return Ur.a.wrap((function _callee$(C){for(;;)switch(C.prev=C.next){case 0:if(!this.saving&&!this.rootStore.videoStore.loading){C.next=2;break}return C.abrupt("return");case 2:return this.saving=!0,C.prev=3,e=this.rootStore.client,t=this.rootStore.menuStore.selectedObject.libraryId,r=this.rootStore.menuStore.selectedObject.objectId,a=this.rootStore.menuStore.selectedObject.versionHash,n={},C.prev=9,C.next=12,e.LinkData({libraryId:t,objectId:r,versionHash:a,linkPath:"video_tags/metadata_tags"});case 12:n=(n=C.sent).metadata_tags||{},C.next=19;break;case 16:C.prev=16,C.t0=C.catch(9),console.error("Unable to retrieve existing tags");case 19:if(o={},i={},(l=this.rootStore.trackStore.tracks.filter((function(e){return"metadata"===e.trackType}))).forEach((function(e){var t=x.rootStore.trackStore.TrackEntries(e.trackId),r=Object.values(t).map((function(e){return Qr()({},e.entry,{text:e.text,start_time:e.startTime,end_time:e.endTime})})),a=n[e.key]||{},l=Qr()({},a,{label:e.label,tags:oa(r)});if(o[e.key]=l,a){a.tags=oa(a.tags||[]);var s=Object(ea.diff)(a,l);if(0===Object.keys(s).length)return}i[e.key]=l})),s=l.map((function(e){return e.key})),c=Object.keys(n).filter((function(e){return!s.includes(e)})),d=this.rootStore.trackStore.ClipInfo(),u=d.startTime,p=d.endTime,h=this.rootStore.videoStore.videoHandler.TimeToFrame(u),m=this.rootStore.videoStore.videoHandler.FrameToRat(h),v=this.rootStore.videoStore.videoHandler.TimeToFrame(p),y=this.rootStore.videoStore.videoHandler.FrameToRat(v),b=this.rootStore.videoStore.metadata.offerings.default,f=Object.keys(i).length>0||c.length>0,k=b.entry_point_rat!==m||b.exit_point_rat!==y,f||k){C.next=37;break}return this.saving=!1,this.saveFailed=!1,C.abrupt("return");case 37:return C.next=39,e.EditContentObject({libraryId:t,objectId:r});case 39:if(g=C.sent,T=g.write_token,!f){C.next=48;break}return o=Qr()({},this.rootStore.videoStore.tags,{metadata_tags:o}),S=(new TextEncoder).encode(JSON.stringify(Object(Xr.q)(o))),C.next=46,e.UploadFiles({libraryId:t,objectId:r,writeToken:T,fileInfo:[{path:"MetadataTags.json",mime_type:"application/json",size:S.length,data:S.buffer}]});case 46:return C.next=48,e.CreateLinks({libraryId:t,objectId:r,writeToken:T,links:[{path:"video_tags/metadata_tags",target:"MetadataTags.json",type:"file"}]});case 48:if(!k){C.next=53;break}return C.next=51,e.ReplaceMetadata({libraryId:t,objectId:r,writeToken:T,metadataSubtree:"offerings/default/entry_point_rat",metadata:m});case 51:return C.next=53,e.ReplaceMetadata({libraryId:t,objectId:r,writeToken:T,metadataSubtree:"offerings/default/exit_point_rat",metadata:y});case 53:return C.next=55,e.FinalizeContentObject({libraryId:t,objectId:r,writeToken:T});case 55:return w=C.sent,E=w.hash,this.rootStore.menuStore.UpdateVersionHash(E),C.next=60,this.rootStore.videoStore.ReloadMetadata();case 60:this.saveFailed=!1,C.next=67;break;case 63:C.prev=63,C.t1=C.catch(3),console.error(C.t1),this.saveFailed=!0;case 67:this.saving=!1;case 68:case"end":return C.stop()}}),_callee,this,[[3,63],[9,16]])})))}}),d=Gr()(i.prototype,"UploadMetadataTags",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Object(Xr.h)(Ur.a.mark((function _callee4(e){var t,r,a,n,o,i,l,s,c,d,u,p,h,m,v,y,b,f,k,g,T;return Ur.a.wrap((function _callee4$(S){for(;;)switch(S.prev=S.next){case 0:if(t=e.metadataFile,r=e.metadataFileRemote,a=e.overlayFiles,n=void 0===a?[]:a,o=e.overlayFilesRemote,i=void 0===o?[]:o,!this.rootStore.videoStore.loading){S.next=3;break}return S.abrupt("return");case 3:if(l=function(){var e=Br()(Ur.a.mark((function _callee2(e){return Ur.a.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Response(e).json();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),_callee2)})));return function ReadFile(t){return e.apply(this,arguments)}}(),!t){S.next=10;break}return S.next=7,l(t);case 7:if((s=S.sent).metadata_tags){S.next=10;break}throw Error("No metadata tags present in ".concat(t.name));case 10:if(!(n.length>0)){S.next=14;break}return S.next=13,Promise.all(Array.from(n).map(function(){var e=Br()(Ur.a.mark((function _callee3(e){var t,r;return Ur.a.wrap((function _callee3$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l(e);case 2:if((t=a.sent).overlay_tags){a.next=5;break}throw Error("No overlay tags present in ".concat(e.name));case 5:return r=Object.keys(t.overlay_tags.frame_level_tags).map((function(e){return parseInt(e)})),a.abrupt("return",{tags:t,startFrame:Math.min.apply(Math,Jr()(r)),endFrame:Math.max.apply(Math,Jr()(r))});case 7:case"end":return a.stop()}}),_callee3)})));return function(t){return e.apply(this,arguments)}}()));case 13:c=S.sent;case 14:if(s||c||r||0!==i.length){S.next=16;break}return S.abrupt("return");case 16:return d=this.rootStore.client,u=this.rootStore.menuStore.selectedObject.libraryId,p=this.rootStore.menuStore.selectedObject.objectId,S.next=21,d.EditContentObject({libraryId:u,objectId:p});case 21:if(h=S.sent,m=h.write_token,!s){S.next=29;break}return v=(new TextEncoder).encode(JSON.stringify(s)),S.next=27,d.UploadFiles({libraryId:u,objectId:p,writeToken:m,fileInfo:[{path:"MetadataTags.json",mime_type:"application/json",size:v.length,data:v.buffer}]});case 27:return S.next=29,d.CreateLinks({libraryId:u,objectId:p,writeToken:m,links:[{path:"video_tags/metadata_tags",target:"MetadataTags.json",type:"file"}]});case 29:if(!r){S.next=32;break}return S.next=32,d.CreateLinks({libraryId:u,objectId:p,writeToken:m,links:[{path:"video_tags/metadata_tags",target:r,type:"file"}]});case 32:if(!c){S.next=47;break}return c=c.sort((function(e,t){return e.startFrame<t.startFrame?-1:1})),S.next=36,d.DeleteMetadata({libraryId:u,objectId:p,writeToken:m,metadataSubtree:"video_tags/overlay_tags"});case 36:y=0;case 37:if(!(y<c.length)){S.next=47;break}return b=(new TextEncoder).encode(JSON.stringify(c[y].tags)),f="OverlayTags-".concat((y+1).toString().padStart(3,"0"),".json"),S.next=42,d.UploadFiles({libraryId:u,objectId:p,writeToken:m,fileInfo:[{path:f,mime_type:"application/json",size:b.length,data:b.buffer}]});case 42:return S.next=44,d.CreateLinks({libraryId:u,objectId:p,writeToken:m,links:[{path:"video_tags/overlay_tags/".concat(y),target:f,type:"file"}]});case 44:y++,S.next=37;break;case 47:if(!(i.length>0)){S.next=55;break}k=0;case 49:if(!(k<i.length)){S.next=55;break}return S.next=52,d.CreateLinks({libraryId:u,objectId:p,writeToken:m,links:[{path:"video_tags/overlay_tags/".concat(k),target:i[k],type:"file"}]});case 52:k++,S.next=49;break;case 55:return S.next=57,d.FinalizeContentObject({libraryId:u,objectId:p,writeToken:m});case 57:g=S.sent,T=g.hash,this.rootStore.menuStore.SelectVideo({libraryId:u,objectId:p,versionHash:T});case 60:case"end":return S.stop()}}),_callee4,this)})))}}),i),sa=la,ca=0,da=function(){function Id(){Cr()(this,Id)}return jr()(Id,null,[{key:"next",value:function next(){return++ca}},{key:"nextTag",value:function nextTag(){return"id-"+ ++ca}}]),Id}(),ua=da,pa=(p=Xr.d.bound,h=Xr.d.bound,m=Xr.d.bound,v=Xr.d.bound,y=Xr.d.bound,b=Xr.d.bound,f=Xr.d.bound,k=Xr.d.bound,g=Xr.d.bound,T=Xr.d.bound,S=Xr.d.bound,w=Xr.d.bound,E=Xr.d.bound,x=Xr.d.bound,C=Xr.d.bound,O=Xr.d.bound,j=function(){function EntryStore(e){Cr()(this,EntryStore),qr()(this,"entries",M,this),qr()(this,"entryTime",P,this),qr()(this,"selectedEntry",I,this),qr()(this,"hoverEntries",z,this),qr()(this,"hoverTrack",F,this),qr()(this,"hoverTime",R,this),qr()(this,"filter",_,this),qr()(this,"editingEntry",H,this),this.rootStore=e}var e;return jr()(EntryStore,[{key:"Reset",value:function Reset(){this.entries=[],this.entryTime=void 0,this.selectedEntry=void 0,this.hoverEntries=[],this.hoverTime=void 0,this.filter="",this.editingEntry=!1}},{key:"TimeToSMPTE",value:function TimeToSMPTE(e){return this.rootStore.videoStore.TimeToSMPTE(e)}},{key:"SetFilter",value:function SetFilter(e){this.filter=e}},{key:"ClearFilter",value:function ClearFilter(){this.filter=""}},{key:"FilteredEntries",value:function FilteredEntries(e){var t=function formatString(e){return e.toString().toLowerCase()},r=t(this.rootStore.entryStore.filter),a=this.rootStore.videoStore.scaleMinTime,n=this.rootStore.videoStore.scaleMaxTime;return e.filter((function(e){var o=e.startTime,i=e.endTime,l=e.text;return(!r||t(l).includes(r))&&i>=a&&o<=n})).sort((function(e,t){return e.startTime<t.startTime?-1:1}))}},{key:"PlayCurrentEntry",value:function PlayCurrentEntry(){if(this.selectedEntry){var e=this.SelectedEntry();this.rootStore.videoStore.PlaySegment(this.rootStore.videoStore.TimeToFrame(e.startTime),this.rootStore.videoStore.TimeToFrame(e.endTime))}}},{key:"PlayEntry",value:function PlayEntry(e){e&&this.rootStore.videoStore.PlaySegment(this.rootStore.videoStore.TimeToFrame(e.startTime),this.rootStore.videoStore.TimeToFrame(e.endTime))}},{key:"SelectedEntry",value:function SelectedEntry(){return this.rootStore.trackStore.TrackEntries(this.rootStore.trackStore.SelectedTrack().trackId)[this.selectedEntry]}},{key:"SetSelectedEntry",value:function SetSelectedEntry(e){this.selectedEntry=e,this.ClearEditing()}},{key:"ClearSelectedEntry",value:function ClearSelectedEntry(){this.selectedEntry=void 0,1===this.entries.length&&this.ClearEntries(),this.ClearEditing()}},{key:"Entries",value:function Entries(){var e=this.rootStore.trackStore.TrackEntries(this.rootStore.trackStore.SelectedTrack().trackId);return this.entries.map((function(t){return e[t]}))}},{key:"SetEntries",value:function SetEntries(e,t){this.ClearSelectedEntry(),this.entries=e||[],this.entryTime=t,1===e.length&&this.SetSelectedEntry(e[0])}},{key:"SetHoverEntries",value:function SetHoverEntries(e,t,r){this.hoverEntries=e||[],this.hoverTrack=t,this.hoverTime=r}},{key:"ClearHoverEntries",value:function ClearHoverEntries(){this.hoverEntries=[],this.hoverTrack=void 0,this.hoverTime=void 0}},{key:"ClearEntries",value:function ClearEntries(){this.entries=[],this.hoverEntries=[],this.selectedEntry=void 0}},{key:"SetEditing",value:function SetEditing(e){this.SetSelectedEntry(e),this.editingEntry=!0}},{key:"ClearEditing",value:function ClearEditing(){this.editingEntry=!1}},{key:"CreateEntry",value:function CreateEntry(){var e=ua.next();this.SetEditing(e)}},{key:"ModifyEntry",value:function ModifyEntry(e){var t=this,r=e.entryId,a=e.text,n=e.startTime,o=e.endTime;this.rootStore.trackStore.ModifyTrack((function(e){var i=t.rootStore.trackStore.TrackEntries(e.trackId)[r];i?(i.text=a,i.startTime=n,i.endTime=o):r=t.rootStore.trackStore.AddEntry({trackId:e.trackId,text:a,startTime:n,endTime:o})})),this.SetSelectedEntry(r),this.ClearEditing()}},{key:"RemoveEntry",value:function RemoveEntry(e){var t=this;e===this.selectedEntry&&(this.ClearSelectedEntry(),this.entries=this.entries.filter((function(t){return t!==e})),this.hoverEntries=this.hoverEntries.filter((function(t){return t!==e}))),this.rootStore.trackStore.ModifyTrack((function(r){delete t.rootStore.trackStore.TrackEntries(r.trackId)[e]}))}},{key:"DownloadSegment",value:(e=Br()(Ur.a.mark((function _callee(e,t){var r,a,n,o,i,l,s,c,d,u;return Ur.a.wrap((function _callee$(p){for(;;)switch(p.prev=p.next){case 0:return r=this.rootStore.trackStore.TrackEntries(this.rootStore.trackStore.SelectedTrack().trackId)[e],a=r.source,n=this.TimeToSMPTE(r.startTime),o=this.TimeToSMPTE(r.endTime),i=r.streamType,l=this.rootStore.videoStore.name.substring(0,10),s="".concat(l,"-").concat(i,"--").concat(n,"-").concat(o,".mp4"),c=this.rootStore.client,p.next=10,c.DownloadPart({libraryId:this.rootStore.menuStore.libraryId,objectId:this.rootStore.menuStore.objectId,versionHash:this.rootStore.videoStore.versionHash,partHash:a,callback:t,format:"blob"});case 10:d=p.sent,u=window.URL.createObjectURL(d),na(u,s);case 13:case"end":return p.stop()}}),_callee,this)}))),function DownloadSegment(t,r){return e.apply(this,arguments)})}]),EntryStore}(),M=Gr()(j.prototype,"entries",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),P=Gr()(j.prototype,"entryTime",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=Gr()(j.prototype,"selectedEntry",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=Gr()(j.prototype,"hoverEntries",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),F=Gr()(j.prototype,"hoverTrack",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=Gr()(j.prototype,"hoverTime",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=Gr()(j.prototype,"filter",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return""}}),H=Gr()(j.prototype,"editingEntry",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),Gr()(j.prototype,"SetFilter",[p],Object.getOwnPropertyDescriptor(j.prototype,"SetFilter"),j.prototype),Gr()(j.prototype,"ClearFilter",[h],Object.getOwnPropertyDescriptor(j.prototype,"ClearFilter"),j.prototype),Gr()(j.prototype,"FilteredEntries",[m],Object.getOwnPropertyDescriptor(j.prototype,"FilteredEntries"),j.prototype),Gr()(j.prototype,"PlayCurrentEntry",[v],Object.getOwnPropertyDescriptor(j.prototype,"PlayCurrentEntry"),j.prototype),Gr()(j.prototype,"PlayEntry",[y],Object.getOwnPropertyDescriptor(j.prototype,"PlayEntry"),j.prototype),Gr()(j.prototype,"SetSelectedEntry",[b],Object.getOwnPropertyDescriptor(j.prototype,"SetSelectedEntry"),j.prototype),Gr()(j.prototype,"ClearSelectedEntry",[f],Object.getOwnPropertyDescriptor(j.prototype,"ClearSelectedEntry"),j.prototype),Gr()(j.prototype,"SetEntries",[k],Object.getOwnPropertyDescriptor(j.prototype,"SetEntries"),j.prototype),Gr()(j.prototype,"SetHoverEntries",[g],Object.getOwnPropertyDescriptor(j.prototype,"SetHoverEntries"),j.prototype),Gr()(j.prototype,"ClearHoverEntries",[T],Object.getOwnPropertyDescriptor(j.prototype,"ClearHoverEntries"),j.prototype),Gr()(j.prototype,"ClearEntries",[S],Object.getOwnPropertyDescriptor(j.prototype,"ClearEntries"),j.prototype),Gr()(j.prototype,"SetEditing",[w],Object.getOwnPropertyDescriptor(j.prototype,"SetEditing"),j.prototype),Gr()(j.prototype,"ClearEditing",[E],Object.getOwnPropertyDescriptor(j.prototype,"ClearEditing"),j.prototype),Gr()(j.prototype,"CreateEntry",[x],Object.getOwnPropertyDescriptor(j.prototype,"CreateEntry"),j.prototype),Gr()(j.prototype,"ModifyEntry",[C],Object.getOwnPropertyDescriptor(j.prototype,"ModifyEntry"),j.prototype),Gr()(j.prototype,"RemoveEntry",[O],Object.getOwnPropertyDescriptor(j.prototype,"RemoveEntry"),j.prototype),j),ha=(N=Xr.d.bound,D=Xr.d.bound,A=Xr.d.bound,L=Xr.d.bound,V=Xr.d.bound,U=Xr.d.bound,W=Xr.d.bound,B=Xr.d.bound,K=Xr.d.bound,q=Xr.d.bound,$=Xr.d.bound,G=Xr.d.bound,X=Xr.d.bound,Y=Xr.d.bound,J=function(){function ControlStore(e){Cr()(this,ControlStore),qr()(this,"controlMap",Z,this),qr()(this,"modifiers",Q,this),qr()(this,"controls",ee,this),this.rootStore=e,this.InitializeControlMap()}return jr()(ControlStore,[{key:"InitializeControlMap",value:function InitializeControlMap(){var e={};Object.values(this.controls).forEach((function(t){t.forEach((function(t){var r=t[0],a=t[1];r.forEach((function(t){e[t]={},a.action&&(e[t].action=a.action.action),a.shiftAction&&(e[t].shiftAction=a.shiftAction.action),a.altAction&&(e[t].altAction=a.altAction.action),a.controlAction&&(e[t].controlAction=a.controlAction.action)}))}))})),this.controlMap=e}},{key:"HandleModifiers",value:function HandleModifiers(e){var t="keydown"===e.type.toLowerCase();switch(e.key.toLowerCase()){case"control":this.modifiers.control=t;break;case"shift":this.modifiers.shift=t;break;case"alt":this.modifiers.alt=t;break;case"meta":this.modifiers.meta=t}if(t){var r=["arrowleft","arrowright","arrowup","arrowdown"].includes(e.key.toLowerCase());(this.modifiers.control||this.modifiers.shift||r)&&this.HandleInput(e)}}},{key:"HandleInput",value:function HandleInput(e){if(!document.activeElement||"input"!==document.activeElement.tagName.toLowerCase()){var t,r=this.controlMap[e.key]||{};!t&&this.modifiers.shift&&(t=r.shiftAction),!t&&this.modifiers.alt&&(t=r.altAction),!t&&this.modifiers.control&&(t=r.controlAction),t||(t=r.action),t&&(e.preventDefault(),t(e))}}},{key:"Save",value:function Save(){this.rootStore.editStore.Save()}},{key:"Undo",value:function Undo(){}},{key:"Redo",value:function Redo(){}},{key:"SeekFrames",value:function SeekFrames(e){var t=e.frames,r=e.seconds;this.rootStore.videoStore.SeekFrames({frames:t,seconds:r})}},{key:"PlayPause",value:function PlayPause(){this.rootStore.videoStore.PlayPause()}},{key:"PlayCurrentEntry",value:function PlayCurrentEntry(){this.rootStore.entryStore.PlayCurrentEntry()}},{key:"SetPlaybackRate",value:function SetPlaybackRate(e){this.rootStore.videoStore.SetPlaybackRate(e)}},{key:"ChangePlaybackRate",value:function ChangePlaybackRate(e){this.rootStore.videoStore.ChangePlaybackRate(e)}},{key:"ToggleFullscreen",value:function ToggleFullscreen(){this.rootStore.videoStore.ToggleFullscreen()}},{key:"ToggleMuted",value:function ToggleMuted(){this.rootStore.videoStore.ToggleMuted()}},{key:"SetVolume",value:function SetVolume(e){this.rootStore.videoStore.SetVolume(e*this.rootStore.videoStore.scale)}},{key:"ChangeVolume",value:function ChangeVolume(e){this.rootStore.videoStore.ChangeVolume(e*this.rootStore.videoStore.scale)}},{key:"ToggleTrackByIndex",value:function ToggleTrackByIndex(e){this.rootStore.trackStore.ToggleTrackByIndex(parseInt(e)-1)}}]),ControlStore}(),Z=Gr()(J.prototype,"controlMap",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=Gr()(J.prototype,"modifiers",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return{alt:!1,control:!1,shift:!1,meta:!1}}}),Gr()(J.prototype,"InitializeControlMap",[N],Object.getOwnPropertyDescriptor(J.prototype,"InitializeControlMap"),J.prototype),Gr()(J.prototype,"HandleModifiers",[D],Object.getOwnPropertyDescriptor(J.prototype,"HandleModifiers"),J.prototype),Gr()(J.prototype,"HandleInput",[A],Object.getOwnPropertyDescriptor(J.prototype,"HandleInput"),J.prototype),Gr()(J.prototype,"Save",[L],Object.getOwnPropertyDescriptor(J.prototype,"Save"),J.prototype),Gr()(J.prototype,"SeekFrames",[V],Object.getOwnPropertyDescriptor(J.prototype,"SeekFrames"),J.prototype),Gr()(J.prototype,"PlayPause",[U],Object.getOwnPropertyDescriptor(J.prototype,"PlayPause"),J.prototype),Gr()(J.prototype,"PlayCurrentEntry",[W],Object.getOwnPropertyDescriptor(J.prototype,"PlayCurrentEntry"),J.prototype),Gr()(J.prototype,"SetPlaybackRate",[B],Object.getOwnPropertyDescriptor(J.prototype,"SetPlaybackRate"),J.prototype),Gr()(J.prototype,"ChangePlaybackRate",[K],Object.getOwnPropertyDescriptor(J.prototype,"ChangePlaybackRate"),J.prototype),Gr()(J.prototype,"ToggleFullscreen",[q],Object.getOwnPropertyDescriptor(J.prototype,"ToggleFullscreen"),J.prototype),Gr()(J.prototype,"ToggleMuted",[$],Object.getOwnPropertyDescriptor(J.prototype,"ToggleMuted"),J.prototype),Gr()(J.prototype,"SetVolume",[G],Object.getOwnPropertyDescriptor(J.prototype,"SetVolume"),J.prototype),Gr()(J.prototype,"ChangeVolume",[X],Object.getOwnPropertyDescriptor(J.prototype,"ChangeVolume"),J.prototype),Gr()(J.prototype,"ToggleTrackByIndex",[Y],Object.getOwnPropertyDescriptor(J.prototype,"ToggleTrackByIndex"),J.prototype),ee=Gr()(J.prototype,"controls",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){var e=this;return{Playback:[[["p"," "],{action:{description:"Play/Pause",action:this.PlayPause}}],[["l"],{action:{description:"Play current entry",action:this.PlayCurrentEntry}}],[["f"],{action:{description:"Toggle fullscreen",action:this.ToggleFullscreen}}],[["-"],{action:{description:"Reduce playback rate by 0.5x",action:function action(){return e.ChangePlaybackRate(-.5)}}}],[["["],{action:{description:"Reduce playback rate by 0.1x",action:function action(){return e.ChangePlaybackRate(-.1)}}}],[["="],{action:{description:"Reset playback rate to normal",action:function action(){return e.SetPlaybackRate(1)}}}],[["]"],{action:{description:"Increase playback rate by 0.1x",action:function action(){return e.ChangePlaybackRate(.1)}}}],[["+"],{action:{description:"Increase playback rate by 0.5x",action:function action(){return e.ChangePlaybackRate(.5)}}}]],Volume:[[["m"],{action:{description:"Toggle mute",action:this.ToggleMuted}}],[["ArrowDown"],{action:{description:"Reduce volume by 5%",action:function action(){return e.ChangeVolume(-.05)}},shiftAction:{description:"Reduce volume by 25%",action:function action(){return e.ChangeVolume(-.25)}}}],[["ArrowUp"],{action:{description:"Increase volume by 5%",action:function action(){return e.ChangeVolume(.05)}},shiftAction:{description:"Increase volume by 25%",action:function action(){return e.ChangeVolume(.25)}}}],[[],{keyLabel:"Scroll (over video or volume control)",action:{description:"Adjust volume up or down",action:function action(){}}}]],Seeking:[[["ArrowLeft"],{action:{description:"Go back 1 frame",action:function action(){return e.SeekFrames({frames:-1})}},shiftAction:{description:"Go back 1 second",action:function action(){return e.SeekFrames({seconds:-1})}},altAction:{description:"Go back 1 minute",action:function action(){return e.SeekFrames({seconds:-60})}}}],[["ArrowRight"],{action:{description:"Go forward 1 frame",action:function action(){return e.SeekFrames({frames:1})}},shiftAction:{description:"Go forward 1 second",action:function action(){return e.SeekFrames({seconds:1})}},altAction:{description:"Go forward 1 minute",action:function action(){return e.SeekFrames({seconds:60})}}}]],Tracks:[[["1","2","3","4","5","6","7","8","9"],{keyLabel:"1-9",action:{description:"Toggle the specified track",action:function action(t){return e.ToggleTrackByIndex(t.key)}}}],[[],{keyLabel:"Shift + Scroll (over track)",action:{description:"Adjust timeline scale",action:function action(){}}}]],Editing:[[["s"],{controlAction:{description:"Save",action:function action(){return e.Save()}}}]]}}}),J),ma=(te=Xr.d.bound,re=Xr.d.bound,ae=Xr.d.bound,ne=Xr.d.bound,oe=Xr.d.bound,ie=Xr.d.bound,le=Xr.d.bound,se=Xr.d.bound,ce=Xr.d.bound,de=Xr.d.bound,ue=Xr.d.bound,pe=Xr.d.bound,he=function(){function MenuStore(e){Cr()(this,MenuStore),qr()(this,"libraryId",me,this),qr()(this,"objectId",ve,this),qr()(this,"error",ye,this),qr()(this,"showMenu",be,this),qr()(this,"showVideoOnly",fe,this),qr()(this,"libraries",ke,this),qr()(this,"objects",ge,this),qr()(this,"selectedObject",Te,this),qr()(this,"SelectVideo",Se,this),qr()(this,"ListLibraries",we,this),qr()(this,"ListObjects",Ee,this),this.rootStore=e}return jr()(MenuStore,[{key:"ToggleMenu",value:function ToggleMenu(e){this.showMenu=e}},{key:"UpdateVersionHash",value:function UpdateVersionHash(e){this.selectedObject.versionHash=e}},{key:"ToggleVideoFilter",value:function ToggleVideoFilter(e){this.showVideoOnly=e}},{key:"SetErrorMessage",value:function SetErrorMessage(e){this.error=e}},{key:"ClearErrorMessage",value:function ClearErrorMessage(){this.error=""}},{key:"SetLibraryId",value:function SetLibraryId(e){this.libraryId=e}},{key:"ClearLibraryId",value:function ClearLibraryId(){this.libraryId=""}},{key:"SetObjectId",value:function SetObjectId(e){this.objectId=e}},{key:"ClearObjectId",value:function ClearObjectId(){this.objectId=""}}]),MenuStore}(),me=Gr()(he.prototype,"libraryId",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return""}}),ve=Gr()(he.prototype,"objectId",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return""}}),ye=Gr()(he.prototype,"error",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return""}}),be=Gr()(he.prototype,"showMenu",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),fe=Gr()(he.prototype,"showVideoOnly",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),ke=Gr()(he.prototype,"libraries",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return{}}}),ge=Gr()(he.prototype,"objects",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return{}}}),Te=Gr()(he.prototype,"selectedObject",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gr()(he.prototype,"ToggleMenu",[te],Object.getOwnPropertyDescriptor(he.prototype,"ToggleMenu"),he.prototype),Gr()(he.prototype,"UpdateVersionHash",[re],Object.getOwnPropertyDescriptor(he.prototype,"UpdateVersionHash"),he.prototype),Gr()(he.prototype,"ToggleVideoFilter",[ae],Object.getOwnPropertyDescriptor(he.prototype,"ToggleVideoFilter"),he.prototype),Gr()(he.prototype,"SetErrorMessage",[ne],Object.getOwnPropertyDescriptor(he.prototype,"SetErrorMessage"),he.prototype),Gr()(he.prototype,"ClearErrorMessage",[oe],Object.getOwnPropertyDescriptor(he.prototype,"ClearErrorMessage"),he.prototype),Se=Gr()(he.prototype,"SelectVideo",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Object(Xr.h)(Ur.a.mark((function _callee(e){var t,r,a,n,o;return Ur.a.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(t=e.libraryId,r=e.objectId,a=e.versionHash,i.prev=1,this.rootStore.Reset(),this.ClearErrorMessage(),this.selectedObject=void 0,a&&(r=this.rootStore.client.utils.DecodeVersionHash(a).objectId),t){i.next=10;break}return i.next=9,this.rootStore.client.ContentObjectLibraryId({objectId:r});case 9:t=i.sent;case 10:return window.self!==window.top&&this.rootStore.client.SendMessage({options:{operation:"SetFramePath",path:Lr()("#",a||Lr()(t,r))},noResponse:!0}),window.location.hash="".concat(Lr()("#",a||Lr()(t,r))),i.next=14,this.rootStore.client.ContentObject({libraryId:t,objectId:r,versionHash:a});case 14:return n=i.sent,a||(a=n.hash),i.next=18,this.rootStore.client.ContentObjectMetadata({objectId:r,versionHash:a});case 18:o=i.sent,this.selectedObject={libraryId:t,objectId:n.id,versionHash:a,name:o.public&&o.public.name||o.name||a,metadata:o,isVideo:o.offerings&&o.offerings.default&&o.offerings.default.ready},this.rootStore.videoStore.SetVideo(this.selectedObject),i.next=29;break;case 23:throw i.prev=23,i.t0=i.catch(1),console.error("Failed to load object:"),console.error(i.t0),this.SetErrorMessage(i.t0.message||i.t0),i.t0;case 29:case"end":return i.stop()}}),_callee,this,[[1,23]])})))}}),we=Gr()(he.prototype,"ListLibraries",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Object(Xr.h)(Ur.a.mark((function _callee3(){var e,t=this;return Ur.a.wrap((function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.rootStore.client.ContentLibraries();case 2:return e=r.sent,this.libraries={},r.next=6,Promise.all(e.map(function(){var e=Br()(Ur.a.mark((function _callee2(e){var r;return Ur.a.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.rootStore.client.ContentObjectMetadata({libraryId:e,objectId:e.replace("ilib","iq__")});case 3:r=a.sent,t.libraries[e]={libraryId:e,name:r.public&&r.public.name||r.name||e,metadata:r},a.next=10;break;case 7:return a.prev=7,a.t0=a.catch(0),a.abrupt("return",void 0);case 10:case"end":return a.stop()}}),_callee2,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()));case 6:case"end":return r.stop()}}),_callee3,this)})))}}),Ee=Gr()(he.prototype,"ListObjects",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Object(Xr.h)(Ur.a.mark((function _callee5(e){var t,r,a,n,o,i,l,s,c,d,u,p,h,m;return Ur.a.wrap((function _callee5$(v){for(;;)switch(v.prev=v.next){case 0:return t=e.libraryId,r=e.page,a=void 0===r?1:r,n=e.perPage,o=void 0===n?25:n,i=e.filter,l=void 0===i?"":i,s=e.cacheId,c=void 0===s?"":s,v.next=3,this.rootStore.client.ContentObjectMetadata({libraryId:t,objectId:t.replace("ilib","iq__")});case 3:return d=v.sent,this.libraries[t]={libraryId:t,name:d.public&&d.public.name||d.name||t,metadata:d},u=[],l&&u.push({key:"/public/name",type:"cnt",filter:l}),this.showVideoOnly&&u.push({key:"/offerings/default/ready",type:"eq",filter:!0}),v.next=10,this.rootStore.client.ContentObjects({libraryId:t,filterOptions:{select:["description","image","name","player_background","public"],filter:u,start:(a-1)*o,limit:o,sort:"public/name",cacheId:c}});case 10:return p=v.sent,h=p.contents,m=p.paging,v.next=15,Promise.all(h.map(function(){var e=Br()(Ur.a.mark((function _callee4(e){var t;return Ur.a.wrap((function _callee4$(r){for(;;)switch(r.prev=r.next){case 0:return t=e.versions[0],r.abrupt("return",{objectId:t.id,versionHash:t.hash,name:t.meta.public&&t.meta.public.name||t.meta.name||t.id,metadata:t.meta});case 2:case"end":return r.stop()}}),_callee4)})));return function(t){return e.apply(this,arguments)}}()));case 15:return this.objects[t]=v.sent,v.abrupt("return",m);case 17:case"end":return v.stop()}}),_callee5,this)})))}}),Gr()(he.prototype,"SetLibraryId",[ce],Object.getOwnPropertyDescriptor(he.prototype,"SetLibraryId"),he.prototype),Gr()(he.prototype,"ClearLibraryId",[de],Object.getOwnPropertyDescriptor(he.prototype,"ClearLibraryId"),he.prototype),Gr()(he.prototype,"SetObjectId",[ue],Object.getOwnPropertyDescriptor(he.prototype,"SetObjectId"),he.prototype),Gr()(he.prototype,"ClearObjectId",[pe],Object.getOwnPropertyDescriptor(he.prototype,"ClearObjectId"),he.prototype),he),va=(xe=Xr.d.bound,Ce=Xr.d.bound,Oe=Xr.d.bound,je=function(){function OverlayStore(e){Cr()(this,OverlayStore),qr()(this,"trackMap",Me,this),qr()(this,"overlayEnabled",Pe,this),qr()(this,"enabledOverlayTracks",Ie,this),qr()(this,"AddOverlayTracks",ze,this),this.rootStore=e}return jr()(OverlayStore,[{key:"Reset",value:function Reset(){this.overlayTrack=void 0,this.overlayEnabled=!1}},{key:"ToggleOverlay",value:function ToggleOverlay(e){this.overlayEnabled=e}},{key:"ToggleOverlayTrack",value:function ToggleOverlayTrack(e,t){this.enabledOverlayTracks[e]=t}}]),OverlayStore}(),Me=Gr()(je.prototype,"trackMap",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return{}}}),Pe=Gr()(je.prototype,"overlayEnabled",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),Ie=Gr()(je.prototype,"enabledOverlayTracks",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return{}}}),ze=Gr()(je.prototype,"AddOverlayTracks",[xe],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Object(Xr.h)(Ur.a.mark((function _callee(){var e,t,r,a,n,o,i=this;return Ur.a.wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:if((e=this.rootStore.videoStore.metadata).video_tags&&e.video_tags.overlay_tags){l.next=3;break}return l.abrupt("return");case 3:t=[],r=0;case 5:if(!(r<Object.keys(e.video_tags.overlay_tags).length)){l.next=14;break}return l.next=8,this.rootStore.client.LinkData({versionHash:this.rootStore.videoStore.versionHash,linkPath:"video_tags/overlay_tags/".concat(r),format:"json"});case 8:a=l.sent,n=a.overlay_tags,t.push(n.frame_level_tags);case 11:r++,l.next=5;break;case 14:if(0!==t.length){l.next=16;break}return l.abrupt("return");case 16:o=Object.assign.apply(Object,[{}].concat(t)),Object.keys(Object.values(o)[0]).forEach((function(e){i.enabledOverlayTracks[e]=!0;var t=i.rootStore.trackStore.tracks.find((function(t){return t.key===e}));t&&(t.hasOverlay=!0,i.trackMap[e]=t.trackId)})),this.overlayTrack=o,this.overlayEnabled=!0;case 20:case"end":return l.stop()}}),_callee,this)})))}}),Gr()(je.prototype,"ToggleOverlay",[Ce],Object.getOwnPropertyDescriptor(je.prototype,"ToggleOverlay"),je.prototype),Gr()(je.prototype,"ToggleOverlayTrack",[Oe],Object.getOwnPropertyDescriptor(je.prototype,"ToggleOverlayTrack"),je.prototype),je),ya=r(24),ba=r.n(ya),fa=r(50),ka=r(71),ga=r.n(ka),Ta=r(72),Sa=(r(122),[{r:200,g:50,b:50,a:150},{r:50,g:200,b:50,a:150},{r:50,g:50,b:200,a:150},{r:50,g:200,b:200,a:150},{r:200,g:50,b:200,a:150},{r:200,g:200,b:50,a:150},{r:200,g:200,b:200,a:150}]),wa=0,Ea=(Fe=Xr.d.bound,Re=Xr.d.bound,_e=Xr.d.bound,He=Xr.d.bound,Ne=Xr.d.bound,De=Xr.d.bound,Ae=Xr.d.bound,Le=Xr.d.bound,Ve=Xr.d.bound,Ue=Xr.d.bound,We=Xr.d.bound,Be=Xr.d.bound,Ke=Xr.d.bound,qe=Xr.d.bound,$e=Xr.d.bound,Ge=Xr.d.bound,Xe=Xr.d.bound,Ye=function(){function Tracks(e){var t=this;if(Cr()(this,Tracks),this.entries={},this.intervalTrees={},qr()(this,"tracks",Je,this),qr()(this,"audioTracks",Ze,this),qr()(this,"selectedTrack",Qe,this),qr()(this,"editingTrack",et,this),qr()(this,"audioLoading",tt,this),qr()(this,"audioSupported",rt,this),qr()(this,"totalEntries",at,this),this.AudioTracksFromHLSPlaylist=Object(Xr.h)(Ur.a.mark((function _callee2(){var e,t,r=this;return Ur.a.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.ParsedHLSPlaylist();case 2:if(e=a.sent,t=e.mediaGroups.AUDIO.audio){a.next=6;break}return a.abrupt("return",[]);case 6:return a.next=8,Promise.all(Object.keys(t).map(function(){var e=Br()(Ur.a.mark((function _callee(e){var a,n,o,i,l,s;return Ur.a.wrap((function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return a=t[e].uri,n=Lr()(r.BasePlayoutUrl(),a),c.next=4,r.ParsedHLSPlaylist(n);case 4:if(o=c.sent,i=n.replace("playlist.m3u8","init.m4s"),o){c.next=8;break}return c.abrupt("return");case 8:return l=n.split("?")[0].replace("playlist.m3u8",""),s=o.segments.map((function(e,t){return{number:t,url:Lr()(l,e.uri),duration:e.duration}})),c.abrupt("return",{initSegmentUrl:i,segments:s});case 11:case"end":return c.stop()}}),_callee)})));return function(t){return e.apply(this,arguments)}}()));case 8:return a.abrupt("return",a.sent);case 9:case"end":return a.stop()}}),_callee2,this)}))),this.SubtitleTracksFromHLSPlaylist=Object(Xr.h)(Ur.a.mark((function _callee4(){var e,t,r,a=this;return Ur.a.wrap((function _callee4$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.ParsedHLSPlaylist();case 2:if(e=n.sent,t=e.mediaGroups.SUBTITLES.subs){n.next=6;break}return n.abrupt("return",[]);case 6:return r=[],n.next=9,Promise.all(Object.keys(t).map(function(){var e=Br()(Ur.a.mark((function _callee3(e){var n,o,i,l,s,c,d;return Ur.a.wrap((function _callee3$(u){for(;;)switch(u.prev=u.next){case 0:return n=t[e].uri,o=Lr()(a.BasePlayoutUrl(),n),u.next=4,a.ParsedHLSPlaylist(o);case 4:if(i=u.sent){u.next=7;break}return u.abrupt("return");case 7:return l=i.segments[0].uri,s=o.split("?")[0].replace("playlist.m3u8",""),c=Lr()(s,l),u.next=12,fetch(c);case 12:return u.next=14,u.sent.text();case 14:d=u.sent,r.push({label:e,vttData:d});case 16:case"end":return u.stop()}}),_callee3)})));return function(t){return e.apply(this,arguments)}}()));case 9:return n.abrupt("return",r);case 10:case"end":return n.stop()}}),_callee4,this)}))),qr()(this,"AddAudioSegment",nt,this),qr()(this,"AddAudioTracks",ot,this),this.AddTracksFromTags=function(e){if(!e)return[];var r=[];return Object.keys(e).forEach((function(a){var n={};e[a].tags.forEach((function(e){var r=t.Cue({entryType:"metadata",startTime:e.start_time,endTime:e.end_time,text:e.text,entry:Object(Xr.q)(e)});n[r.entryId]=r})),r.push({label:e[a].label,trackType:"metadata",key:a,entries:n})})),r},this.AddSubtitleTracks=Object(Xr.h)(Ur.a.mark((function _callee5(){var e=this;return Ur.a.wrap((function _callee5$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.SubtitleTracksFromHLSPlaylist();case 2:t.sent.map((function(t){try{var r=e.ParseVTTTrack(t);e.totalEntries+=Object.keys(r).length,e.AddTrack(Qr()({},t,{type:"vtt",entries:r}))}catch(e){console.error("Error parsing VTT track:"),console.error(e)}}));case 4:case"end":return t.stop()}}),_callee5,this)}))),qr()(this,"InitializeTracks",it,this),this.rootStore=e,wa=0,!window.AudioContext&&!window.webkitAudioContext)return this.audioSupported=!1,void console.error("AudioContext not supported in this browser")}var e;return jr()(Tracks,[{key:"NextColor",value:function NextColor(){var e=Sa[wa];return wa=(wa+1)%Sa.length,e}},{key:"Reset",value:function Reset(){this.tracks=[],this.audioTracks=[],this.selectedTrack=void 0,this.editingTrack=!1,this.audioLoading=!1}},{key:"BasePlayoutUrl",value:function BasePlayoutUrl(){return this.rootStore.videoStore.source.split("?")[0].replace("playlist.m3u8","")}},{key:"ParsedHLSPlaylist",value:(e=Br()(Ur.a.mark((function _callee6(e){var t,r;return Ur.a.wrap((function _callee6$(a){for(;;)switch(a.prev=a.next){case 0:return e||(e=this.rootStore.videoStore.source),a.next=3,fetch(e);case 3:return a.next=5,a.sent.text();case 5:return t=a.sent,(r=new Ta.a).push(t),r.end(),a.abrupt("return",r.manifest);case 10:case"end":return a.stop()}}),_callee6,this)}))),function ParsedHLSPlaylist(t){return e.apply(this,arguments)})},{key:"AddTrack",value:function AddTrack(e){var t=e.label,r=e.key,a=e.type,n=e.entries,o=e.color,i=ua.next();return this.tracks.push({trackId:i,color:o||this.NextColor(),version:1,label:t,key:r||"track-".concat(t),trackType:a}),this.entries[i]=n,this.intervalTrees[i]=this.CreateTrackIntervalTree(n),i}},{key:"TrackEntries",value:function TrackEntries(e){return this.entries[e]}},{key:"TrackEntryIntervalTree",value:function TrackEntryIntervalTree(e){return this.intervalTrees[e]}},{key:"Cue",value:function Cue(e){var t=e.entryType,r=e.label,a=e.startTime,n=e.endTime,o=e.text,i=e.entry;return"string"==typeof a&&a.split(":").length>1&&(a=this.rootStore.videoStore.videoHandler.SMPTEToTime(a),n=this.rootStore.videoStore.videoHandler.SMPTEToTime(n)),{entryId:ua.next(),entryType:t,label:r,startTime:a,endTime:n,text:o,entry:i}}},{key:"FormatVTTCue",value:function FormatVTTCue(e,t){var r={};return["align","endTime","id","line","lineAlign","position","positionAlign","region","size","snapToLines","startTime","text","vertical"].forEach((function(e){return r[e]=t[e]})),this.Cue({entryType:"vtt",label:e,startTime:t.startTime,endTime:t.endTime,text:t.text,entry:r})}},{key:"ParseVTTTrack",value:function ParseVTTTrack(e){var t=this,r=new fa.WebVTT.Parser(window,fa.WebVTT.StringDecoder()),a={};r.oncue=function(r){var n=t.FormatVTTCue(e.label,r);a[n.entryId]=n};try{r.parse(e.vttData),r.flush()}catch(t){console.error("VTT cue parse failure on track ".concat(e.label,": ")),console.error(t)}return a}},{key:"CreateTrackIntervalTree",value:function CreateTrackIntervalTree(e){var t=new ga.a;return Object.values(e).forEach((function(e){return t.insert(e.startTime,e.endTime,e.entryId)})),t}},{key:"AddMetadataTracks",value:function AddMetadataTracks(){var e=this;this.AddTracksFromTags(this.rootStore.videoStore.tags.metadata_tags).map((function(t){e.totalEntries+=Object.keys(t.entries).length,e.AddTrack({label:t.label,key:t.key,type:"metadata",entries:t.entries})}))}},{key:"AddSegmentTracks",value:function AddSegmentTracks(){var e=this;if(this.rootStore.videoStore.isVideo)try{var t=this.rootStore.videoStore.metadata.offerings.default.media_struct.streams;["video","audio"].forEach((function(r){if(t[r]){var a=t[r].sources,n={};a.forEach((function(t){var a=t.timeline_start,o=t.timeline_end,i=t.source,l=e.Cue({entryType:"segment",startTime:parseFloat(a.float.toFixed(2)),endTime:parseFloat(o.float.toFixed(2)),text:"".concat(a.float.toFixed(2)," - ").concat(o.float.toFixed(2)),entry:{}});l.source=i,l.streamType=r,n[l.entryId]=l})),e.AddTrack({label:"".concat("video"===r?"Video":"Audio"," Segments"),key:"".concat(r,"-segments"),type:"segments",entries:n})}else console.error("No ".concat(r," stream found. Skipping ").concat(r," segment track."))}))}catch(e){console.error("Failed to load segment tracks:"),console.error(e)}}},{key:"AddClipTrack",value:function AddClipTrack(){var e=this.Cue({entryType:"clip",startTime:this.rootStore.videoStore.clipStartTime,endTime:this.rootStore.videoStore.clipEndTime,text:"Primary Content",entry:{}}),t=ba()({},e.entryId,e);this.AddTrack({label:"Primary Content",key:"primary-content",type:"clip",color:{r:255,g:255,b:255,a:200},entries:t})}},{key:"SelectedTrack",value:function SelectedTrack(){var e=this;if(this.selectedTrack)return this.tracks.find((function(t){return t.trackId===e.selectedTrack}))}},{key:"SetSelectedTrack",value:function SetSelectedTrack(e){this.selectedTrack!==e&&(this.selectedTrack=e,this.rootStore.entryStore.ClearEntries(),this.rootStore.entryStore.ClearFilter(),this.ClearEditing())}},{key:"ClearSelectedTrack",value:function ClearSelectedTrack(){this.SetSelectedTrack(void 0)}},{key:"ToggleTrack",value:function ToggleTrack(e){var t=this.tracks.find((function(t){return t.label===e}));t&&(t.active=this.rootStore.videoStore.ToggleTrack(e))}},{key:"ToggleTrackByIndex",value:function ToggleTrackByIndex(e){var t=this.tracks[e];t&&(t.active=this.rootStore.videoStore.ToggleTrack(t.label))}},{key:"SetEditing",value:function SetEditing(e){this.SetSelectedTrack(e),this.editingTrack=!0}},{key:"ClearEditing",value:function ClearEditing(){this.editingTrack=!1}},{key:"CreateTrack",value:function CreateTrack(e){var t=e.label,r=e.key,a=this.AddTrack({label:t,key:r,type:"metadata",entries:{}});this.rootStore.entryStore.ClearSelectedEntry(),this.SetEditing(a)}},{key:"EditTrack",value:function EditTrack(e){var t=e.trackId,r=e.label,a=e.key,n=this.tracks.find((function(e){return e.trackId===t}));n.label=r,n.key=a,this.ClearEditing()}},{key:"ModifyTrack",value:function ModifyTrack(e){var t=this.SelectedTrack();e(t),this.intervalTrees[t.trackId]=this.CreateTrackIntervalTree(this.entries[t.trackId]),t.version+=1}},{key:"RemoveTrack",value:function RemoveTrack(e){this.ClearSelectedTrack(),this.tracks=this.tracks.filter((function(t){return t.trackId!==e}))}},{key:"AddEntry",value:function AddEntry(e){var t=e.trackId,r=e.text,a=e.startTime,n=e.endTime,o=this.tracks.find((function(e){return e.trackId===t})),i=this.Cue({entryType:"metadata",text:r,startTime:a,endTime:n});return this.entries[o.trackId][i.entryId]=i,i.entryId}},{key:"ClipInfo",value:function ClipInfo(){var e=this.tracks.find((function(e){return"clip"===e.trackType}));return Object.values(this.entries[e.trackId])[0]}}]),Tracks}(),Je=Gr()(Ye.prototype,"tracks",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),Ze=Gr()(Ye.prototype,"audioTracks",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),Qe=Gr()(Ye.prototype,"selectedTrack",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),et=Gr()(Ye.prototype,"editingTrack",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),tt=Gr()(Ye.prototype,"audioLoading",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),rt=Gr()(Ye.prototype,"audioSupported",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),at=Gr()(Ye.prototype,"totalEntries",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),Gr()(Ye.prototype,"TrackEntries",[Fe],Object.getOwnPropertyDescriptor(Ye.prototype,"TrackEntries"),Ye.prototype),Gr()(Ye.prototype,"TrackEntryIntervalTree",[Re],Object.getOwnPropertyDescriptor(Ye.prototype,"TrackEntryIntervalTree"),Ye.prototype),nt=Gr()(Ye.prototype,"AddAudioSegment",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Object(Xr.h)(Ur.a.mark((function _callee8(e,t,r,a,n){var o,i,l,s,c,d,u,p,h,m=this;return Ur.a.wrap((function _callee8$(v){for(;;)switch(v.prev=v.next){case 0:return o=this.audioContext.createBufferSource(),v.next=3,new Promise(function(){var e=Br()(Ur.a.mark((function _callee7(e,r){return Ur.a.wrap((function _callee7$(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m.audioContext.decodeAudioData(t,(function(t){o.buffer=t,e()}));case 3:a.next=10;break;case 5:a.prev=5,a.t0=a.catch(0),console.error("Failed to decode audio segment"),console.error(a.t0),r(a.t0);case 10:case"end":return a.stop()}}),_callee7,null,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}());case 3:i=r*a,l=Math.ceil(o.buffer.duration*n),s=o.buffer.getChannelData(0),c=Math.round(s.length/l),d=1/n,u=0,p=Jr()(Array(l).keys()).map((function(e){return s.slice(e*c,(e+1)*c)})).map((function(e,t){var r=Math.max.apply(Math,Jr()(e));return r>u&&(u=r),{startTime:i+t*d,endTime:i+(t+1)*d,max:r}})).sort((function(e,t){return e.startTime<t.startTime?-1:1})),(h=this.audioTracks.find((function(t){return t.trackId===e})))&&(h.entries=[].concat(Jr()(h.entries),[p]),u>h.max&&(h.max=u));case 12:case"end":return v.stop()}}),_callee8,this)})))}}),ot=Gr()(Ye.prototype,"AddAudioTracks",[He],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Object(Xr.h)(Ur.a.mark((function _callee11(){var e,t,r,a=this;return Ur.a.wrap((function _callee11$(n){for(;;)switch(n.prev=n.next){case 0:if(this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),!this.audioLoading){n.next=3;break}return n.abrupt("return");case 3:return this.audioLoading=!0,e=this.rootStore.videoStore.versionHash,t=2,n.next=8,this.AudioTracksFromHLSPlaylist();case 8:return r=n.sent,n.next=11,Promise.all(r.map(function(){var r=Br()(Ur.a.mark((function _callee10(r){var n,o,i,l;return Ur.a.wrap((function _callee10$(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,n=ua.next(),a.audioTracks.push({trackId:n,label:"Audio",trackType:"audio",entries:[],max:0,version:1}),o=r.segments.reduce((function(e,t){return e+t.duration}),0),i=o<300?20:8,s.t0=Uint8Array,s.next=8,fetch(r.initSegmentUrl,{headers:{"Content-type":"audio/mp4"}});case 8:return s.next=10,s.sent.arrayBuffer();case 10:return s.t1=s.sent,l=new s.t0(s.t1),s.next=14,r.segments.limitedMap(t,function(){var t=Br()(Ur.a.mark((function _callee9(t){var r,o;return Ur.a.wrap((function _callee9$(s){for(;;)switch(s.prev=s.next){case 0:if(a.rootStore.videoStore.versionHash===e){s.next=2;break}return s.abrupt("return");case 2:return s.t0=Uint8Array,s.next=5,fetch(t.url);case 5:return s.next=7,s.sent.arrayBuffer();case 7:s.t1=s.sent,r=new s.t0(s.t1),(o=new Int8Array(l.byteLength+r.byteLength)).set(l),o.set(r,l.byteLength),a.AddAudioSegment(n,o.buffer,t.duration,t.number,i);case 13:case"end":return s.stop()}}),_callee9)})));return function(e){return t.apply(this,arguments)}}());case 14:s.next=19;break;case 16:s.prev=16,s.t2=s.catch(0),console.error(s.t2);case 19:case"end":return s.stop()}}),_callee10,null,[[0,16]])})));return function(e){return r.apply(this,arguments)}}()));case 11:case"end":return n.stop()}}),_callee11,this)})))}}),it=Gr()(Ye.prototype,"InitializeTracks",[Ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Object(Xr.h)(Ur.a.mark((function _callee12(){return Ur.a.wrap((function _callee12$(e){for(;;)switch(e.prev=e.next){case 0:return this.AddClipTrack(),e.next=3,this.AddSubtitleTracks();case 3:return e.next=5,this.AddMetadataTracks();case 5:return e.next=7,this.AddSegmentTracks();case 7:return e.next=9,this.rootStore.overlayStore.AddOverlayTracks();case 9:case"end":return e.stop()}}),_callee12,this)})))}}),Gr()(Ye.prototype,"SelectedTrack",[De],Object.getOwnPropertyDescriptor(Ye.prototype,"SelectedTrack"),Ye.prototype),Gr()(Ye.prototype,"SetSelectedTrack",[Ae],Object.getOwnPropertyDescriptor(Ye.prototype,"SetSelectedTrack"),Ye.prototype),Gr()(Ye.prototype,"ClearSelectedTrack",[Le],Object.getOwnPropertyDescriptor(Ye.prototype,"ClearSelectedTrack"),Ye.prototype),Gr()(Ye.prototype,"ToggleTrack",[Ve],Object.getOwnPropertyDescriptor(Ye.prototype,"ToggleTrack"),Ye.prototype),Gr()(Ye.prototype,"ToggleTrackByIndex",[Ue],Object.getOwnPropertyDescriptor(Ye.prototype,"ToggleTrackByIndex"),Ye.prototype),Gr()(Ye.prototype,"SetEditing",[We],Object.getOwnPropertyDescriptor(Ye.prototype,"SetEditing"),Ye.prototype),Gr()(Ye.prototype,"ClearEditing",[Be],Object.getOwnPropertyDescriptor(Ye.prototype,"ClearEditing"),Ye.prototype),Gr()(Ye.prototype,"CreateTrack",[Ke],Object.getOwnPropertyDescriptor(Ye.prototype,"CreateTrack"),Ye.prototype),Gr()(Ye.prototype,"EditTrack",[qe],Object.getOwnPropertyDescriptor(Ye.prototype,"EditTrack"),Ye.prototype),Gr()(Ye.prototype,"ModifyTrack",[$e],Object.getOwnPropertyDescriptor(Ye.prototype,"ModifyTrack"),Ye.prototype),Gr()(Ye.prototype,"RemoveTrack",[Ge],Object.getOwnPropertyDescriptor(Ye.prototype,"RemoveTrack"),Ye.prototype),Gr()(Ye.prototype,"AddEntry",[Xe],Object.getOwnPropertyDescriptor(Ye.prototype,"AddEntry"),Ye.prototype),Ye),xa=r(27),Ca=r.n(xa),Oa=r(15),ja=r.n(Oa),Ma={NTSC:3e4,NTSCFilm:24e3,NTSCHD:6e4,PAL:25,PALHD:50,Film:24,Web:30,High:60},Pa={NTSC:1001,NTSCFilm:1001,NTSCHD:1001,PAL:1,PALHD:1,Film:1,Web:1,High:1},Ia={NTSC:ja()(Ma.NTSC).div(Pa.NTSC),NTSCFilm:ja()(Ma.NTSCFilm).div(Pa.NTSC),NTSCHD:ja()(Ma.NTSCHD).div(Pa.NTSCHD),PAL:ja()(25),PALHD:ja()(50),Film:ja()(24),Web:ja()(30),High:ja()(60)},za=function(){function FrameAccurateVideo(e){var t=e.video,r=e.frameRate,a=e.frameRateRat,n=e.dropFrame,o=void 0!==n&&n,i=e.callback;Cr()(this,FrameAccurateVideo),this.video=t,this.SetFrameRate({rate:r,rateRat:a}),this.callback=i;var l=FrameAccurateVideo.FractionToRateKey("".concat(this.frameRateNumerator,"/").concat(this.frameRateDenominator));this.dropFrame=o&&["NTSC","NTSCFilm","NTSCHD"].includes(l),i&&this.RegisterCallback(),this.Update=this.Update.bind(this)}return jr()(FrameAccurateVideo,[{key:"SetFrameRate",value:function SetFrameRate(e){var t,r,a=e.rate,n=e.rateRat;if(n)n.includes("/")?(t=parseInt(n.split("/")[0]),r=parseInt(n.split("/")[1])):(t=parseInt(n),r=1),a=ja()(t).div(r);else{var o=FrameAccurateVideo.FractionToRateKey(this.frameRate);t=Ma[o],r=Pa[o]}this.frameRate=ja()(a),this.frameRateNumerator=t,this.frameRateDenominator=r}},{key:"FrameToRat",value:function FrameToRat(e){return"".concat(e*this.frameRateDenominator,"/").concat(this.frameRateNumerator)}},{key:"FrameToTime",value:function FrameToTime(e){return ja()(e).div(this.frameRate).valueOf()}},{key:"ProgressToTime",value:function ProgressToTime(e){var t=this.video.duration||0;return ja()(e).mul(t).valueOf()}},{key:"ProgressToSMPTE",value:function ProgressToSMPTE(e){var t=this.video.duration||0;return this.TimeToSMPTE(ja()(e).mul(t))}},{key:"TimeToFrame",value:function TimeToFrame(e){return ja()(e||0).mul(this.frameRate).floor().valueOf()}},{key:"TimeToSMPTE",value:function TimeToSMPTE(e){return this.SMPTE(this.TimeToFrame(e))}},{key:"SMPTEToFrame",value:function SMPTEToFrame(e){var t=e.split(":").reverse(),r=ja()(t[0]),a=ja()(t[1]),n=ja()(t[2]),o=ja()(t[3]||0),i=0;if(this.dropFrame){var l=this.frameRate.equals(Ia.NTSCHD)?ja()(4):ja()(2),s=n.add(o.mul(60)),c=s.div(10).floor();i=s.mul(l).sub(c.mul(l))}return r.add(a.mul(this.frameRate.round())).add(n.mul(this.frameRate.round()).mul(60)).add(o.mul(this.frameRate.round()).mul(60).mul(60)).sub(i).valueOf()}},{key:"SMPTEToTime",value:function SMPTEToTime(e){var t=this.SMPTEToFrame(e);return ja()(t).div(this.frameRate).valueOf()}},{key:"Frame",value:function Frame(){return this.TimeToFrame(this.video.currentTime)}},{key:"Pad",value:function Pad(e){return(e=e.valueOf())<10?"0".concat(e):e}},{key:"SMPTE",value:function SMPTE(e){var t=(e?ja()(e):ja()(this.Frame())).floor(),r=this.frameRate.round();if(this.dropFrame){var a=this.frameRate.equals(Ia.NTSCHD)?ja()(4):ja()(2),n=ja()("17982").mul(a).div(2),o=ja()("1798").mul(a).div(2),i=t.div(n).floor(),l=t.mod(n);l.compare(a)<0&&(l=l.add(a)),t=t.add(a.mul(i).mul("9").add(a.mul(l.sub(a).div(o).floor())))}var s=t.div(r.mul(3600)).mod(24).floor(),c=t.div(r.mul(60)).mod(60).floor(),d=t.div(r).mod(60).floor(),u=t.mod(r).floor(),p=this.dropFrame?";":":";return"".concat(this.Pad(s),":").concat(this.Pad(c),":").concat(this.Pad(d)).concat(p).concat(this.Pad(u))}},{key:"Progress",value:function Progress(){return isNaN(this.video.duration)?ja()(0):ja()(this.video.currentTime).div(this.video.duration)}},{key:"TotalFrames",value:function TotalFrames(){return ja()(this.video.duration||0).mul(this.frameRate).valueOf()}},{key:"SeekForward",value:function SeekForward(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.Frame();this.Seek(t.add(e))}},{key:"SeekBackward",value:function SeekBackward(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=ja()(this.Frame());this.Seek(t.sub(e))}},{key:"SeekPercentage",value:function SeekPercentage(e){this.Seek(ja()(this.TotalFrames()).mul(e))}},{key:"Seek",value:function Seek(e){e=ja()(e).floor().add(.5),this.video.currentTime=e.div(this.frameRate).valueOf().toFixed(3)}},{key:"Update",value:function Update(){this.callback&&this.callback({frame:this.Frame().valueOf(),smpte:this.SMPTE(),progress:this.Progress().valueOf()})}},{key:"RegisterCallback",value:function RegisterCallback(){var e=this;this.Update(),this.video.onseeked=function(t){return e.Update(t)},this.video.onseeking=function(t){return e.Update(t)},this.video.onplay=function(){return e.AddListener()},this.video.onpause=function(){e.Seek(e.Frame()+(e.frameRate.valueOf()>30?2:1)),e.RemoveListener()},this.video.onended=function(){return e.RemoveListener()},this.video.onratechange=function(){e.listener&&(e.RemoveListener(),e.AddListener())}}},{key:"RemoveCallback",value:function RemoveCallback(){this.video.onseeked=void 0,this.video.onseeking=void 0,this.video.onplay=void 0,this.video.onpause=void 0,this.video.onended=void 0,this.video.onratechange=void 0}},{key:"AddListener",value:function AddListener(){var e=this,t=ja()(this.video.playbackRate).mul(this.frameRate).add(ja()("0.00001")),r=Math.min(Math.max(ja()(1e3).div(t).valueOf(),20),100);this.listener=setInterval((function(){e.video.paused||e.video.ended||e.Update()}),r)}},{key:"RemoveListener",value:function RemoveListener(){this.listener&&clearInterval(this.listener),this.Update()}}],[{key:"FractionToRateKey",value:function FractionToRateKey(e){var t=e;switch("string"==typeof e&&(t=e.includes("/")?(t=e.split("/"))[0]/t[1]:parseFloat(e)),t){case 24:return"Film";case 25:return"PAL";case 30:return"Web";case 50:return"PALHD";case 60:return"High";default:if(Math.abs(24-t)<.1)return"NTSCFilm";if(Math.abs(30-t)<.1)return"NTSC";if(Math.abs(60-t)<.1)return"NTSCHD";console.error("Unknown playback rate: ".concat(e))}}},{key:"ParseRat",value:function ParseRat(e){if(e.includes("/")){var t=parseInt(e.split("/")[0]),r=parseInt(e.split("/")[1]);return Number((t/r).toFixed(3))}return parseInt(e)}}]),FrameAccurateVideo}(),Fa=r(36),Ra=r.n(Fa),_a=r(33),Ha=r.n(_a),Na=(lt=Xr.d.bound,st=Xr.d.bound,ct=Xr.d.bound,dt=Xr.d.bound,ut=Xr.d.bound,pt=Xr.d.bound,ht=Xr.d.bound,mt=Xr.d.bound,vt=Xr.d.bound,yt=Xr.d.bound,bt=Xr.d.bound,ft=Xr.d.bound,kt=Xr.d.bound,gt=Xr.d.bound,Tt=Xr.d.bound,St=Xr.d.bound,wt=Xr.d.bound,Et=Xr.d.bound,xt=Xr.d.bound,Ct=Xr.d.bound,Ot=Xr.d.bound,jt=Xr.d.bound,Mt=Xr.d.bound,Pt=Xr.d.bound,It=Xr.d.bound,zt=Xr.d.bound,Ft=Xr.d.bound,Rt=Xr.d.bound,_t=Xr.d.bound,Ht=Xr.d.bound,Nt=function(){function VideoStore(e){Cr()(this,VideoStore),qr()(this,"videoKey",Dt,this),qr()(this,"clipStartTime",At,this),qr()(this,"clipEndTime",Lt,this),qr()(this,"versionHash",Vt,this),qr()(this,"metadata",Ut,this),qr()(this,"tags",Wt,this),qr()(this,"name",Bt,this),qr()(this,"videoTags",Kt,this),qr()(this,"loading",qt,this),qr()(this,"initialized",$t,this),qr()(this,"isVideo",Gt,this),qr()(this,"consecutiveSegmentErrors",Xt,this),qr()(this,"levels",Yt,this),qr()(this,"currentLevel",Jt,this),qr()(this,"source",Zt,this),qr()(this,"poster",Qt,this),qr()(this,"baseVideoFrameUrl",er,this),qr()(this,"previewSupported",tr,this),qr()(this,"dropFrame",rr,this),qr()(this,"frameRateKey",ar,this),qr()(this,"frameRate",nr,this),qr()(this,"frameRateRat",or,this),qr()(this,"frameRateSpecified",ir,this),qr()(this,"currentTime",lr,this),qr()(this,"frame",sr,this),qr()(this,"smpte",cr,this),qr()(this,"duration",dr,this),qr()(this,"playing",ur,this),qr()(this,"playbackRate",pr,this),qr()(this,"fullScreen",hr,this),qr()(this,"volume",mr,this),qr()(this,"muted",vr,this),qr()(this,"seek",yr,this),qr()(this,"scale",br,this),qr()(this,"scaleMin",fr,this),qr()(this,"scaleMax",kr,this),qr()(this,"segmentEnd",gr,this),qr()(this,"sliderMarks",Tr,this),qr()(this,"SetVideo",Sr,this),this.ReloadMetadata=Object(Xr.h)(Ur.a.mark((function _callee(){var e;return Ur.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return e=this.rootStore.menuStore.selectedObject.versionHash,t.next=3,this.rootStore.client.ContentObjectMetadata({versionHash:e,select:["public","offerings","video_tags"]});case 3:this.metadata=t.sent;case 4:case"end":return t.stop()}}),_callee,this)}))),this.rootStore=e}return jr()(VideoStore,[{key:"scaleMinTime",get:function get(){return this.ProgressToTime(this.scaleMin)}},{key:"scaleMaxTime",get:function get(){return this.ProgressToTime(this.scaleMax)}},{key:"scaleMinSMPTE",get:function get(){return this.ProgressToSMPTE(this.scaleMin,this.dropFrame)}},{key:"scaleMaxSMPTE",get:function get(){return this.ProgressToSMPTE(this.scaleMax,this.dropFrame)}}]),jr()(VideoStore,[{key:"Reset",value:function Reset(){this.loading=!0,this.initialized=!1,this.isVideo=!1,this.video=void 0,this.player=void 0,this.levels=[],this.currentLevel=void 0,this.videoHandler&&(this.videoHandler.RemoveCallback(),this.videoHandler=void 0),this.clipStartTime=0,this.clipEndTime=void 0,this.versionHash="",this.metadata={},this.tags={},this.name="",this.videoTags=[],this.source=void 0,this.poster=void 0,this.baseVideoFrameUrl=void 0,this.previewSupported=!1,this.dropFrame=!1,this.frameRateKey="NTSC",this.frameRate=Ia.NTSC,this.frameRateRat="".concat(Ma.NTSC,"/").concat(Pa.NTSC),this.frameRateSpecified=!1,this.currentTime=0,this.frame=0,this.smpte="00:00:00:00",this.playing=!1,this.playbackRate=1,this.fullScreen=!1,this.volume=100,this.muted=!1,this.seek=0,this.scale=1e4,this.scaleMin=0,this.scaleMax=this.scale,this.segmentEnd=void 0,this.consecutiveSegmentErrors=0,this.rootStore.entryStore.ClearEntries()}},{key:"Initialize",value:function Initialize(e,t){var r=this;this.initialized=!1,this.video=e,this.player=t;var a=new za({video:e,frameRate:this.frameRate,frameRateRat:this.frameRateRat,dropFrame:this.dropFrame,callback:this.Update});this.videoHandler=a,e.load(),e.parentElement.parentElement.onfullscreenchange=Object(Xr.d)((function(){return r.fullScreen=!r.fullScreen})),this.volume=e.volume,this.muted=e.muted,this.player.on(Ha.a.Events.LEVEL_SWITCHED,Object(Xr.d)((function(){r.levels=r.player.levels,r.currentLevel=r.player.currentLevel}))),this.player.on(Ha.a.Events.ERROR,Object(Xr.d)((function(e,t){(t.fatal||"networkError"===t.type&&parseInt(t.response.code)>=500)&&(r.consecutiveSegmentErrors+=1,console.error("HLS playback error:"),console.error(t),r.consecutiveSegmentErrors>=3&&(r.rootStore.menuStore.SetErrorMessage("Playback Error"),r.Reset()))}))),this.player.on(Ha.a.Events.FRAG_LOADED,Object(Xr.d)((function(){r.consecutiveSegmentErrors=0}))),this.video.addEventListener("pause",Object(Xr.d)((function(){return r.playing=!1}))),this.video.addEventListener("play",Object(Xr.d)((function(){return r.playing=!0}))),this.video.addEventListener("ratechange",Object(Xr.d)((function(){return r.playbackRate=r.video.playbackRate}))),this.video.addEventListener("volumechange",Object(Xr.d)((function(){r.volume=e.volume*r.scale,r.muted=e.muted}))),this.video.addEventListener("click",Object(Xr.d)((function(){r.click?(clearTimeout(r.click),r.click=void 0,r.ToggleFullscreen()):r.click=setTimeout((function(){r.video.paused?r.video.play():r.video.pause(),r.click=void 0}),200)})));var n=this.source;this.video.addEventListener("durationchange",Object(Xr.d)((function(){r.initialized||r.source!==n||r.video.duration>0&&isFinite(r.video.duration)&&(a.Update(),r.initialized=!0,r.clipEndTime||(r.clipEndTime=Number(r.video.duration.toFixed(3))),r.rootStore.trackStore.InitializeTracks())}))),this.video.addEventListener("error",Object(Xr.d)((function(){console.error("Video error: "),console.error(e.error),r.videoKey=r.videoKey+1})))}},{key:"ToggleTrack",value:function ToggleTrack(e){var t=Array.from(this.video.textTracks).find((function(t){return t.label===e}));if(t)return"showing"===t.mode?(t.mode="disabled",!1):(t.mode="showing",!0)}},{key:"ProgressToTime",value:function ProgressToTime(e){return this.videoHandler?this.videoHandler.ProgressToTime(e/this.scale):0}},{key:"ProgressToSMPTE",value:function ProgressToSMPTE(e){if(this.videoHandler)return this.videoHandler.ProgressToSMPTE(e/this.scale)}},{key:"TimeToSMPTE",value:function TimeToSMPTE(e){if(this.videoHandler)return this.videoHandler.TimeToSMPTE(e)}},{key:"TimeToFrame",value:function TimeToFrame(e){return this.videoHandler?this.videoHandler.TimeToFrame(e):0}},{key:"FrameToTime",value:function FrameToTime(e){return this.videoHandler?Number((this.videoHandler.FrameToTime(e)+51e-5).toFixed(3)):0}},{key:"Update",value:function Update(e){var t=e.frame,r=e.smpte,a=e.progress;if(this.video){if(this.frame=Math.floor(t),this.smpte=r,this.seek=a*this.scale,this.duration=this.video.duration,this.currentTime=this.video.currentTime,this.seek<this.scaleMin&&(this.scaleMin=this.seek),this.playing&&this.seek>this.scaleMax){var n=this.scaleMax-this.scaleMin;this.scaleMax=Math.min(this.scale,this.scaleMax+n/2),this.scaleMin=this.scaleMax-n}this.segmentEnd&&this.frame>=this.segmentEnd-3&&(this.video.pause(),this.Seek(this.segmentEnd-1),this.segmentEnd=void 0)}}},{key:"PlayPause",value:function PlayPause(){this.video.paused?this.video.play():this.video.pause()}},{key:"SetPlaybackLevel",value:function SetPlaybackLevel(e){this.player.levelController.manualLevel=e,this.player.streamController.immediateLevelSwitch()}},{key:"SetPlaybackRate",value:function SetPlaybackRate(e){this.video.playbackRate=e}},{key:"ChangePlaybackRate",value:function ChangePlaybackRate(e){this.video.playbackRate=Math.min(4,Math.max(.1,this.video.playbackRate+e))}},{key:"SetFrameRate",value:function SetFrameRate(e){var t=e.rateRat,r=e.rateKey;(t||r)&&(t?(this.frameRate=za.ParseRat(t),this.frameRateKey=za.FractionToRateKey(t),this.frameRateRat=t):(this.frameRateKey=r,this.frameRate=Ia[r],this.frameRateRat="".concat(Ma[r],"/").concat(Pa[r])),this.videoHandler&&(this.videoHandler.SetFrameRate({rateRat:this.frameRateRat}),this.videoHandler.Update()))}},{key:"SetDropFrame",value:function SetDropFrame(e){this.dropFrame=e,this.videoHandler.dropFrame=this.dropFrame,this.videoHandler.Update()}},{key:"ScrollScale",value:function ScrollScale(e,t){if(this.video&&this.video.duration){var r,a,n=e,o=1-e;r=(t*=-.003*this.scale)*n,a=t*o,this.SetScale(Math.max(0,this.scaleMin+r),this.seek,Math.min(this.scale,this.scaleMax-a))}}},{key:"SetScale",value:function SetScale(e,t,r){var a=.015*this.scale;r-e<a||(e>=t?e===this.scaleMin?e=Math.max(0,e-a):t+=a:t>=r&&(r===this.scaleMax?r=Math.min(this.scale,r+a):t-=a),this.scaleMin=e,this.scaleMax=r,this.SeekPercentage(t/this.scale,!1))}},{key:"PlaySegment",value:function PlaySegment(e,t){this.Seek(e),this.segmentEnd=t,this.video.play()}},{key:"Seek",value:function Seek(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&(this.segmentEnd=void 0),this.videoHandler.Seek(e)}},{key:"SeekPercentage",value:function SeekPercentage(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&(this.segmentEnd=void 0),this.videoHandler.SeekPercentage(e)}},{key:"SeekFrames",value:function SeekFrames(e){var t=e.frames,r=void 0===t?0:t,a=e.seconds,n=void 0===a?0:a;this.playing&&this.PlayPause(),n&&(r+=Math.ceil(this.frameRate)*n);var o=this.frame+r,i=o/this.videoHandler.TotalFrames()*this.scale,l=.015*this.scale,s=this.scaleMax-this.scaleMin;i<=this.scaleMin?(this.scaleMin=Math.max(0,i-l),this.scaleMax=this.scaleMin+s):i>=this.scaleMax&&(this.scaleMax=Math.min(this.scale,i+l),this.scaleMin=this.scaleMax-s),this.videoHandler.Seek(o)}},{key:"ScrollVolume",value:function ScrollVolume(e){var t=this.muted?0:this.volume;this.SetVolume(Math.max(0,Math.min(this.scale,t-e*this.scale*.01)))}},{key:"SetVolume",value:function SetVolume(e){this.video.volume=e/this.scale,0===e?this.video.muted=!0:this.video.muted&&0!==e&&(this.video.muted=!1)}},{key:"ChangeVolume",value:function ChangeVolume(e){this.video.volume=Math.max(0,Math.min(1,this.video.volume+e/this.scale)),0===this.video.volume?this.video.muted=!0:this.video.muted&&0!==this.video.volume&&(this.video.muted=!1)}},{key:"SetMuted",value:function SetMuted(e){this.video.muted=e,0===this.video.volume&&(this.video.volume=.5)}},{key:"ToggleMuted",value:function ToggleMuted(){this.video.muted=!this.video.muted,0===this.video.volume&&(this.video.volume=.5)}},{key:"ToggleFullscreen",value:function ToggleFullscreen(){if(this.fullScreen)document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();else{var e=this.video.parentElement.parentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}}},{key:"VideoFrame",value:function VideoFrame(e){return Ra()(this.baseVideoFrameUrl).addSearch("frame",e).toString()}},{key:"SetMarks",value:function SetMarks(){var e=Math.max(document.documentElement.clientWidth,window.innerWidth||0);this.sliderMarks=Math.floor(e/175)}},{key:"SaveFrame",value:function SaveFrame(){var e=this;if(this.video){var t=document.createElement("canvas");t.width=this.video.videoWidth,t.height=this.video.videoHeight,t.getContext("2d").drawImage(this.video,0,0,this.video.videoWidth,this.video.videoHeight),t.toBlob((function(t){var r=window.URL.createObjectURL(t),a="".concat(e.name,"_").concat(e.smpte.replace(":","-"),".png");na(r,a)}))}}}]),VideoStore}(),Dt=Gr()(Nt.prototype,"videoKey",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),At=Gr()(Nt.prototype,"clipStartTime",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),Lt=Gr()(Nt.prototype,"clipEndTime",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vt=Gr()(Nt.prototype,"versionHash",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return""}}),Ut=Gr()(Nt.prototype,"metadata",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return{}}}),Wt=Gr()(Nt.prototype,"tags",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return{}}}),Bt=Gr()(Nt.prototype,"name",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kt=Gr()(Nt.prototype,"videoTags",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),qt=Gr()(Nt.prototype,"loading",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),$t=Gr()(Nt.prototype,"initialized",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),Gt=Gr()(Nt.prototype,"isVideo",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),Xt=Gr()(Nt.prototype,"consecutiveSegmentErrors",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),Yt=Gr()(Nt.prototype,"levels",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),Jt=Gr()(Nt.prototype,"currentLevel",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zt=Gr()(Nt.prototype,"source",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qt=Gr()(Nt.prototype,"poster",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),er=Gr()(Nt.prototype,"baseVideoFrameUrl",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){}}),tr=Gr()(Nt.prototype,"previewSupported",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),rr=Gr()(Nt.prototype,"dropFrame",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),ar=Gr()(Nt.prototype,"frameRateKey",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"NTSC"}}),nr=Gr()(Nt.prototype,"frameRate",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Ia.NTSC}}),or=Gr()(Nt.prototype,"frameRateRat",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"".concat(Ma.NTSC,"/").concat(Pa.NTSC)}}),ir=Gr()(Nt.prototype,"frameRateSpecified",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),lr=Gr()(Nt.prototype,"currentTime",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),sr=Gr()(Nt.prototype,"frame",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),cr=Gr()(Nt.prototype,"smpte",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"00:00:00:00"}}),dr=Gr()(Nt.prototype,"duration",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ur=Gr()(Nt.prototype,"playing",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),pr=Gr()(Nt.prototype,"playbackRate",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 1}}),hr=Gr()(Nt.prototype,"fullScreen",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),mr=Gr()(Nt.prototype,"volume",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 100}}),vr=Gr()(Nt.prototype,"muted",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),yr=Gr()(Nt.prototype,"seek",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),br=Gr()(Nt.prototype,"scale",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 1e4}}),fr=Gr()(Nt.prototype,"scaleMin",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),kr=Gr()(Nt.prototype,"scaleMax",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return this.scale}}),gr=Gr()(Nt.prototype,"segmentEnd",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){}}),Tr=Gr()(Nt.prototype,"sliderMarks",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 10}}),Gr()(Nt.prototype,"scaleMinTime",[Xr.e],Object.getOwnPropertyDescriptor(Nt.prototype,"scaleMinTime"),Nt.prototype),Gr()(Nt.prototype,"scaleMaxTime",[Xr.e],Object.getOwnPropertyDescriptor(Nt.prototype,"scaleMaxTime"),Nt.prototype),Gr()(Nt.prototype,"scaleMinSMPTE",[Xr.e],Object.getOwnPropertyDescriptor(Nt.prototype,"scaleMinSMPTE"),Nt.prototype),Gr()(Nt.prototype,"scaleMaxSMPTE",[Xr.e],Object.getOwnPropertyDescriptor(Nt.prototype,"scaleMaxSMPTE"),Nt.prototype),Gr()(Nt.prototype,"Reset",[lt],Object.getOwnPropertyDescriptor(Nt.prototype,"Reset"),Nt.prototype),Sr=Gr()(Nt.prototype,"SetVideo",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Object(Xr.h)(Ur.a.mark((function _callee2(e){var t,r,a,n,o,i,l,s,c,d;return Ur.a.wrap((function _callee2$(u){for(;;)switch(u.prev=u.next){case 0:return this.loading=!0,u.prev=1,this.name=e.name,this.versionHash=e.versionHash,this.metadata=e.metadata,u.next=7,this.rootStore.client.FileUrl({versionHash:this.versionHash,filePath:"/"});case 7:if(this.baseFileUrl=u.sent,this.isVideo=e.isVideo,this.isVideo){u.next=13;break}this.initialized=!0,u.next=45;break;case 13:return u.next=15,this.rootStore.client.PlayoutOptions({versionHash:e.versionHash,protocols:["hls"],drms:["clear","aes-128"],hlsjsProfile:!1});case 15:if(t=u.sent,r=t.hls.playoutMethods,a=Ra()((r.clear||r["aes-128"]).playoutUrl).addSearch("ignore_trimming",!0).addSearch("player_profile","hls-js-2441").toString(),!e.metadata.image&&!e.metadata.public.image){u.next=22;break}return u.next=21,this.rootStore.client.Rep({versionHash:e.versionHash,rep:"player_background",channelAuth:!0});case 21:n=u.sent;case 22:return u.next=24,this.rootStore.client.Rep({versionHash:e.versionHash,rep:Lr()("playout","default","frames.png")});case 24:return this.baseVideoFrameUrl=u.sent,u.prev=25,u.next=28,fetch(Ra()(this.baseVideoFrameUrl).addSearch("frame",0).toString());case 28:u.sent.ok?this.previewSupported=!0:console.error("Preview not supported for this content"),u.next=35;break;case 32:u.prev=32,u.t0=u.catch(25),console.error("Preview not supported for this content");case 35:this.source=a,this.poster=n;try{this.clipStartTime=0,o=this.metadata.offerings.default,(i=o.media_struct.streams||{}).video?l=i.video.rate:(s=Object.keys(i).find((function(e){return e.startsWith("video")})),l=i[s].rate),this.frameRateSpecified=!0,this.SetFrameRate({rateRat:l}),o.entry_point_rat&&(this.clipStartTime=za.ParseRat(o.entry_point_rat)),o.exit_point_rat&&(c=Ia[this.frameRateKey].valueOf(),this.clipEndTime=Number((za.ParseRat(o.exit_point_rat)-1/c).toFixed(3)))}catch(e){console.error("Unable to determine frame rate")}if(!this.metadata.video_tags||!this.metadata.video_tags.metadata_tags){u.next=45;break}return u.next=41,this.rootStore.client.LinkData({versionHash:this.versionHash,linkPath:"video_tags/metadata_tags",format:"json"});case 41:this.tags=u.sent,d=this.tags.video_level_tags||[],"object"===Ca()(d)&&(d=Object.keys(d)),this.videoTags=d;case 45:u.next=51;break;case 47:u.prev=47,u.t1=u.catch(1),console.error("Failed to load:"),console.log(u.t1);case 51:return u.prev=51,this.loading=!1,u.finish(51);case 54:case"end":return u.stop()}}),_callee2,this,[[1,47,51,54],[25,32]])})))}}),Gr()(Nt.prototype,"Initialize",[ct],Object.getOwnPropertyDescriptor(Nt.prototype,"Initialize"),Nt.prototype),Gr()(Nt.prototype,"ProgressToTime",[dt],Object.getOwnPropertyDescriptor(Nt.prototype,"ProgressToTime"),Nt.prototype),Gr()(Nt.prototype,"ProgressToSMPTE",[ut],Object.getOwnPropertyDescriptor(Nt.prototype,"ProgressToSMPTE"),Nt.prototype),Gr()(Nt.prototype,"TimeToSMPTE",[pt],Object.getOwnPropertyDescriptor(Nt.prototype,"TimeToSMPTE"),Nt.prototype),Gr()(Nt.prototype,"TimeToFrame",[ht],Object.getOwnPropertyDescriptor(Nt.prototype,"TimeToFrame"),Nt.prototype),Gr()(Nt.prototype,"FrameToTime",[mt],Object.getOwnPropertyDescriptor(Nt.prototype,"FrameToTime"),Nt.prototype),Gr()(Nt.prototype,"Update",[vt],Object.getOwnPropertyDescriptor(Nt.prototype,"Update"),Nt.prototype),Gr()(Nt.prototype,"PlayPause",[yt],Object.getOwnPropertyDescriptor(Nt.prototype,"PlayPause"),Nt.prototype),Gr()(Nt.prototype,"SetPlaybackLevel",[bt],Object.getOwnPropertyDescriptor(Nt.prototype,"SetPlaybackLevel"),Nt.prototype),Gr()(Nt.prototype,"SetPlaybackRate",[ft],Object.getOwnPropertyDescriptor(Nt.prototype,"SetPlaybackRate"),Nt.prototype),Gr()(Nt.prototype,"ChangePlaybackRate",[kt],Object.getOwnPropertyDescriptor(Nt.prototype,"ChangePlaybackRate"),Nt.prototype),Gr()(Nt.prototype,"SetFrameRate",[gt],Object.getOwnPropertyDescriptor(Nt.prototype,"SetFrameRate"),Nt.prototype),Gr()(Nt.prototype,"SetDropFrame",[Tt],Object.getOwnPropertyDescriptor(Nt.prototype,"SetDropFrame"),Nt.prototype),Gr()(Nt.prototype,"ScrollScale",[St],Object.getOwnPropertyDescriptor(Nt.prototype,"ScrollScale"),Nt.prototype),Gr()(Nt.prototype,"SetScale",[wt],Object.getOwnPropertyDescriptor(Nt.prototype,"SetScale"),Nt.prototype),Gr()(Nt.prototype,"PlaySegment",[Et],Object.getOwnPropertyDescriptor(Nt.prototype,"PlaySegment"),Nt.prototype),Gr()(Nt.prototype,"Seek",[xt],Object.getOwnPropertyDescriptor(Nt.prototype,"Seek"),Nt.prototype),Gr()(Nt.prototype,"SeekPercentage",[Ct],Object.getOwnPropertyDescriptor(Nt.prototype,"SeekPercentage"),Nt.prototype),Gr()(Nt.prototype,"SeekFrames",[Ot],Object.getOwnPropertyDescriptor(Nt.prototype,"SeekFrames"),Nt.prototype),Gr()(Nt.prototype,"ScrollVolume",[jt],Object.getOwnPropertyDescriptor(Nt.prototype,"ScrollVolume"),Nt.prototype),Gr()(Nt.prototype,"SetVolume",[Mt],Object.getOwnPropertyDescriptor(Nt.prototype,"SetVolume"),Nt.prototype),Gr()(Nt.prototype,"ChangeVolume",[Pt],Object.getOwnPropertyDescriptor(Nt.prototype,"ChangeVolume"),Nt.prototype),Gr()(Nt.prototype,"SetMuted",[It],Object.getOwnPropertyDescriptor(Nt.prototype,"SetMuted"),Nt.prototype),Gr()(Nt.prototype,"ToggleMuted",[zt],Object.getOwnPropertyDescriptor(Nt.prototype,"ToggleMuted"),Nt.prototype),Gr()(Nt.prototype,"ToggleFullscreen",[Ft],Object.getOwnPropertyDescriptor(Nt.prototype,"ToggleFullscreen"),Nt.prototype),Gr()(Nt.prototype,"VideoFrame",[Rt],Object.getOwnPropertyDescriptor(Nt.prototype,"VideoFrame"),Nt.prototype),Gr()(Nt.prototype,"SetMarks",[_t],Object.getOwnPropertyDescriptor(Nt.prototype,"SetMarks"),Nt.prototype),Gr()(Nt.prototype,"SaveFrame",[Ht],Object.getOwnPropertyDescriptor(Nt.prototype,"SaveFrame"),Nt.prototype),Nt),Da=r(74);Object(Xr.f)({enforceActions:"always"});var Aa,La,Va,Ua,Wa,Ba=new(wr=function(){function RootStore(){Cr()(this,RootStore),qr()(this,"client",Er,this),this.editStore=new sa(this),this.entryStore=new pa(this),this.keyboardControlStore=new ha(this),this.menuStore=new ma(this),this.overlayStore=new va(this),this.trackStore=new Ea(this),this.videoStore=new Na(this),this.InitializeClient()}var e;return jr()(RootStore,[{key:"Reset",value:function Reset(){[this.videoStore,this.entryStore,this.overlayStore,this.trackStore,this.editStore].forEach((function(e){return e.Reset()}))}},{key:"InitializeClient",value:(e=Br()(Ur.a.mark((function _callee(){var e,t,r,a,n,o,i,l,s=this;return Ur.a.wrap((function _callee$(c){for(;;)switch(c.prev=c.next){case 0:if((e=new Da.FrameClient({target:window.parent,timeout:30})).SendMessage({options:{operation:"HideHeader"},noResponse:!0}),Object(Xr.o)((function(){return s.client=e})),!((t=window.location.hash.replace(/^\/*#?\/*/,"").split("/")).length>=1&&t[0].startsWith("hq__"))){c.next=16;break}return r=t[0],c.next=8,e.ContentObjectLibraryId({versionHash:r});case 8:a=c.sent,n=e.utils.DecodeVersionHash(r),o=n.objectId,this.menuStore.SetLibraryId(a),this.menuStore.SetObjectId(o),this.menuStore.SelectVideo({libraryId:a,objectId:o,versionHash:r}),this.menuStore.ToggleMenu(!1),c.next=17;break;case 16:t.length>=2&&t[0].startsWith("ilib")&&t[1].startsWith("iq__")&&(i=t[0],l=t[1],this.menuStore.SetLibraryId(i),this.menuStore.SetObjectId(l),this.menuStore.SelectVideo({libraryId:i,objectId:l}),this.menuStore.ToggleMenu(!1));case 17:case"end":return c.stop()}}),_callee,this)}))),function InitializeClient(){return e.apply(this,arguments)})}]),RootStore}(),Er=Gr()(wr.prototype,"client",[Xr.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gr()(wr.prototype,"InitializeClient",[Xr.d],Object.getOwnPropertyDescriptor(wr.prototype,"InitializeClient"),wr.prototype),wr),Ka=Ba,qa=Ba.editStore,$a=Ba.entryStore,Ga=Ba.keyboardControlStore,Xa=Ba.menuStore,Ya=Ba.overlayStore,Ja=Ba.trackStore,Za=Ba.videoStore,Qa=r(10),en=r(83),tn=r.n(en),rn=r(9),an=r.n(rn),nn=r(26),on=r(84),ln=r.n(on),sn=r(85),cn=r.n(sn),dn={" ":"Space",ArrowLeft:"←",ArrowUp:"↑",ArrowRight:"→",ArrowDown:"↓"},un=Object(Dr.b)("keyboardControls")(Aa=Object(Dr.c)(Aa=function(e){function KeyboardControlsModal(){return Cr()(this,KeyboardControlsModal),Pr()(this,zr()(KeyboardControlsModal).apply(this,arguments))}return Rr()(KeyboardControlsModal,e),jr()(KeyboardControlsModal,[{key:"FormatControls",value:function FormatControls(e,t){return e.map((function(e){return e=dn[e]||(1===e.length?e.toUpperCase():e),t&&(e="".concat(t," + ").concat(e)),e}))}},{key:"Control",value:function Control(e,t,r){var a=(e=this.FormatControls(e,r)).map((function(t,r){return Hr.a.createElement(Hr.a.Fragment,{key:"keyboard-control-label-".concat(t)},Hr.a.createElement("label",{className:"control-label"},t),r<e.length-1?Hr.a.createElement("label",{className:"control-label"}," | "):null)}));return Hr.a.createElement("div",{key:"keyboard-control-".concat(e),className:"control-group"},Hr.a.createElement("div",{className:"control-labels"},a),Hr.a.createElement("div",{className:"control-description"},t.description))}},{key:"ControlGroup",value:function ControlGroup(e,t){t.keyLabel&&(e=[t.keyLabel]);var r=[];return t.action&&r.push(this.Control(e,t.action)),t.shiftAction&&r.push(this.Control(e,t.shiftAction,"Shift")),t.altAction&&r.push(this.Control(e,t.altAction,"Alt")),t.controlAction&&r.push(this.Control(e,t.controlAction,"Ctrl")),r}},{key:"ControlSection",value:function ControlSection(e,t){var r=this,a=t.map((function(e){return r.ControlGroup(e[0],e[1])}));return Hr.a.createElement("div",{key:"keyboard-controls-".concat(e),className:"control-section"},Hr.a.createElement("h3",null,e),a)}},{key:"render",value:function render(){var e=this,t=Object.keys(this.props.keyboardControls.controls).map((function(t){return e.ControlSection(t,e.props.keyboardControls.controls[t])}));return Hr.a.createElement("div",{className:"keyboard-control-info"},Hr.a.createElement(Qa.g,{icon:ln.a,onClick:this.props.CloseModal,label:"Close Keyboard Controls",className:"close-button"}),t)}}]),KeyboardControlsModal}(Hr.a.Component))||Aa)||Aa,pn=function(e){function KeyboardControls(e){var t;return Cr()(this,KeyboardControls),(t=Pr()(this,zr()(KeyboardControls).call(this,e))).state={modal:null,uploading:!1},t.CloseModal=t.CloseModal.bind(an()(t)),t.ActivateModal=t.ActivateModal.bind(an()(t)),t}return Rr()(KeyboardControls,e),jr()(KeyboardControls,[{key:"ActivateModal",value:function ActivateModal(){this.setState({modal:Hr.a.createElement(Qa.i,{closable:!0,OnClickOutside:this.CloseModal,className:"keyboard-controls-modal"},Hr.a.createElement(un,{CloseModal:this.CloseModal}))})}},{key:"CloseModal",value:function CloseModal(){this.setState({modal:null})}},{key:"render",value:function render(){return Hr.a.createElement(Hr.a.Fragment,null,Hr.a.createElement(nn.a,{content:Hr.a.createElement("span",null,"Show Keyboard Controls")},Hr.a.createElement(Qa.g,{onClick:this.ActivateModal,icon:cn.a,className:"header-icon keyboard-controls-icon"})),this.state.modal)}}]),KeyboardControls}(Hr.a.Component),hn=r(86),mn=r.n(hn),vn=r(25),yn=Object(Dr.b)("edit")(La=Object(Dr.c)(La=function(e){function Save(){return Cr()(this,Save),Pr()(this,zr()(Save).apply(this,arguments))}return Rr()(Save,e),jr()(Save,[{key:"render",value:function render(){return Hr.a.createElement(vn.a,{loading:this.props.edit.saving,loadingClassname:"header-icon save-icon-loading"},Hr.a.createElement(Qa.m,{content:Hr.a.createElement("span",null,"Save")},Hr.a.createElement(Qa.g,{onClick:this.props.edit.Save,icon:mn.a,className:"header-icon save-icon ".concat(this.props.edit.saveFailed?"save-failed":"")})))}}]),Save}(Hr.a.Component))||La)||La,bn=r(87),fn=r.n(bn),kn=Object(Dr.b)("video")(Va=Object(Dr.c)(Va=function(e){function UploadModal(e){var t;return Cr()(this,UploadModal),(t=Pr()(this,zr()(UploadModal).call(this,e))).state={metadataRemote:!1,overlayRemote:!1,metadataFile:void 0,metadataFileRemote:void 0,overlayFiles:[],overlayFilesRemote:[]},t}return Rr()(UploadModal,e),jr()(UploadModal,[{key:"MetadataTags",value:function MetadataTags(){var e,t=this;return e=this.state.metadataRemote?Hr.a.createElement(Qa.c,{key:"metadata-browse-remote",remote:!0,header:"Select Metadata Tag File",fileMetadata:this.props.video.metadata.files||{},mimeTypes:this.props.video.metadata.mime_types||{},baseFileUrl:this.props.video.baseFileUrl,extensions:["json"],multiple:!1,onChange:function onChange(e){return t.setState({metadataFileRemote:e[0]})}}):Hr.a.createElement(Qa.c,{key:"metadata-browse-local",name:"Metadata Tags File",multiple:!1,directories:!1,required:!1,accept:["application/json"],onChange:function onChange(e){return t.setState({metadataFile:e.target.files[0]})}}),Hr.a.createElement("div",{className:"upload-section"},Hr.a.createElement("h3",null,"Metadata Tags"),Hr.a.createElement("div",{className:"labelled-field"},Hr.a.createElement("label",null,"Source"),Hr.a.createElement(Qa.l,{onChange:function onChange(){return t.setState({metadataRemote:!t.state.metadataRemote,metadataFile:void 0,metadataFileRemote:void 0})},selected:this.state.metadataRemote,options:[["Local",!1],["Remote",!0]],className:"secondary"})),Hr.a.createElement("div",{className:"labelled-field"},Hr.a.createElement("label",null,"File"),e))}},{key:"OverlayTags",value:function OverlayTags(){var e,t=this;return e=this.state.overlayRemote?Hr.a.createElement(Qa.c,{key:"overlay-browse-remote",remote:!0,header:"Select Overlay Tags File(s)",fileMetadata:this.props.video.metadata.files||{},mimeTypes:this.props.video.metadata.mime_types||{},baseFileUrl:this.props.video.baseFileUrl,extensions:["json"],multiple:!0,onChange:function onChange(e){return t.setState({overlayFilesRemote:e})}}):Hr.a.createElement(Qa.c,{key:"overlay-browse-local",name:"Overlay Tags File(s)",multiple:!0,directories:!1,required:!1,accept:["application/json"],onChange:function onChange(e){return t.setState({overlayFiles:e.target.files})}}),Hr.a.createElement("div",{className:"upload-section"},Hr.a.createElement("h3",null,"Overlay Tags"),Hr.a.createElement("div",{className:"labelled-field"},Hr.a.createElement("label",null,"Source"),Hr.a.createElement(Qa.l,{onChange:function onChange(){return t.setState({overlayRemote:!t.state.overlayRemote,overlayFiles:[],overlayFilesRemote:[]})},selected:this.state.overlayRemote,options:[["Local",!1],["Remote",!0]],className:"secondary"})),Hr.a.createElement("div",{className:"labelled-field"},Hr.a.createElement("label",null,"Files"),e))}},{key:"render",value:function render(){var e=this;return Hr.a.createElement(Qa.f,{legend:"Upload Metadata Tags",OnSubmit:function OnSubmit(){return e.props.onSubmit({metadataFile:e.state.metadataFile,overlayFiles:e.state.overlayFiles,metadataFileRemote:e.state.metadataFileRemote,overlayFilesRemote:e.state.overlayFilesRemote})},OnCancel:this.props.onCancel},this.MetadataTags(),this.OverlayTags())}}]),UploadModal}(Hr.a.Component))||Va)||Va,gn=Object(Dr.b)("edit")(Ua=Object(Dr.c)(Ua=function(e){function Upload(e){var t;return Cr()(this,Upload),(t=Pr()(this,zr()(Upload).call(this,e))).state={modal:null,uploading:!1},t.Upload=t.Upload.bind(an()(t)),t.CloseModal=t.CloseModal.bind(an()(t)),t.ActivateModal=t.ActivateModal.bind(an()(t)),t}var t;return Rr()(Upload,e),jr()(Upload,[{key:"Upload",value:(t=Br()(Ur.a.mark((function _callee(e){var t,r,a,n;return Ur.a.wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return t=e.metadataFile,r=e.metadataFileRemote,a=e.overlayFiles,n=e.overlayFilesRemote,this.setState({uploading:!0}),o.prev=2,o.next=5,this.props.edit.UploadMetadataTags({metadataFile:t,metadataFileRemote:r,overlayFiles:a,overlayFilesRemote:n});case 5:this.CloseModal(),o.next=12;break;case 8:throw o.prev=8,o.t0=o.catch(2),this.setState({uploading:!1}),o.t0;case 12:this.setState({uploading:!1});case 13:case"end":return o.stop()}}),_callee,this,[[2,8]])}))),function Upload(e){return t.apply(this,arguments)})},{key:"ActivateModal",value:function ActivateModal(){this.setState({modal:Hr.a.createElement(Qa.i,{className:"upload-modal"},Hr.a.createElement(kn,{onSubmit:this.Upload,onCancel:this.CloseModal}))})}},{key:"CloseModal",value:function CloseModal(){this.setState({modal:null})}},{key:"render",value:function render(){return Hr.a.createElement(Hr.a.Fragment,null,Hr.a.createElement(Qa.m,{content:Hr.a.createElement("span",null,"Upload tags")},Hr.a.createElement(Qa.g,{onClick:this.ActivateModal,icon:fn.a,className:"header-icon upload-icon ".concat(this.props.edit.uploadFailed?"upload-failed":"")})),this.state.modal)}}]),Upload}(Hr.a.Component))||Ua)||Ua,Tn=Object(Dr.b)("menu")(Wa=Object(Dr.b)("video")(Wa=Object(Dr.c)(Wa=function(e){function Header(){return Cr()(this,Header),Pr()(this,zr()(Header).apply(this,arguments))}return Rr()(Header,e),jr()(Header,[{key:"render",value:function render(){var e=this;return Hr.a.createElement("header",null,Hr.a.createElement("div",{className:"header-left"},Hr.a.createElement(Qa.g,{icon:tn.a,title:"Menu",onClick:function onClick(){return e.props.menu.ToggleMenu(!e.props.menu.showMenu)},className:"menu-button ".concat(this.props.menu.showMenu?"menu-button-active":"")}),Hr.a.createElement("h1",{className:"header-text"},this.props.video.name||"Eluvio Video Editor")),Hr.a.createElement("div",{className:"header-right"},Hr.a.createElement(gn,null),Hr.a.createElement(yn,null),Hr.a.createElement(pn,null)))}}]),Header}(Hr.a.Component))||Wa)||Wa)||Wa,Sn=r(18),wn=r.n(Sn),En=r(88),xn=r.n(En),Cn=r(89),On=r.n(Cn),jn=r(43),Mn=r.n(jn),Pn=r(90),In=r.n(Pn),zn=r(91),Fn=r.n(zn),Rn=r(92),_n=r.n(Rn),Hn=r(93),Nn=r.n(Hn),Dn=r(94),An=r.n(Dn),Ln=function SaveFrame(e){return Hr.a.createElement(Qa.m,{content:Hr.a.createElement("span",null,"Save Current Frame")},Hr.a.createElement(Qa.g,{"aria-label":"Save Current Frame",icon:xn.a,className:"video-control-save-frame",onClick:e.video.SaveFrame}))},Vn=function PlaybackLevel(e){return Hr.a.createElement(Qa.m,{content:Hr.a.createElement("span",null,"Playback Level")},Hr.a.createElement("select",{"aria-label":"Playback Level",value:e.video.currentLevel,className:"video-playback-level",onChange:function onChange(t){return e.video.SetPlaybackLevel(t.target.value)}},Object.keys(e.video.levels).map((function(t){var r=e.video.levels[t];return Hr.a.createElement("option",{key:"playback-level-".concat(t),value:t},"".concat(r.attrs.RESOLUTION," (").concat((r.bitrate/1e3/1e3).toFixed(1),"Mbps)"))}))))},Un=function PlaybackRate(e){var t=Jr()(Array(40)).map((function(e,t){return ja()(t+1).div(10)}));return Hr.a.createElement(Qa.m,{content:Hr.a.createElement("span",null,"Playback Rate")},Hr.a.createElement("select",{"aria-label":"Playback Rate",className:"video-playback-rate",value:ja()(e.video.playbackRate),onChange:function onChange(t){return e.video.SetPlaybackRate(t.target.value)}},t.map((function(e){return Hr.a.createElement("option",{key:"video-rate-".concat(e),value:e},"".concat(e,"x"))}))))},Wn=function FrameRate(e){return Hr.a.createElement(Qa.m,{content:Hr.a.createElement("span",null,"Frame Rate: ",e.video.frameRateRat)},Hr.a.createElement("select",{disabled:e.video.frameRateSpecified,"aria-label":"Frame Rate",value:e.video.frameRateKey,onChange:function onChange(t){return e.video.SetFrameRate({rateKey:t.target.value})}},Object.keys(Ia).map((function(e){return Hr.a.createElement("option",{key:"frame-rate-".concat(e),value:e},e)}))))},Bn=function DropFrame(e){return["NTSC","NTSCFilm","NTSCHD"].includes(e.video.frameRateKey)?Hr.a.createElement(Qa.m,{content:Hr.a.createElement("span",null,"Drop Frame Notation")},Hr.a.createElement("select",{"aria-label":"Drop Frame Notation",value:e.video.dropFrame,onChange:function onChange(t){return e.video.SetDropFrame("true"===t.target.value)}},Hr.a.createElement("option",{value:!1},"NDF"),Hr.a.createElement("option",{value:!0},"DF"))):null},Kn=function PlayPause(e){var t=e.video.playing?"Pause":"Play";return Hr.a.createElement(Qa.g,{className:"video-control-play-pause",label:t,icon:e.video.playing?On.a:Mn.a,onClick:e.video.PlayPause})},qn=function FullscreenToggle(e){var t=e.video.fullScreen?"Exit Full Screen":"Full Screen";return Hr.a.createElement(Qa.m,{content:Hr.a.createElement("span",null,t)},Hr.a.createElement(Qa.g,{label:t,icon:e.video.fullScreen?Fn.a:In.a,onClick:e.video.ToggleFullscreen}))},$n=function Volume(e){var t=e.video.muted||0===e.video.volume?_n.a:e.video.volume<e.video.scale/2?Nn.a:An.a;return Hr.a.createElement("div",{ref:aa(),onWheel:function onWheel(t){var r=t.deltaY;return e.video.ScrollVolume(r)},className:"video-volume-controls"},Hr.a.createElement(Qa.m,{content:Hr.a.createElement("span",null,e.video.muted?"Unmute":"Mute")},Hr.a.createElement(Qa.g,{icon:t,onClick:function onClick(){return e.video.SetMuted(!e.video.muted)},className:"video-volume-icon"})),Hr.a.createElement(Qa.k,{min:0,max:e.video.scale,value:e.video.muted?0:e.video.volume,renderToolTip:function renderToolTip(t){return"".concat(Math.floor(t/e.video.scale*100),"%")},className:"video-volume-slider",onChange:function onChange(t){return e.video.SetVolume(t)}}))},Gn=function FrameControl(e){var t=e.video,r=e.frames,a=void 0===r?0:r,n=e.seconds,o=void 0===n?0:n,i=e.label,l=e.icon;return Hr.a.createElement(Qa.g,{label:i,icon:l,onClick:function onClick(){t.SeekFrames({frames:a,seconds:o})}})},Xn=function Seek(e){return Hr.a.createElement(Qa.k,{key:"video-progress",min:e.video.scaleMin,max:e.video.scaleMax,marks:e.video.sliderMarks,value:e.video.seek,handleClassName:"video-seek-handle",showMarks:!0,renderToolTip:function renderToolTip(t){return Hr.a.createElement("span",null,e.video.ProgressToSMPTE(t))},onChange:function onChange(t){return e.video.SeekPercentage(ja()(t).div(e.video.scale))},className:"video-seek"})},Yn=function Scale(e){return Hr.a.createElement(Qa.j,{key:"video-scale",min:0,max:e.video.scale,marks:e.video.sliderMarks,handles:[{position:e.video.scaleMin},{position:e.video.seek,disabled:!0,className:"video-seek-handle"},{position:e.video.scaleMax}],showMarks:!0,renderToolTip:function renderToolTip(t){return Hr.a.createElement("span",null,e.video.ProgressToSMPTE(t))},onChange:function onChange(t){var r=wn()(t,3),a=r[0],n=r[1],o=r[2];return e.video.SetScale(a,n,o)},className:"video-scale"})};Bn=Object(Dr.b)("video")(Object(Dr.c)(Bn)),Gn=Object(Dr.b)("video")(Object(Dr.c)(Gn)),Wn=Object(Dr.b)("video")(Object(Dr.c)(Wn)),qn=Object(Dr.b)("video")(Object(Dr.c)(qn)),Vn=Object(Dr.b)("video")(Object(Dr.c)(Vn)),Un=Object(Dr.b)("video")(Object(Dr.c)(Un)),Kn=Object(Dr.b)("video")(Object(Dr.c)(Kn)),Ln=Object(Dr.b)("video")(Object(Dr.c)(Ln)),Yn=Object(Dr.b)("video")(Object(Dr.c)(Yn)),Xn=Object(Dr.b)("video")(Object(Dr.c)(Xn)),$n=Object(Dr.b)("video")(Object(Dr.c)($n));var Jn,Zn,Qn=r(44),eo=r.n(Qn),to=r(95),ro=r.n(to),ao=r(45),no=r.n(ao),oo=r(46),io=r.n(oo),lo=Object(Dr.b)("video")(Jn=Object(Dr.c)(Jn=function(e){function VideoControls(){return Cr()(this,VideoControls),Pr()(this,zr()(VideoControls).apply(this,arguments))}return Rr()(VideoControls,e),jr()(VideoControls,[{key:"Seek",value:function Seek(){return this.props.video.fullScreen?Hr.a.createElement(Xn,null):null}},{key:"Scale",value:function Scale(){return this.props.video.fullScreen?Hr.a.createElement(Yn,null):null}},{key:"Controls",value:function Controls(){return Hr.a.createElement("div",{className:"video-controls"},Hr.a.createElement("div",{className:"controls left-controls"},Hr.a.createElement(Un,null),Hr.a.createElement(Wn,null),Hr.a.createElement(Bn,null)),Hr.a.createElement("div",{className:"controls center-controls"},Hr.a.createElement("div",{className:"center-top-controls"},Hr.a.createElement("div",{className:"mono video-time"},this.props.video.smpte)),Hr.a.createElement("div",{className:"center-bottom-controls"},Hr.a.createElement(Gn,{label:"Backward 1 Second",seconds:-1,icon:io.a}),Hr.a.createElement(Gn,{label:"Backward 1 Frame",frames:-1,icon:no.a}),Hr.a.createElement(Kn,null),Hr.a.createElement(Gn,{label:"Forward 1 Frame",frames:1,icon:eo.a}),Hr.a.createElement(Gn,{label:"Forward 1 Second",seconds:1,icon:ro.a}))),Hr.a.createElement("div",{className:"controls right-controls"},Hr.a.createElement(Vn,null),Hr.a.createElement($n,null),Hr.a.createElement(qn,null),Hr.a.createElement(Ln,null)))}},{key:"render",value:function render(){return this.props.video.initialized?Hr.a.createElement("div",{className:"video-controls-container ".concat(this.props.video.fullScreen?"fullscreen":"")},this.Controls(),this.Scale(),this.Seek()):null}}]),VideoControls}(Hr.a.Component))||Jn)||Jn,so=r(2),co=r.n(so),uo=r(28),po=Object(Dr.b)("video")(Zn=Object(Dr.b)("overlay")(Zn=Object(Dr.b)("tracks")(Zn=Object(Dr.b)("entry")(Zn=Object(Dr.c)(Zn=function(e){function Overlay(e){var t;return Cr()(this,Overlay),(t=Pr()(this,zr()(Overlay).call(this,e))).state={context:void 0,hovering:!1,hoverEntries:[],clientX:-1,clienY:-1},t.InitializeCanvas=t.InitializeCanvas.bind(an()(t)),t.Hover=t.Hover.bind(an()(t)),t.ClearHover=t.ClearHover.bind(an()(t)),t.Draw=t.Draw.bind(an()(t)),t.ToolTipContent=t.ToolTipContent.bind(an()(t)),t}return Rr()(Overlay,e),jr()(Overlay,[{key:"componentWillMount",value:function componentWillMount(){var e=this;this.resizeObserver=new uo.a((function(t){e.lastUpdate&&performance.now()-e.lastUpdate<100&&clearTimeout(e.resizeUpdate),e.resizeUpdate=setTimeout((function(){var r=t[0].target,a=t[0].contentRect,n=a.height,o=a.width,i=r.videoWidth/r.videoHeight;o/n<i&&(n=o/i),e.setState({videoHeight:n,videoWidth:o})}),100),e.lastUpdate=performance.now()})),this.resizeObserver.observe(this.props.element)}},{key:"componentDidMount",value:function componentDidMount(){var e=this;this.setState({DisposeDrawReaction:Object(Xr.n)((function(){return{enabled:e.props.overlay.overlayEnabled,frame:e.props.video.frame,videoWidth:e.state.videoWidth,videoHeight:e.state.videoHeight,enabledTracks:JSON.stringify(e.props.overlay.enabledOverlayTracks)}}),(function(){return e.Draw()}),{delay:25,equals:function equals(e,t){return JSON.stringify(e)===JSON.stringify(t)}})})}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.state.DisposeDrawReaction&&this.state.DisposeDrawReaction()}},{key:"InitializeCanvas",value:function InitializeCanvas(e){e&&this.setState({context:e.getContext("2d")})}},{key:"Entries",value:function Entries(){var e,t=this;if(0===this.props.video.frame)return[];for(var r=this.props.video.frame;r>Math.max(0,this.props.video.frame-10)&&!(e=this.props.overlay.overlayTrack[r.toString()]);r--);if(!e)return[];var a=[];return this.props.tracks.tracks.filter((function(e){return"metadata"===e.trackType})).forEach((function(r){if(t.props.overlay.enabledOverlayTracks[r.key]&&e[r.key]&&"object"===Ca()(e[r.key])){var n=[];e[r.key].tags?n=e[r.key].tags:Object.keys(e[r.key]).map((function(t){"object"===Ca()(e[r.key][t])&&e[r.key][t].map((function(e){n.push(Qr()({},e,{text:t}))}))})),a=a.concat(n.map((function(e){return Qr()({},e,{label:r.label,color:r.color})})))}})),a.filter((function(e){return!!e.box}))}},{key:"EntriesAt",value:function EntriesAt(e){var t=e.clientX,r=e.clientY,a=this.state.context.canvas.getBoundingClientRect(),n=a.top,o=a.left,i=a.height,l=a.width;return t=(t-o)/l,r=(r-n)/i,this.Entries().filter((function(e){var a=e.box,n=a.x1,o=a.x2,i=a.y1,l=a.y2,s=a.x3,c=a.y3,d=a.x4,u=a.y4,p=Math.min(n,o,s||n,d||o),h=Math.max(n,o,s||n,d||o),m=Math.min(i,l,c||i,u||l),v=Math.max(i,l,c||i,u||l);return p<=t&&h>=t&&m<=r&&v>=r}))}},{key:"Hover",value:function Hover(e){var t=e.clientX,r=e.clientY;this.setState({clientX:t,clientY:r,hoverEntries:this.EntriesAt({clientX:t,clientY:r}),hovering:!0})}},{key:"ClearHover",value:function ClearHover(){this.setState({hovering:!1})}},{key:"ToolTipContent",value:function ToolTipContent(){return this.state.hovering&&0!==this.state.hoverEntries.length?Hr.a.createElement("div",{className:"track-entry-container"},this.state.hoverEntries.map((function(e,t){return Hr.a.createElement("div",{className:"track-entry",key:"overlay-hover-entry-".concat(t)},Hr.a.createElement("div",{className:"track-entry-content"},e.text))}))):null}},{key:"Draw",value:function Draw(){if(this.state.context){var e=this.Entries();this.state.context.canvas.width=this.state.videoWidth,this.state.context.canvas.height=this.state.videoHeight;var t=this.state.context,r=t.canvas.width,a=t.canvas.height;t.clearRect(0,0,t.canvas.width,t.canvas.height),t.globalAlpha=.8,t.lineWidth=2,0!==e.length&&(e.forEach((function(e){if(e.box){var n=e.box,o=n.x1,i=n.x2,l=n.y1,s=n.y2,c=n.x3,d=n.y3,u=n.x4,p=n.y4,h=[];h=(h=c?[[o,l],[i,s],[c,d],[u,p]]:[[o,l],[i,l],[i,s],[o,s]]).map((function(e){return[e[0]*r,e[1]*a]}));var m=function toHex(e){return e.toString(16).padStart(2,"0")};t.strokeStyle="#".concat(m(e.color.r)).concat(m(e.color.g)).concat(m(e.color.b)),t.beginPath(),t.moveTo(h[0][0],h[0][1]),t.lineTo(h[1][0],h[1][1]),t.lineTo(h[2][0],h[2][1]),t.lineTo(h[3][0],h[3][1]),t.lineTo(h[0][0],h[0][1]),t.stroke()}})),this.state.hovering&&this.setState({hoverEntries:this.EntriesAt({clientX:this.state.clientX,clientY:this.state.clientY})}))}}},{key:"render",value:function render(){return this.props.overlay.overlayEnabled?Hr.a.createElement("div",{className:"overlay-container",style:{width:"".concat(this.state.videoWidth,"px")}},Hr.a.createElement(nn.a,{onMouseMove:this.Hover,onMouseLeave:this.ClearHover,content:this.ToolTipContent()},Hr.a.createElement("canvas",{onClick:this.Click,ref:this.InitializeCanvas,className:"overlay-canvas"}))):null}}]),Overlay}(Hr.a.Component))||Zn)||Zn)||Zn)||Zn)||Zn;po.propTypes={element:co.a.object.isRequired};var ho,mo=po,vo=r(47),yo=Object(Dr.b)("tracks")(ho=Object(Dr.b)("video")(ho=Object(Dr.c)(ho=function(e){function Video(e){var t;return Cr()(this,Video),(t=Pr()(this,zr()(Video).call(this,e))).state={videoWidth:0,videoHeight:0,player:void 0},t.InitializeVideo=t.InitializeVideo.bind(an()(t)),t}return Rr()(Video,e),jr()(Video,[{key:"componentWillMount",value:function componentWillMount(){this.initialHeight=.4*document.body.getBoundingClientRect().height}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.state.player&&this.state.player.destroy()}},{key:"InitializeVideo",value:function InitializeVideo(e){if(e){aa()(e);var t=new Ha.a({nudgeOffset:.2,nudgeMaxRetry:30});this.setState({player:t,video:e}),t.loadSource(this.props.video.source),t.attachMedia(e),this.props.video.Initialize(e,t)}}},{key:"Overlay",value:function Overlay(){if(this.state.video)return Hr.a.createElement(mo,{element:this.state.video})}},{key:"Video",value:function Video(){var e=this;return this.props.video.source?Hr.a.createElement(vo.ResizableBox,{className:"video-container",height:this.initialHeight,width:1/0,handle:Hr.a.createElement("div",{className:"resize-handle ".concat(this.props.video.fullScreen?"hidden":"")})},this.Overlay(),Hr.a.createElement("video",{crossOrigin:"anonymous",ref:this.InitializeVideo,muted:!0,autoPlay:!1,controls:!1,preload:"auto",onWheel:function onWheel(t){var r=t.deltaY;return e.props.video.ScrollVolume(r)}})):null}},{key:"render",value:function render(){var e=this.props.video.loading,t=this.props.video.source&&!this.props.video.initialized;return this.props.video.isVideo?Hr.a.createElement("div",{tabIndex:0,className:"video-component"},Hr.a.createElement(vn.a,{loading:e,loadingClassname:"video-controls-loading"},this.Video()),Hr.a.createElement(vn.a,{loading:t,loadingClassname:"video-controls-loading"},Hr.a.createElement(lo,null))):Hr.a.createElement("div",{tabIndex:0,className:"video-component"})}}]),Video}(Hr.a.Component))||ho)||ho)||ho,bo=function(e){function TrackCanvas(e){var t;return Cr()(this,TrackCanvas),(t=Pr()(this,zr()(TrackCanvas).call(this,e))).WatchResize=t.WatchResize.bind(an()(t)),t}return Rr()(TrackCanvas,e),jr()(TrackCanvas,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(){return!1}}]),jr()(TrackCanvas,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0)}},{key:"WatchResize",value:function WatchResize(e){var t=this;e&&(this.resizeObserver=new uo.a((function(e){var r=e[0];t.props.HandleResize(r.contentRect)})),this.resizeObserver.observe(e))}},{key:"render",value:function render(){var e=this,t=Qr()({},this.props);return delete t.SetRef,delete t.HandleResize,Hr.a.createElement("div",{ref:this.WatchResize,className:"track-canvas-container"},Hr.a.createElement("canvas",ra()({},t,{width:"50",height:"50",className:this.props.className,ref:function ref(t){return e.props.SetRef(t&&t.getContext("2d"))}})))}}]),TrackCanvas}(Hr.a.Component);bo.propTypes={SetRef:co.a.func.isRequired,HandleResize:co.a.func.isRequired};var fo,ko=bo,go=r(96),To=r.n(go),So=Object(Dr.b)("video")(fo=Object(Dr.b)("entry")(fo=Object(Dr.b)("tracks")(fo=Object(Dr.c)(fo=function(e){function Track(e){var t;return Cr()(this,Track),(t=Pr()(this,zr()(Track).call(this,e))).state={context:void 0,canvasHeight:0,canvasWidth:0},t.activeEntryIds=[],t.OnCanvasResize=t.OnCanvasResize.bind(an()(t)),t.Click=t.Click.bind(an()(t)),t.Hover=t.Hover.bind(an()(t)),t.ClearHover=t.ClearHover.bind(an()(t)),t}return Rr()(Track,e),jr()(Track,[{key:"componentDidMount",value:function componentDidMount(){var e=this,t=Math.max(1,Math.log10(this.props.tracks.totalEntries));this.setState({reactions:[Object(Xr.n)((function(){return{version:e.props.track.version}}),(function(){e.state.worker.postMessage({operation:"SetEntries",trackId:e.props.track.trackId,entries:e.props.tracks.TrackEntries(e.props.track.trackId)})}),{delay:25*t}),Object(Xr.n)((function(){return{scale:e.props.video.scale,scaleMax:e.props.video.scaleMax,scaleMin:e.props.video.scaleMin,duration:e.props.video.duration}}),(function(){e.state.worker.postMessage({operation:"SetScale",trackId:e.props.track.trackId,scale:{scale:e.props.video.scale,scaleMin:e.props.video.scaleMin,scaleMax:e.props.video.scaleMax},duration:e.props.video.duration})}),{delay:50*t}),Object(Xr.n)((function(){return{filter:e.props.entry.filter}}),(function(){"clip"!==e.props.track.trackType&&e.state.worker.postMessage({operation:"SetFilter",trackId:e.props.track.trackId,filter:e.props.entry.filter})}),{delay:100*t}),Object(Xr.n)((function(){return{hoverEntries:e.props.entry.hoverEntries,selectedEntries:e.props.entry.entries,selectedEntry:e.props.entry.selectedEntry}}),(function(){var t=Object(Xr.q)(e.props.entry.entries),r=Object(Xr.q)(e.props.entry.selectedEntry?e.props.entry.selectedEntry:void 0),a=Object(Xr.q)(e.props.entry.hoverEntries);e.state.worker.postMessage({operation:"SetSelected",trackId:e.props.track.trackId,selectedEntryId:r,selectedEntryIds:t,hoverEntryIds:a})}),{delay:75*t}),Object(Xr.n)((function(){return{frame:e.props.video.frame}}),(function(){var t=Object(Xr.q)(e.Search(e.props.video.currentTime)).sort();t.toString()!==e.activeEntryIds.toString()&&(e.activeEntryIds=t,e.state.worker.postMessage({operation:"SetActive",trackId:e.props.track.trackId,activeEntryIds:t}))}),{delay:50*t}),Object(Xr.n)((function(){return{width:e.state.canvasWidth,height:e.state.canvasHeight}}),(function(t){var r=t.width,a=t.height;e.state.context&&(e.state.context.canvas.width=r,e.state.context.canvas.height=a,e.state.worker.postMessage({operation:"Resize",trackId:e.props.track.trackId,width:e.state.canvasWidth,height:e.state.canvasHeight}))}),{delay:100*t})]})}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.state.reactions.forEach((function(e){return e()})),this.state.worker.postMessage({operation:"Destroy",trackId:this.props.track.trackId})}},{key:"OnCanvasResize",value:function OnCanvasResize(e){var t=e.height,r=e.width;this.setState({canvasHeight:t,canvasWidth:r})}},{key:"ClientXToCanvasPosition",value:function ClientXToCanvasPosition(e){return ja()(e-this.state.context.canvas.offsetLeft).div(this.state.context.canvas.offsetWidth).valueOf()}},{key:"Search",value:function Search(e){return this.props.tracks.TrackEntryIntervalTree(this.props.track.trackId).search(e,e)}},{key:"TimeAt",value:function TimeAt(e){var t=ja()(this.props.video.scaleMax-this.props.video.scaleMin).div(this.props.video.scale).mul(this.props.video.duration),r=ja()(this.props.video.scaleMin).div(this.props.video.scale).mul(this.props.video.duration);return t.mul(this.ClientXToCanvasPosition(e)).add(r).valueOf()}},{key:"Click",value:function Click(e){var t=e.clientX,r=this.TimeAt(t),a=this.Search(r);this.props.tracks.SetSelectedTrack(this.props.track.trackId),this.props.entry.SetEntries(a,this.props.video.TimeToSMPTE(r))}},{key:"Hover",value:function Hover(e){var t=e.clientX,r=this.TimeAt(t),a=this.Search(r);this.props.entry.SetHoverEntries(a,this.props.track.trackId,this.props.video.TimeToSMPTE(r))}},{key:"ClearHover",value:function ClearHover(){this.props.entry.ClearHoverEntries([])}},{key:"ToolTipContent",value:function ToolTipContent(){var e=this;if(!(this.props.track.trackId===this.props.entry.hoverTrack)||!this.props.entry.hoverEntries||0===this.props.entry.hoverEntries.length)return null;var t=function formatString(e){return(e||"").toString().toLowerCase()},r=t(this.props.entry.filter),a=this.props.entry.hoverEntries.map((function(a){var n=e.props.tracks.TrackEntries(e.props.track.trackId)[a];return r&&!t(n.text).includes(r)?null:Hr.a.createElement("div",{className:"track-entry",key:"entry-".concat(n.entryId)},Hr.a.createElement("div",{className:"track-entry-timestamps"},"".concat(e.props.entry.TimeToSMPTE(n.startTime)," - ").concat(e.props.entry.TimeToSMPTE(n.endTime))),Hr.a.createElement("div",{className:"track-entry-content"},n.text))})).filter((function(e){return e}));return 0===a.length?null:Hr.a.createElement("div",{className:"track-entry-container"},a)}},{key:"Canvas",value:function Canvas(){var e=this;return Hr.a.createElement(ko,{className:"track",onClick:this.Click,onMouseMove:this.Hover,onMouseLeave:this.ClearHover,HandleResize:this.OnCanvasResize,SetRef:function SetRef(t){e.setState({context:t});var r=new To.a;r.postMessage({operation:"Initialize",trackId:e.props.track.trackId,color:Object(Xr.q)(e.props.track.color),width:e.state.canvasWidth,height:e.state.canvasHeight,entries:e.props.tracks.TrackEntries(e.props.track.trackId),noActive:e.props.noActive,scale:{scale:e.props.video.scale,scaleMin:e.props.video.scaleMin,scaleMax:e.props.video.scaleMax},duration:e.props.video.duration}),r.onmessage=function(t){if(t.data.trackId===e.props.track.trackId){var r=t.data.imageData,a=r.data,n=r.width,o=r.height;e.state.context.putImageData(new ImageData(a,n,o),0,0,0,0,n,o)}},e.setState({worker:r})}})}},{key:"render",value:function render(){var e=this;return Hr.a.createElement(Qa.m,{content:this.ToolTipContent()},Hr.a.createElement("div",{ref:aa({shift:!0}),onWheel:function onWheel(t){var r=t.deltaY,a=t.clientX;return t.shiftKey&&e.props.video.ScrollScale(e.ClientXToCanvasPosition(a),r)},className:"track-container"},this.Canvas()))}}]),Track}(Hr.a.Component))||fo)||fo)||fo)||fo;So.propTypes={track:co.a.object.isRequired,entry:co.a.object,video:co.a.object,noActive:co.a.bool};var wo,Eo=So,xo=r(97),Co=r.n(xo),Oo=Object(Dr.b)("video")(wo=Object(Dr.b)("entry")(wo=Object(Dr.b)("tracks")(wo=Object(Dr.c)(wo=function(e){function AudioTrack(e){var t;return Cr()(this,AudioTrack),(t=Pr()(this,zr()(AudioTrack).call(this,e))).state={context:void 0,canvasHeight:0,canvasWidth:0},t.activeEntryIds=[],t.OnCanvasResize=t.OnCanvasResize.bind(an()(t)),t}return Rr()(AudioTrack,e),jr()(AudioTrack,[{key:"componentDidMount",value:function componentDidMount(){var e=this;this.setState({reactions:[Object(Xr.n)((function(){return{version:e.props.track.version,entries:e.props.track.entries.length}}),(function(){e.state.worker.postMessage({operation:"SetEntries",trackId:e.props.track.trackId,entries:Object(Xr.q)(e.props.track.entries).flat()})}),{delay:500}),Object(Xr.n)((function(){return{scale:e.props.video.scale,scaleMax:e.props.video.scaleMax,scaleMin:e.props.video.scaleMin,duration:e.props.video.duration,max:e.props.track.max}}),(function(){e.state.worker.postMessage({operation:"SetScale",trackId:e.props.track.trackId,scale:{scale:e.props.video.scale,scaleMin:e.props.video.scaleMin,scaleMax:e.props.video.scaleMax},duration:e.props.video.duration,max:e.props.track.max})}),{delay:50}),Object(Xr.n)((function(){return{width:e.state.canvasWidth,height:e.state.canvasHeight}}),(function(t){var r=t.width,a=t.height;e.state.context&&(e.state.context.canvas.width=r,e.state.context.canvas.height=a,e.state.worker.postMessage({operation:"Resize",trackId:e.props.track.trackId,width:e.state.canvasWidth,height:e.state.canvasHeight}))}),{delay:100})]})}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.state.reactions.forEach((function(e){return e()})),this.state.worker.postMessage({operation:"Destroy",trackId:this.props.track.trackId})}},{key:"ClientXToCanvasPosition",value:function ClientXToCanvasPosition(e){return ja()(e-this.state.context.canvas.offsetLeft).div(this.state.context.canvas.offsetWidth).valueOf()}},{key:"OnCanvasResize",value:function OnCanvasResize(e){var t=e.height,r=e.width;this.setState({canvasHeight:t,canvasWidth:r})}},{key:"Canvas",value:function Canvas(){var e=this;return Hr.a.createElement(ko,{className:"track",HandleResize:this.OnCanvasResize,SetRef:function SetRef(t){e.setState({context:t});var r=new Co.a;r.postMessage({operation:"Initialize",trackId:e.props.track.trackId,width:e.state.canvasWidth,height:e.state.canvasHeight,entries:Object(Xr.q)(e.props.track.entries).flat(),max:e.props.track.max,scale:{scale:e.props.video.scale,scaleMin:e.props.video.scaleMin,scaleMax:e.props.video.scaleMax},duration:e.props.video.duration}),r.onmessage=function(t){if(t.data.trackId===e.props.track.trackId){var r=t.data.imageData,a=r.data,n=r.width,o=r.height;e.state.context.putImageData(new ImageData(a,n,o),0,0,0,0,n,o)}},e.setState({worker:r})}})}},{key:"render",value:function render(){var e=this;return Hr.a.createElement("div",{ref:aa({shift:!0}),onWheel:function onWheel(t){var r=t.deltaY,a=t.clientX;return t.shiftKey&&e.props.video.ScrollScale(e.ClientXToCanvasPosition(a),r)},className:"track-container"},this.Canvas())}}]),AudioTrack}(Hr.a.Component))||wo)||wo)||wo)||wo;Oo.propTypes={track:co.a.object.isRequired,entry:co.a.object};var jo,Mo,Po,Io,zo,Fo,Ro=Oo,_o=Object(Dr.b)("video")(jo=Object(Dr.b)("tracks")(jo=Object(Dr.c)(jo=function(e){function PreviewTrack(e){var t;return Cr()(this,PreviewTrack),(t=Pr()(this,zr()(PreviewTrack).call(this,e))).state={previews:10},t.WatchResize=t.WatchResize.bind(an()(t)),t}return Rr()(PreviewTrack,e),jr()(PreviewTrack,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0)}},{key:"WatchResize",value:function WatchResize(e){var t=this;e&&(aa()(e),this.resizeObserver=new uo.a((function(e){var r=e[0];t.setState({previews:Math.ceil(r.contentRect.width/125)})})),this.resizeObserver.observe(e))}},{key:"Previews",value:function Previews(){var e=this,t=this.state.previews,r=(this.props.video.scaleMaxTime-this.props.video.scaleMinTime)/t,a=this.props.video.scaleMinTime+.5*r;return Jr()(Array(t).keys()).map((function(t){var n=a+r*t,o=e.props.video.TimeToFrame(n);return Hr.a.createElement("div",{className:"preview-frame",key:"preview-frame-".concat(o)},Hr.a.createElement("img",{src:e.props.video.VideoFrame(o)}))}))}},{key:"render",value:function render(){var e=this;return Hr.a.createElement("div",{ref:this.WatchResize,onWheel:function onWheel(t){var r=t.deltaY,a=t.clientX;return t.shiftKey&&e.props.video.ScrollScale(e.ClientXToCanvasPosition(a),r)},className:"track-container preview-track-container"},this.Previews())}}]),PreviewTrack}(Hr.a.Component))||jo)||jo)||jo,Ho=function BackButton(e){var t=e.onClick,r=e.className,a=void 0===r?"":r;return Hr.a.createElement(Qa.g,{label:"Back",className:"back-button ".concat(a||""),icon:io.a,onClick:t})},No=function Checkbox(e){var t=e.value,r=e.onChange,a=e.toolTip,n=e.className,o=void 0===n?"":n,i=Hr.a.createElement("div",{className:"checkbox-container ".concat(o||"")},Hr.a.createElement("div",{onClick:function onClick(e){e.stopPropagation(),r(!t)},className:"checkbox ".concat(t?"checked":"")}));return a?Hr.a.createElement(Qa.m,{content:a},i):i},Do=r(98),Ao=r.n(Do),Lo=Object(Dr.b)("tracks")(Mo=Object(Dr.b)("video")(Mo=Object(Dr.b)("overlay")(Mo=Object(Dr.c)(Mo=function(e){function Timeline(e){var t;return Cr()(this,Timeline),(t=Pr()(this,zr()(Timeline).call(this,e))).state={indicatorTrackWidth:0,indicatorHeight:0,indicatorOffset:0,show:{Audio:!1,Preview:!0,Segments:!1,Subtitles:!1,Tags:!0}},t.WatchResize=t.WatchResize.bind(an()(t)),t}return Rr()(Timeline,e),jr()(Timeline,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0)}},{key:"WatchResize",value:function WatchResize(e){var t=this;e&&(this.resizeObserver=new uo.a((function(e){t.props.video.SetMarks();var r=e[0],a=e[0].target.getElementsByClassName("track-lane-content");0!==a.length?t.setState({indicatorTrackWidth:a[0].offsetWidth,indicatorHeight:r.contentRect.height,indicatorOffset:a[0].offsetLeft}):t.setState({indicatorTrackWidth:0,indicatorHeight:0,indicatorOffset:0})})),this.resizeObserver.observe(e))}},{key:"TrackLane",value:function TrackLane(e){var t=this,r=e.trackId,a=e.trackType,n=e.label,o=e.content,i=e.className,l=void 0===i?"":i,s=r>0&&"audio"!==a,c=r&&this.props.tracks.selectedTrack===r,d=function selectTrack(){s&&(c?t.props.tracks.ClearSelectedTrack():t.props.tracks.SetSelectedTrack(r))};return Hr.a.createElement("div",{key:"track-lane-".concat(r||n),className:"track-lane ".concat(l)},Hr.a.createElement("div",{onClick:d,onKeyPress:Object(Qa.n)(d),tabIndex:r?0:void 0,className:"\n              track-label-container\n              ".concat(c?"track-label-selected":"","\n              ").concat(s?"track-label-clickable":"","\n            ")},n),Hr.a.createElement("div",{className:"track-lane-content"},o))}},{key:"CurrentTimeIndicator",value:function CurrentTimeIndicator(){var e=this.props.video.scaleMax-this.props.video.scaleMin,t=(this.props.video.seek-this.props.video.scaleMin)*(this.state.indicatorTrackWidth/e)+this.state.indicatorOffset;return Hr.a.createElement("div",{style:{height:this.state.indicatorHeight+"px",left:t-1+"px"},className:"track-time-indicator"})}},{key:"TrackLabel",value:function TrackLabel(e){var t,r=this;if(e.hasOverlay){var a=this.props.overlay.overlayEnabled,n=this.props.overlay.enabledOverlayTracks[e.key];t=Hr.a.createElement(Qa.m,{content:a?Hr.a.createElement("span",null,"".concat(n?"Disable Overlay":"Enable Overlay")):null},Hr.a.createElement(Qa.g,{icon:Ao.a,label:"".concat(n?"Disable Overlay":"Enable Overlay"),onClick:function onClick(t){t.stopPropagation(),a&&r.props.overlay.ToggleOverlayTrack(e.key,!n)},className:"overlay-toggle ".concat(n&&a?"overlay-toggle-enabled":"overlay-toggle-disabled")}))}return"vtt"===e.trackType&&(t=Hr.a.createElement(No,{value:e.active,onChange:function onChange(){return r.props.tracks.ToggleTrack(e.label)},toolTip:Hr.a.createElement("span",null,e.active?"Disable":"Enable"," ",e.label),className:"track-toggle"})),Hr.a.createElement("div",{className:"track-label"},e.label,t)}},{key:"Track",value:function Track(e){if(e){var t="vtt"===e.trackType?"".concat(e.active?"Disable":"Enable"," ").concat(e.label):e.label;return this.TrackLane({trackId:e.trackId,trackType:e.trackType,label:this.TrackLabel(e),className:"audio"===e.trackType?"track-lane-audio":"",content:"audio"===e.trackType?Hr.a.createElement(Ro,{track:e}):Hr.a.createElement(Eo,{track:e,noActive:"clip"===e.trackType}),labelToolTip:Hr.a.createElement("span",null,t)})}}},{key:"Tracks",value:function Tracks(){var e,t,r,a,n,o,i=this;return this.state.show.Preview&&this.props.video.previewSupported&&(e=this.TrackLane({trackType:"preview",label:"Preview",className:"track-lane-preview",content:Hr.a.createElement(_o,null)})),this.state.show.Subtitles&&(t=this.props.tracks.tracks.filter((function(e){return"vtt"===e.trackType})).slice().sort((function(e,t){return e.label>t.label?1:-1})).map((function(e){return i.Track(e)}))),this.state.show.Segments&&(a=this.props.tracks.tracks.filter((function(e){return"segments"===e.trackType})).slice().sort((function(e,t){return e.label>t.label?1:-1})).map((function(e){return i.Track(e)}))),this.state.show.Tags&&(r=this.props.tracks.tracks.filter((function(e){return"vtt"!==e.trackType&&"clip"!==e.trackType&&"segments"!==e.trackType})).slice().sort((function(e,t){return e.label>t.label?1:-1})).map((function(e){return i.Track(e)}))),this.state.show.Audio&&(n=this.props.tracks.audioTracks.map((function(e){return i.Track(e)}))),o=this.Track(this.props.tracks.tracks.find((function(e){return"clip"===e.trackType}))),Hr.a.createElement("div",{ref:this.WatchResize,className:"tracks-container"},this.CurrentTimeIndicator(),o,e,t,r,a,n)}},{key:"TrackToggleButton",value:function TrackToggleButton(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0,n=r?this.props.overlay.overlayEnabled:this.state.show[e],o=function onClick(){a&&a(),r?t.props.overlay.ToggleOverlay(!t.props.overlay.overlayEnabled):t.setState({show:Qr()({},t.state.show,ba()({},e,!n))})};return Hr.a.createElement("button",{onClick:o,className:"".concat(n?"enabled":"")},e)}},{key:"TrackToggle",value:function TrackToggle(){var e=this.props.tracks.tracks.filter((function(e){return"vtt"===e.trackType})),t=this.props.tracks.tracks.filter((function(e){return"metadata"===e.trackType})),r=this.props.overlay.overlayTrack,a=this.props.video.previewSupported?this.TrackToggleButton("Preview"):null,n=e.length>0?this.TrackToggleButton("Subtitles"):null,o=t.length>0?this.TrackToggleButton("Tags"):null,i=r?this.TrackToggleButton("Overlay",!0):null,l=this.props.video.isVideo?this.TrackToggleButton("Segments"):null,s=this.props.video.isVideo?this.TrackToggleButton("Audio",!1,this.props.tracks.AddAudioTracks):null;return Hr.a.createElement("div",{className:"timeline-actions toggle-tracks"},i,a,n,o,l,s)}},{key:"AddTrackButton",value:function AddTrackButton(){var e=this;return Hr.a.createElement("div",{className:"timeline-actions"},Hr.a.createElement("button",{onClick:function onClick(){return e.props.tracks.CreateTrack({label:"New Track",key:"new_track"})}},"Add Track"))}},{key:"render",value:function render(){return this.props.video.initialized?Hr.a.createElement("div",{className:"timeline"},this.TrackLane({trackId:-1,label:Hr.a.createElement("span",{className:"mono"},"".concat(this.props.video.scaleMinSMPTE," - ").concat(this.props.video.scaleMaxSMPTE)),content:Hr.a.createElement(Yn,null),className:"video-scale-lane"}),this.TrackLane({trackId:-2,label:Hr.a.createElement("span",{className:"mono"},"".concat(this.props.video.frame," :: ").concat(this.props.video.smpte)),content:Hr.a.createElement(Xn,null),className:"video-seek-lane"}),this.Tracks(),this.AddTrackButton(),this.TrackToggle()):null}}]),Timeline}(Hr.a.Component))||Mo)||Mo)||Mo)||Mo,Vo=Object(Dr.b)("menu")(Po=Object(Dr.b)("video")(Po=Object(Dr.c)(Po=function(e){function Menu(e){var t;return Cr()(this,Menu),(t=Pr()(this,zr()(Menu).call(this,e))).state={page:1,perPage:25,filter:"",filterInput:"",cacheId:"",count:0},t.SelectLibrary=t.SelectLibrary.bind(an()(t)),t.SelectObject=t.SelectObject.bind(an()(t)),t}var t,r;return Rr()(Menu,e),jr()(Menu,[{key:"SelectLibrary",value:(r=Br()(Ur.a.mark((function _callee(e){return Ur.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:this.props.menu.SetLibraryId(e);case 1:case"end":return t.stop()}}),_callee,this)}))),function SelectLibrary(e){return r.apply(this,arguments)})},{key:"SelectObject",value:(t=Br()(Ur.a.mark((function _callee2(e,t){return Ur.a.wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,this.props.menu.SetLibraryId(e),this.props.menu.SetObjectId(t),this.props.menu.ToggleMenu(!1),this.setState({objectId:t}),r.next=7,this.props.menu.SelectVideo({libraryId:e,objectId:t});case 7:r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),this.props.menu.ClearObjectId();case 12:case"end":return r.stop()}}),_callee2,this,[[0,9]])}))),function SelectObject(e,r){return t.apply(this,arguments)})},{key:"SelectedObject",value:function SelectedObject(){var e=this,t=this.props.menu.selectedObject,r=0===this.props.video.videoTags.length?null:Hr.a.createElement(Hr.a.Fragment,null,Hr.a.createElement("label",null,"Video Tags"),Hr.a.createElement("span",{className:"wrap"},this.props.video.videoTags.join(", ")));return Hr.a.createElement(vn.a,{loading:!t,render:function render(){return Hr.a.createElement("div",{className:"menu-entries"},Hr.a.createElement("div",{className:"menu-header"},Hr.a.createElement(Ho,{onClick:function onClick(){e.props.menu.ClearObjectId()}}),Hr.a.createElement("h4",null,t.name)),Hr.a.createElement("h5",null,t.metadata.description),Hr.a.createElement("div",{className:"video-info"},Hr.a.createElement("label",null,"Library ID"),Hr.a.createElement("div",null,t.libraryId),Hr.a.createElement("label",null,"Object ID"),Hr.a.createElement("span",null,t.objectId),Hr.a.createElement("label",null,"Version Hash"),Hr.a.createElement("span",{className:"wrap"},t.versionHash),r))}})}},{key:"Objects",value:function Objects(){var e=this,t=this.props.menu.libraryId,r=this.props.menu.libraries[t];return Hr.a.createElement("div",{className:"menu-entries"},Hr.a.createElement("div",{className:"menu-header"},Hr.a.createElement(Ho,{onClick:function onClick(){e.props.menu.ClearLibraryId(),e.setState({page:1,filter:"",filterInput:"",count:0,cacheId:""})}}),Hr.a.createElement("h4",null,r?r.name:""),Hr.a.createElement("div",{className:"menu-page-controls"},Hr.a.createElement(Qa.g,{hidden:1===this.state.page,icon:no.a,title:"Previous Page",onClick:function onClick(){return e.setState({page:e.state.page-1})}}),Hr.a.createElement("span",{title:"Current Page",hidden:0===this.state.count,className:"current-page"},this.state.page," / ",Math.ceil(this.state.count/this.state.perPage)),Hr.a.createElement(Qa.g,{hidden:this.state.perPage*this.state.page>this.state.count,icon:eo.a,title:"Next Page",onClick:function onClick(){return e.setState({page:e.state.page+1})}}))),Hr.a.createElement("div",{className:"menu-filter"},Hr.a.createElement("input",{placeholder:"Filter...",value:this.state.filterInput,onChange:function onChange(t){e.setState({filterInput:t.target.value}),clearTimeout(e.filterTimeout),e.filterTimeout=setTimeout((function(){e.setState({page:1,filter:e.state.filterInput,cacheId:"",count:0})}),500)}})),Hr.a.createElement("div",{className:"menu-video-filter"},Hr.a.createElement("button",{className:this.props.menu.showVideoOnly?"secondary":"primary",onClick:function onClick(){return e.setState({cacheId:""},(function(){return e.props.menu.ToggleVideoFilter(!1)}))}},"Show All"),Hr.a.createElement("button",{className:this.props.menu.showVideoOnly?"primary":"secondary",onClick:function onClick(){return e.setState({cacheId:""},(function(){return e.props.menu.ToggleVideoFilter(!0)}))}},"Show Video Only")),Hr.a.createElement(Qa.b,{key:"objects-container-".concat(this.state.filter,"-").concat(this.state.page,"-").concat(this.props.menu.showVideoOnly),Load:Br()(Ur.a.mark((function _callee3(){var r;return Ur.a.wrap((function _callee3$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.props.menu.ListObjects({libraryId:t,page:e.state.page,perPage:e.state.perPage,filter:e.state.filter,cacheId:e.state.cacheId,count:0});case 2:r=a.sent,e.setState({count:r.items,cacheId:r.cache_id});case 4:case"end":return a.stop()}}),_callee3)})))},0===(this.props.menu.objects[t]||[]).length?Hr.a.createElement("div",{className:"menu-empty"},"No Content Available"):Hr.a.createElement("ul",null,(this.props.menu.objects[t]||[]).sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1})).map((function(r){var a=function onClick(){return e.SelectObject(t,r.objectId)};return Hr.a.createElement("li",{tabIndex:0,onClick:a,onKeyPress:Object(Qa.n)(a),key:"content-object-".concat(r.objectId)},r.name)})))))}},{key:"Libraries",value:function Libraries(){var e=this,t=Object.values(this.props.menu.libraries).sort((function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:-1}));return Hr.a.createElement(Qa.b,{key:"libraries-container",Load:this.props.menu.ListLibraries},0===t.length?Hr.a.createElement("div",{className:"menu-empty"},"No Libraries Available"):Hr.a.createElement("div",{className:"menu-entries"},Hr.a.createElement("ul",null,t.map((function(t){var r=function onClick(){return e.SelectLibrary(t.libraryId)};return Hr.a.createElement("li",{tabIndex:0,onKeyPress:Object(Qa.n)(r),onClick:r,key:"library-".concat(t.libraryId)},t.name)})))))}},{key:"Navigation",value:function Navigation(){return this.props.menu.objectId?this.SelectedObject():this.props.menu.libraryId?this.Objects():this.Libraries()}},{key:"render",value:function render(){return this.props.menu.showMenu?Hr.a.createElement("div",{className:"menu-container"},this.Navigation()):null}}]),Menu}(Hr.a.Component))||Po)||Po)||Po,Uo=function DownloadButton(e){var t=e.Download,r=Object(_r.useState)({bytesFinished:0,bytesTotal:1}),a=wn()(r,2),n=a[0],o=a[1],i=Object(_r.useState)(!1),l=wn()(i,2),s=l[0],c=l[1];return s?Hr.a.createElement("div",{className:"progress-bar-container"},Hr.a.createElement("div",{className:"progress-bar",style:{width:"".concat(100*n.bytesFinished/n.bytesTotal,"%")}})):Hr.a.createElement("button",{tabIndex:0,onClick:function onClick(){c(!0),t({callback:o})}},"Download")},Wo=Object(Dr.b)("entry")(Io=Object(Dr.c)(Io=function(e){function Entry(e){var t;return Cr()(this,Entry),(t=Pr()(this,zr()(Entry).call(this,e))).HandleDelete=t.HandleDelete.bind(an()(t)),t}var t;return Rr()(Entry,e),jr()(Entry,[{key:"HandleDelete",value:(t=Br()(Ur.a.mark((function _callee2(){var e=this;return Ur.a.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Qa.d)({message:"Are you sure you want to remove this tag?",onConfirm:function(){var t=Br()(Ur.a.mark((function _callee(){return Ur.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:e.props.entry.RemoveEntry(e.props.entry.selectedEntry);case 1:case"end":return t.stop()}}),_callee)})));return function onConfirm(){return t.apply(this,arguments)}}()});case 2:case"end":return t.stop()}}),_callee2)}))),function HandleDelete(){return t.apply(this,arguments)})},{key:"Actions",value:function Actions(e){var t=this,r=["vtt","metadata","clip","segment"].includes(e.entryType),a=["metadata","overlay","clip"].includes(e.entryType),n=["segment"].includes(e.entryType);return Hr.a.createElement("div",{className:"entry-actions-container"},Hr.a.createElement(Ho,{onClick:this.props.entry.ClearSelectedEntry}),Hr.a.createElement("div",{className:"entry-actions"},Hr.a.createElement("button",{hidden:!r,tabIndex:0,onClick:this.props.entry.PlayCurrentEntry},"Play"),Hr.a.createElement("button",{hidden:!a,tabIndex:0,onClick:function onClick(){return t.props.entry.SetEditing(e.entryId)}},"Edit"),Hr.a.createElement("button",{hidden:!a,tabIndex:0,onClick:this.HandleDelete},"Remove"),n?Hr.a.createElement(Uo,{key:"download-".concat(e.entryId),Download:function Download(r){var a=r.callback;return t.props.entry.DownloadSegment(e.entryId,a)}}):null))}},{key:"VttEntry",value:function VttEntry(e){var t=e.entry;return Hr.a.createElement("div",{className:"entry-details"},Hr.a.createElement("label",null,"Text"),Hr.a.createElement("div",null,t.text),Hr.a.createElement("label",null,"Start Time"),Hr.a.createElement("span",null,"".concat(t.startTime," (").concat(this.props.entry.TimeToSMPTE(e.startTime),")")),Hr.a.createElement("label",null,"End Time"),Hr.a.createElement("span",null,"".concat(t.endTime," (").concat(this.props.entry.TimeToSMPTE(e.endTime),")")),Hr.a.createElement("label",null,"Align"),Hr.a.createElement("span",null,t.align),Hr.a.createElement("label",null,"Line"),Hr.a.createElement("span",null,t.line),Hr.a.createElement("label",null,"Line Align"),Hr.a.createElement("span",null,t.lineAlign),Hr.a.createElement("label",null,"Position"),Hr.a.createElement("span",null,t.position),Hr.a.createElement("label",null,"Position Align"),Hr.a.createElement("span",null,t.positionAlign),Hr.a.createElement("label",null,"Region"),Hr.a.createElement("span",null,t.region),Hr.a.createElement("label",null,"Size"),Hr.a.createElement("span",null,t.size),Hr.a.createElement("label",null,"Snap to Lines"),Hr.a.createElement("span",null,t.snapToLines),Hr.a.createElement("label",null,"Vertical"),Hr.a.createElement("span",null,t.vertical))}},{key:"TagEntry",value:function TagEntry(e){return Hr.a.createElement("div",{className:"entry-details"},Hr.a.createElement("label",null,"Tag"),Hr.a.createElement("div",null,e.text),Hr.a.createElement("label",null,"Start Time"),Hr.a.createElement("span",null,"".concat(e.startTime," (").concat(this.props.entry.TimeToSMPTE(e.startTime),")")),Hr.a.createElement("label",null,"End Time"),Hr.a.createElement("span",null,"".concat(e.endTime," (").concat(this.props.entry.TimeToSMPTE(e.endTime),")")))}},{key:"OverlayEntry",value:function OverlayEntry(e){return Hr.a.createElement("div",{className:"entry-details"},Hr.a.createElement("label",null,"Tag"),Hr.a.createElement("div",null,e.text),Hr.a.createElement("label",null,"Confidence"),Hr.a.createElement("div",null,e.confidence.toFixed(3)),Hr.a.createElement("label",null,"Bounding Box"),Hr.a.createElement("div",null),Hr.a.createElement("div",{className:"entry-details indented"},Hr.a.createElement("label",null,"X1"),Hr.a.createElement("div",null,e.box.x1.toFixed(4)),Hr.a.createElement("label",null,"Y1"),Hr.a.createElement("div",null,e.box.y1.toFixed(4)),Hr.a.createElement("label",null,"X2"),Hr.a.createElement("div",null,e.box.x2.toFixed(4)),Hr.a.createElement("label",null,"Y2"),Hr.a.createElement("div",null,e.box.y2.toFixed(4))))}},{key:"Content",value:function Content(e){return"vtt"===e.entryType?this.VttEntry(e):"overlay"===e.entryType?this.OverlayEntry(e):this.TagEntry(e)}},{key:"render",value:function render(){var e=this.props.entry.SelectedEntry();return e?Hr.a.createElement("div",{className:"entry-container"},this.Actions(e),this.Content(e)):null}}]),Entry}(Hr.a.Component))||Io)||Io,Bo=r(99),Ko=r.n(Bo),qo=Object(Dr.b)("video")(zo=Object(Dr.b)("entry")(zo=Object(Dr.c)(zo=function(e){function EntryForm(e){var t;Cr()(this,EntryForm);var r=(t=Pr()(this,zr()(EntryForm).call(this,e))).props.entry.SelectedEntry(),a=!r,n=void 0===(r=r||{}).startTime?e.video.currentTime:r.startTime,o=void 0===r.endTime?e.video.currentTime+1:r.endTime;return t.state={createForm:a,entryId:r.entryId,text:r.text||"",startTime:n,startTimeValid:!0,endTime:o,endTimeValid:!0,validText:!0},t.HandleTextChange=t.HandleTextChange.bind(an()(t)),t.HandleTimeChange=t.HandleTimeChange.bind(an()(t)),t.HandleSubmit=t.HandleSubmit.bind(an()(t)),t.HandleDelete=t.HandleDelete.bind(an()(t)),t.HandleCancel=t.HandleCancel.bind(an()(t)),t}var t;return Rr()(EntryForm,e),jr()(EntryForm,[{key:"HandleTextChange",value:function HandleTextChange(e){var t=e.target.value;this.setState({text:t,validText:t.length>0})}},{key:"HandleTimeChange",value:function HandleTimeChange(e){var t=this,r=function Valid(e){return e>=0&&e<=t.props.video.duration+1};this.setState(ba()({},e.target.name,parseFloat(e.target.value)),(function(){t.state.startTime>=t.state.endTime?t.setState({startTimeValid:!1,endTimeValid:!1}):t.setState({startTimeValid:r(t.state.startTime),endTimeValid:r(t.state.endTime)})}))}},{key:"HandleSubmit",value:function HandleSubmit(){this.state.validText&&this.state.startTimeValid&&this.state.endTimeValid&&this.props.entry.ModifyEntry({entryId:this.state.entryId,text:this.state.text,startTime:this.state.startTime,endTime:this.state.endTime})}},{key:"HandleDelete",value:(t=Br()(Ur.a.mark((function _callee2(){var e=this;return Ur.a.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Qa.d)({message:"Are you sure you want to remove this tag?",onConfirm:function(){var t=Br()(Ur.a.mark((function _callee(){return Ur.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:e.props.entry.RemoveEntry(e.state.entryId);case 1:case"end":return t.stop()}}),_callee)})));return function onConfirm(){return t.apply(this,arguments)}}()});case 2:case"end":return t.stop()}}),_callee2)}))),function HandleDelete(){return t.apply(this,arguments)})},{key:"HandleCancel",value:function HandleCancel(){this.state.createForm?this.props.entry.ClearSelectedEntry():this.props.entry.ClearEditing()}},{key:"CurrentTimeButton",value:function CurrentTimeButton(e){var t=this;return Hr.a.createElement(Qa.g,{icon:Ko.a,label:"Set to current video time",onClick:function onClick(){var r=t.props.video.FrameToTime(t.props.video.frame);t.HandleTimeChange({target:{name:e,value:r}})}})}},{key:"render",value:function render(){var e=this.state.validText&&this.state.startTimeValid&&this.state.endTimeValid;return Hr.a.createElement("div",{className:"entry-form"},Hr.a.createElement("div",{className:"entry-details"},Hr.a.createElement("label",null,"Text"),Hr.a.createElement(ia,{name:"text",value:this.state.text,onChange:this.HandleTextChange,onKeyPress:Object(Qa.n)(this.HandleSubmit),required:!0}),Hr.a.createElement("label",null,"Start Time"),Hr.a.createElement("div",{className:"time-input"},Hr.a.createElement(ia,{type:"number",step:1e-6,name:"startTime",value:this.state.startTime,onChange:this.HandleTimeChange,onKeyPress:Object(Qa.n)(this.HandleSubmit),required:!0,className:this.state.startTimeValid?"":"invalid"}),Hr.a.createElement("div",{className:"entry-form-smpte-time"},this.props.video.TimeToSMPTE(this.state.startTime)),this.CurrentTimeButton("startTime")),Hr.a.createElement("label",null,"End Time"),Hr.a.createElement("div",{className:"time-input"},Hr.a.createElement(ia,{type:"number",step:1e-6,name:"endTime",value:this.state.endTime,onChange:this.HandleTimeChange,onKeyPress:Object(Qa.n)(this.HandleSubmit),required:!0,className:this.state.endTimeValid?"":"invalid"}),Hr.a.createElement("div",{className:"entry-form-smpte-time"},this.props.video.TimeToSMPTE(this.state.endTime)),this.CurrentTimeButton("endTime"))),Hr.a.createElement("div",{className:"entry-actions-container"},Hr.a.createElement("button",{className:"cancel-button",onClick:this.HandleCancel},"Cancel"),Hr.a.createElement("button",{className:e?"":"invalid",onClick:this.HandleSubmit},"Done")))}}]),EntryForm}(Hr.a.Component))||zo)||zo)||zo,$o=Object(Dr.b)("tracks")(Fo=Object(Dr.c)(Fo=function(e){function TrackForm(e){var t;return Cr()(this,TrackForm),(t=Pr()(this,zr()(TrackForm).call(this,e))).state={trackLabel:e.track.label,trackKey:e.track.key},t.HandleTextChange=t.HandleTextChange.bind(an()(t)),t.HandleSubmit=t.HandleSubmit.bind(an()(t)),t.HandleDelete=t.HandleDelete.bind(an()(t)),t}var t;return Rr()(TrackForm,e),jr()(TrackForm,[{key:"HandleTextChange",value:function HandleTextChange(e){this.setState(ba()({},e.target.name,e.target.value))}},{key:"HandleSubmit",value:function HandleSubmit(){this.props.tracks.EditTrack({trackId:this.props.track.trackId,label:this.state.trackLabel,key:this.state.trackKey})}},{key:"HandleDelete",value:(t=Br()(Ur.a.mark((function _callee2(){var e=this;return Ur.a.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Qa.d)({message:"Are you sure you want to remove this track?",onConfirm:function(){var t=Br()(Ur.a.mark((function _callee(){return Ur.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:e.props.tracks.RemoveTrack(e.props.track.trackId);case 1:case"end":return t.stop()}}),_callee)})));return function onConfirm(){return t.apply(this,arguments)}}()});case 2:case"end":return t.stop()}}),_callee2)}))),function HandleDelete(){return t.apply(this,arguments)})},{key:"render",value:function render(){var e=this.state.trackLabel&&this.state.trackKey;return Hr.a.createElement("div",{className:"entry-form"},Hr.a.createElement("div",{className:"entry-details"},Hr.a.createElement("label",null,"Label"),Hr.a.createElement(ia,{name:"trackLabel",value:this.state.trackLabel,onChange:this.HandleTextChange,onKeyPress:Object(Qa.n)(this.HandleSubmit),required:!0}),Hr.a.createElement("label",null,"Metadata Key"),Hr.a.createElement(ia,{name:"trackKey",value:this.state.trackKey,onChange:this.HandleTextChange,onKeyPress:Object(Qa.n)(this.HandleSubmit),required:!0})),Hr.a.createElement("div",{className:"entry-actions-container"},Hr.a.createElement("button",{className:"cancel-button",onClick:this.props.tracks.ClearEditing},"Cancel"),Hr.a.createElement("button",{className:e?"":"invalid",onClick:this.HandleSubmit},"Done")),Hr.a.createElement("div",{className:"delete-button"},Hr.a.createElement("button",{onClick:this.HandleDelete},"Remove Track")))}}]),TrackForm}(Hr.a.Component))||Fo)||Fo;$o.propTypes={track:co.a.object.isRequired};var Go,Xo,Yo=$o,Jo=r(100),Zo=r.n(Jo),Qo=Object(Dr.b)("video")(Go=Object(Dr.b)("tracks")(Go=Object(Dr.b)("entry")(Go=Object(Dr.c)(Go=function(e){function EntryList(e){var t;return Cr()(this,EntryList),(t=Pr()(this,zr()(EntryList).call(this,e))).state={entryStart:0,entryEnd:100,initialElementEntryId:void 0},t}return Rr()(EntryList,e),jr()(EntryList,[{key:"componentDidMount",value:function componentDidMount(){var e=this,t=this.FilteredEntries(),r=t.findIndex((function(t){return t.endTime>e.props.video.currentTime}));if(r>=0){var a=t[r].entryId,n=100*(Math.floor(r/100)+1),o=n-100;this.setState({initialElementEntryId:a,entryStart:o,entryEnd:n})}}},{key:"Filter",value:function Filter(){var e=this;return this.props.entry.selectedEntry?null:Hr.a.createElement("div",{className:"entries-filter"},Hr.a.createElement(ia,{value:this.props.entry.filter,placeholder:"Filter...",onChange:function onChange(t){return e.props.entry.SetFilter(t.target.value)}}))}},{key:"FilteredEntries",value:function FilteredEntries(){var e=this.props.entry.entries.length>0?this.props.entry.Entries():Object.values(this.props.tracks.TrackEntries(this.props.track.trackId));return this.props.entry.FilteredEntries(e)}},{key:"PlayEntry",value:function PlayEntry(e,t){var r=this;if(t)return Hr.a.createElement(Qa.g,{className:"entry-play-icon",label:"Play Segment",icon:Mn.a,onClick:function onClick(t){t.stopPropagation(),r.props.entry.PlayEntry(e)}})}},{key:"Entry",value:function Entry(e,t,r){var a,n=this,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=function onClick(){return n.props.entry.SetSelectedEntry(e.entryId)};return this.state.initialElementEntryId&&e.entryId===this.state.initialElementEntryId&&(a=function HandleScroll(e){e&&(n.setState({initialElementEntryId:void 0}),e.parentNode.scroll(0,Math.max(0,e.offsetTop-10)))}),Hr.a.createElement("div",{role:"button",tabIndex:0,onClick:i,onKeyPress:Object(Qa.n)(i),onMouseEnter:function onMouseEnter(){return n.props.entry.SetHoverEntries([e.entryId],e.startTime)},onMouseLeave:function onMouseLeave(){return n.props.entry.ClearHoverEntries()},className:"entry ".concat(t?"entry-active":""," ").concat(r?"entry-hover":""),key:"entry-".concat(e.entryId),ref:a},Hr.a.createElement("div",{className:"entry-text"},e.text," ",e.entryId),Hr.a.createElement("div",{className:"entry-time-range"},this.props.entry.TimeToSMPTE(e.startTime)," - ",this.props.entry.TimeToSMPTE(e.endTime)),this.PlayEntry(e,o))}},{key:"render",value:function render(){var e,t,r,a=this,n=this.FilteredEntries(),o=this.props.tracks.TrackEntryIntervalTree(this.props.track.trackId).search(this.props.video.currentTime,this.props.video.currentTime),i=this.props.entry.hoverEntries,l=["vtt","metadata"].includes(this.props.track.trackType);return this.props.entry.entries.length>0&&(e=Hr.a.createElement("div",{className:"entry-actions"},Hr.a.createElement(Ho,{onClick:this.props.entry.ClearEntries}),this.props.entry.entryTime)),this.state.entryStart>0&&(t=Hr.a.createElement("div",{className:"entry"},Hr.a.createElement("div",{className:"load-entries-button",onClick:function onClick(){return a.setState({entryStart:Math.max(0,a.state.entryStart-100)})}},"Load Previous..."))),n.length>this.state.entryEnd&&(r=Hr.a.createElement("div",{className:"entry"},Hr.a.createElement("div",{className:"load-entries-button",onClick:function onClick(){return a.setState({entryEnd:a.state.entryEnd+100})}},"Load More..."))),Hr.a.createElement("div",{className:"entries"},this.Filter(),e,t,n.slice(this.state.entryStart,this.state.entryEnd).map((function(e){return a.Entry(e,o.includes(e.entryId),i.includes(e.entryId),l)})),r)}}]),EntryList}(Hr.a.Component))||Go)||Go)||Go)||Go,ei=Object(Dr.b)("video")(Xo=Object(Dr.b)("tracks")(Xo=Object(Dr.b)("entry")(Xo=Object(Dr.c)(Xo=function(e){function Entries(){return Cr()(this,Entries),Pr()(this,zr()(Entries).apply(this,arguments))}return Rr()(Entries,e),jr()(Entries,[{key:"AddEntryButton",value:function AddEntryButton(){return"metadata"!==this.props.track.trackType||this.props.tracks.editingTrack||this.props.entry.editingEntry||this.props.entry.selectedEntry?null:Hr.a.createElement("div",{className:"add-entry-button"},Hr.a.createElement("button",{onClick:this.props.entry.CreateEntry},"Add Tag"))}},{key:"Header",value:function Header(){var e=this,t="metadata"===this.props.track.trackType,r=Hr.a.createElement("h4",null,this.props.track.label," - Track");switch(this.props.track.trackType){case"audio":r=Hr.a.createElement("h4",null,this.props.track.label," - Audio Track");break;case"clip":r=Hr.a.createElement("h4",null,this.props.track.label," (Trim Playout)");break;case"metadata":r=Hr.a.createElement("h4",null,this.props.track.label," - Metadata Track");break;case"preview":r=Hr.a.createElement("h4",null,this.props.track.label," - Preview Track");break;case"segments":r=Hr.a.createElement("h4",null,this.props.track.label);break;case"vtt":r=Hr.a.createElement("h4",null,this.props.track.label," - WebVTT Track")}return Hr.a.createElement("div",{onClick:t?function(){return e.props.tracks.SetEditing(e.props.track.trackId)}:void 0,tabIndex:t?0:void 0,className:"entries-header ".concat(t?"modifiable":"")},r,Hr.a.createElement("div",{className:"entries-time-range"},this.props.video.scaleMinSMPTE," - ",this.props.video.scaleMaxSMPTE),t?Hr.a.createElement(Qa.h,{className:"track-edit-icon",icon:Zo.a}):null)}},{key:"SelectedEntry",value:function SelectedEntry(){return this.props.entry.editingEntry?Hr.a.createElement(qo,null):Hr.a.createElement(Wo,null)}},{key:"Content",value:function Content(){return this.props.tracks.editingTrack?Hr.a.createElement(Yo,{track:this.props.track}):this.props.entry.selectedEntry?this.SelectedEntry():Hr.a.createElement(Qo,{track:this.props.track})}},{key:"render",value:function render(){return Hr.a.createElement("div",{className:"entries-container"},this.Header(),this.AddEntryButton(),this.Content())}}]),Entries}(Hr.a.Component))||Xo)||Xo)||Xo)||Xo;ei.propTypes={track:co.a.object.isRequired};var ti,ri,ai=ei,ni=Object(Dr.b)("video")(ti=Object(Dr.b)("tracks")(ti=Object(Dr.c)(ti=function(e){function SidePanel(){return Cr()(this,SidePanel),Pr()(this,zr()(SidePanel).apply(this,arguments))}return Rr()(SidePanel,e),jr()(SidePanel,[{key:"Entries",value:function Entries(){if(!this.props.tracks.selectedTrack)return null;var e=this.props.tracks.SelectedTrack();return Hr.a.createElement(ai,{track:e,key:"entries-".concat(e.trackId)})}},{key:"render",value:function render(){return Hr.a.createElement(vo.ResizableBox,{className:"side-panel ".concat(this.props.tracks.selectedTrack?"":"hidden"),height:1/0,width:500,handle:Hr.a.createElement("div",{className:"resize-handle"})},Hr.a.createElement("div",{className:"side-panel-content"},this.Entries()))}}]),SidePanel}(Hr.a.Component))||ti)||ti)||ti,oi=Object(Dr.b)("root")(ri=Object(Dr.b)("video")(ri=Object(Dr.b)("menu")(ri=Object(Dr.b)("keyboardControls")(ri=Object(Dr.c)(ri=function(e){function App(){return Cr()(this,App),Pr()(this,zr()(App).apply(this,arguments))}return Rr()(App,e),jr()(App,[{key:"render",value:function render(){if(window.self!==window.top)return this.props.root.client?Hr.a.createElement("div",{tabIndex:0,onKeyDown:this.props.keyboardControls.HandleModifiers,onKeyUp:this.props.keyboardControls.HandleModifiers,onKeyPress:this.props.keyboardControls.HandleInput,className:"video-editor"},Hr.a.createElement(Tn,null),Hr.a.createElement(Vo,null),Hr.a.createElement("div",{className:"video-level",key:"video-".concat(this.props.root.videoStore.source)},this.props.menu.error?Hr.a.createElement("div",{className:"error-message"},"Error: ",this.props.menu.error):null,Hr.a.createElement(ni,null),Hr.a.createElement(yo,{key:"video-".concat(this.props.video.videoKey)})),Hr.a.createElement(Lo,{key:"timeline-".concat(this.props.video.versionHash)})):null;window.location=Lr()(EluvioConfiguration.coreUrl,"/",window.location.hash)}}]),App}(Hr.a.Component))||ri)||ri)||ri)||ri)||ri;Object(Nr.render)(Hr.a.createElement(Hr.a.Fragment,null,Hr.a.createElement(Dr.a,a,Hr.a.createElement(oi,null)),Hr.a.createElement("div",{className:"app-version"},EluvioConfiguration.version)),document.getElementById("app"))},43:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"></path></svg>'},44:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg>'},45:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-left"><polyline points="15 18 9 12 15 6"></polyline></svg>'},46:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevrons-left"><polyline points="11 17 6 12 11 7"></polyline><polyline points="18 17 13 12 18 7"></polyline></svg>'},83:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>'},84:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x-circle"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>'},85:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path d="M20 7v10H4V7h16m0-2H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2zm0 3h2v2h-2zM8 8h2v2H8zm0 3h2v2H8zm-3 0h2v2H5zm0-3h2v2H5zm3 6h8v2H8zm6-3h2v2h-2zm0-3h2v2h-2zm3 3h2v2h-2zm0-3h2v2h-2z" fill="#626262"></path></svg>'},86:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-save"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>'},87:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-upload"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>'},88:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-image"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>'},89:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14H9V8h2v8zm4 0h-2V8h2v8z"></path></svg>'},90:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-maximize"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path></svg>'},91:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minimize"><path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path></svg>'},92:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-volume-x"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line></svg>'},93:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-volume-1"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>'},94:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-volume-2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>'},95:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevrons-right"><polyline points="13 17 18 12 13 7"></polyline><polyline points="6 17 11 12 6 7"></polyline></svg>'},96:function(e,t,r){e.exports=function(){return new Worker(r.p+"2e1a56ed535b24e28a28.worker.js")}},97:function(e,t,r){e.exports=function(){return new Worker(r.p+"e853813b928456a0bb34.worker.js")}},98:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-layers"><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline></svg>'},99:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>'}});