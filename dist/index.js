!function(e){function webpackJsonpCallback(t){for(var i,o,a=t[0],s=t[1],c=t[2],u=0,d=[];u<a.length;u++)o=a[u],r[o]&&d.push(r[o][0]),r[o]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);for(l&&l(t);d.length;)d.shift()();return n.push.apply(n,c||[]),checkDeferredModules()}function checkDeferredModules(){for(var e,t=0;t<n.length;t++){for(var i=n[t],o=!0,a=1;a<i.length;a++){var l=i[a];0!==r[l]&&(o=!1)}o&&(n.splice(t--,1),e=__webpack_require__(__webpack_require__.s=i[0]))}return e}var t={},r={1:0},n=[];function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}__webpack_require__.e=function requireEnsure(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise(function(t,i){n=r[e]=[t,i]});t.push(n[2]=i);var o,a=document.createElement("script");a.charset="utf-8",a.timeout=120,__webpack_require__.nc&&a.setAttribute("nonce",__webpack_require__.nc),a.src=function jsonpScriptSrc(e){return __webpack_require__.p+""+({0:"elv-client-js",2:"vendors~elv-client-js"}[e]||e)+".bundle.js"}(e),o=function(t){a.onerror=a.onload=null,clearTimeout(l);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+i+": "+o+")");s.type=i,s.request=o,n[1](s)}r[e]=void 0}};var l=setTimeout(function(){o({type:"timeout",target:a})},12e4);a.onerror=a.onload=o,document.head.appendChild(a)}return Promise.all(t)},__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)__webpack_require__.d(r,n,function(t){return e[t]}.bind(null,n));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__.oe=function(e){throw console.error(e),e};var i=window.webpackJsonp=window.webpackJsonp||[],o=i.push.bind(i);i.push=webpackJsonpCallback,i=i.slice();for(var a=0;a<i.length;a++)webpackJsonpCallback(i[a]);var l=o;n.push([453,3]),checkDeferredModules()}({181:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>'},182:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path d="M20 7v10H4V7h16m0-2H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2zm0 3h2v2h-2zM8 8h2v2H8zm0 3h2v2H8zm-3 0h2v2H5zm0-3h2v2H5zm3 6h8v2H8zm6-3h2v2h-2zm0-3h2v2h-2zm3 3h2v2h-2zm0-3h2v2h-2z" fill="#626262"></path></svg>'},184:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14H9V8h2v8zm4 0h-2V8h2v8z"></path></svg>'},185:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-maximize"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path></svg>'},186:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minimize"><path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path></svg>'},187:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-volume-x"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line></svg>'},188:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-volume-1"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>'},189:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-volume-2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>'},190:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg>'},191:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevrons-right"><polyline points="13 17 18 12 13 7"></polyline><polyline points="6 17 11 12 6 7"></polyline></svg>'},192:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-left"><polyline points="15 18 9 12 15 6"></polyline></svg>'},201:function(e,t,r){var n=r(202);"string"==typeof n&&(n=[[e.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r(29)(n,i);n.locals&&(e.exports=n.locals)},202:function(e,t,r){(t=e.exports=r(26)(!1)).i(r(203),""),t.push([e.i,'*{box-sizing:border-box}html,body{background-color:#fff;color:#222;font-family:-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;height:100%;margin:0;padding:0}h1{font-size:28px;font-weight:bold;margin:0}h2{font-size:24px;font-weight:bold;margin:0}h3{font-size:20px;font-weight:normal;margin:0}h3.header-with-loader{align-items:center;display:flex;height:30px;justify-content:space-between}h4{color:#222;font-size:16px;font-weight:normal;margin:8px 0 4px}a{text-decoration:none}a,a:visited{color:#555}a.link{display:block}a.image-link{display:flex}ul{display:flex;list-style-type:none;margin:0;padding:0}ul li{display:inline}select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:url("data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0Ljk1IDEwIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2ZmZjt9LmNscy0ye2ZpbGw6IzQ0NDt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPmFycm93czwvdGl0bGU+PHJlY3QgY2xhc3M9ImNscy0xIiB3aWR0aD0iNC45NSIgaGVpZ2h0PSIxMCIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMiIgcG9pbnRzPSIxLjQxIDQuNjcgMi40OCAzLjE4IDMuNTQgNC42NyAxLjQxIDQuNjciLz48cG9seWdvbiBjbGFzcz0iY2xzLTIiIHBvaW50cz0iMy41NCA1LjMzIDIuNDggNi44MiAxLjQxIDUuMzMgMy41NCA1LjMzIi8+PC9zdmc+") no-repeat 98% 50%;border:1px solid #ccc;border-radius:0;cursor:pointer;font-size:16px;height:32px;padding:0 0 0 4px;width:250px}input{height:32px}input,textarea,pre{border:1px solid #ddd;padding:0 4px}pre{font-family:"SFMono-Regular",Consolas,"Liberation Mono",Menlo,Courier,monospace;margin:0;overflow:auto;padding:12px 8px;white-space:pre-wrap;word-wrap:break-word}.-elv-copyable{cursor:pointer}html{font-size:16px;overflow-x:hidden}@media screen and (min-width: 1000px){html{font-size:18px}}@media screen and (min-width: 2000px){html{font-size:20px}}html,body,.app,.video-editor{background-color:#131315;min-height:100%}body{font-size:.8rem;height:auto}body *{color:#f0f0f0}.app{padding-bottom:128px}.mono{font-family:monospace}.hidden{display:none !important}.-elv-tooltip.-elv-tooltip{background-color:#2c2a28;border:1px solid #666;color:#f0f0f0}.rc-slider-tooltip{background-color:#2c2a28;border:1px solid #666;color:#f0f0f0}button{background-color:#131315;border:1px solid #3a3a3a;cursor:pointer;font-size:.7rem;padding:8px 16px}button:not(.-elv-icon-button):hover{background-color:#0c89c7}button:focus{outline:1px dotted #acacac}.async-component-loading,.async-component-error{align-items:center;display:flex;height:50%;justify-content:center;overflow-wrap:anywhere;padding:0 8px;width:100%}.async-component-error{color:#f33}.wrap{max-width:100%;word-break:break-all;word-wrap:break-word}.resize-handle{background-color:#131315;padding:3px;position:absolute;z-index:100}.resize-handle:hover{background-color:#0c89c7}.checkbox-container{cursor:pointer;padding:8px}.checkbox{background-color:#000;border-radius:3px;height:.5rem;outline:1px solid #3a3a3a;position:relative;width:.5rem}.checkbox.checked::after{color:#0c89c7;content:"\\2713";font-size:.8rem;font-weight:600;left:0;position:absolute;top:-0.3rem}.back-button{border-radius:3px;width:50px}.back-button:hover{background-color:#2c2a28}header{height:55px}.menu-container{background-color:#131315;box-shadow:3px -3px 8px #000;height:calc(100% - 55px);max-height:calc(100% - 55px);position:absolute;width:600px;z-index:1000}.video-level{display:flex}.side-panel{min-width:20rem;overflow:hidden;width:500px;word-wrap:break-word}.side-panel .resize-handle{cursor:e-resize;height:100%;right:0;top:0;width:0}.side-panel .side-panel-content{height:100%;left:0;position:absolute;top:0;width:100%}.video-component .resize-handle{bottom:-6px;cursor:s-resize;height:0;width:100%}.timeline{margin-right:24px}header{align-items:center;display:flex;justify-content:space-between}header .header-left,header .header-right{align-items:center;display:flex;height:100%;width:auto}header .menu-button{height:100%;margin-right:8px;z-index:1001}header .menu-button svg{padding:8px}header .menu-button-active{background-color:#2c2a28}header .menu-button-active svg{color:#acacac}header h1{font-size:1rem;font-weight:normal}header .keyboard-controls-icon{cursor:pointer;margin-right:16px}.keyboard-control-info{font-size:.5rem;min-width:500px;width:500px}.keyboard-control-info h3{font-size:.7rem;padding:16px 0 8px}.keyboard-control-info .control-group{align-items:center;display:flex;padding:8px 0}.keyboard-control-info .control-group:not(:last-child){border-bottom:1px solid #444}.keyboard-control-info .control-group .control-labels{display:flex;flex-direction:column;width:150px}.keyboard-control-info .control-group label{color:#acacac}.keyboard-controls-tooltip.keyboard-controls-tooltip{min-width:500px;padding-bottom:16px}.video-component{display:flex;flex-direction:column;flex-shrink:1;max-height:100%;width:100%}.video-component .video-seek,.video-component .video-scale{margin-bottom:8px;padding:0 24px}.video-container{align-items:center;background-color:#000;display:flex;flex-grow:1;height:100%;justify-content:center;max-height:100%;position:relative}.video-container .video-poster{cursor:pointer;height:100%;left:0;margin:auto;max-height:100%;-o-object-fit:contain;object-fit:contain;position:absolute;top:0;width:100%;z-index:100}.video-container video{cursor:pointer;display:block;flex:1 1 auto;height:100%;max-height:100%;max-width:100%;position:absolute}.video-controls-loading{height:300px}.video-seek .-elv-slider,.video-scale .-elv-slider{background-color:#000}.video-seek .-elv-slider-active,.video-scale .-elv-slider-active{background-color:#464646}.video-seek .-elv-slider-overlay,.video-scale .-elv-slider-overlay{outline:1px solid #3a3a3a}.video-seek .video-seek-handle{background-color:transparent}.video-seek .-elv-slider-active{background-color:#0c89c7}.video-seek .-elv-slider-marks-container .-elv-slider-mark-notch{background-color:transparent}.video-scale .video-seek-handle{background-color:#0c89c7}.video-time,.video-controls{align-items:center;color:#acacac;display:flex;font-size:.8rem;font-weight:lighter;justify-content:center}.video-time{height:35px;text-align:center;width:100%}.video-controls-container{background-color:#000}.video-controls-container:not(.fullscreen){flex-grow:1}.video-controls{height:45px;padding-bottom:8px;position:relative}.video-controls button{align-items:center;display:flex;height:1.4rem;justify-content:center;width:50px}.video-controls button svg{color:#acacac;fill:#acacac;stroke:transparent}.video-controls button:active svg,.video-controls button:hover svg{color:#0c89c7;fill:#0c89c7}.video-controls button.video-control-play-pause{height:1.8rem}.video-controls button.video-control-play-pause svg{stroke:none}.video-controls select{font-size:.8rem}.video-controls select:active,.video-controls select:hover{color:#0c89c7}.video-controls .controls{height:100%}.video-controls .left-controls,.video-controls .right-controls{align-items:center;display:flex;height:100%;position:absolute}.video-controls .left-controls{left:16px}.video-controls .right-controls{right:16px}.video-controls .center-controls{align-items:center;display:flex;justify-content:center}.video-controls .video-volume-icon{height:1rem;margin-right:16px}.video-controls .video-volume-icon svg{stroke:#acacac}.video-controls .video-volume-icon svg:hover{stroke:#0c89c7}.video-controls .video-volume-controls{align-items:center;display:flex;margin-right:16px;width:125px}.video-controls .video-volume-controls .-elv-slider-active{background-color:#acacac}.video-controls .video-volume-controls .-elv-slider-handle{background-color:transparent}select{background:none;border:0;color:#acacac;left:8px;width:80px}select option{background-color:#2c2a28}select.video-playback-rate{width:50px}.tracks-container{position:relative;width:100%}.track-time-indicator{background-color:#0fafff;margin-left:-1px;opacity:0.6;pointer-events:none;position:absolute;width:4px}.track-time-indicator .track-time-handle{border-radius:100%;height:5px;position:absolute;top:0;width:5px}.track-container{display:flex}.track-container canvas{cursor:pointer}.track-lane{border-bottom:1px solid #3a3a3a;display:grid;grid-template-columns:13rem 1fr;height:2.5rem}.track-lane:first-child,.track-lane:last-child{border-bottom:0}.track-lane .-elv-slider .-elv-slider-mark{font-size:.5rem}.track-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;align-items:center;display:flex;font-size:.8rem;height:100%;padding-left:16px;position:relative;width:100%}.track-label .track-toggle{position:absolute;right:8px;top:0}.track-label-selected{background-color:#2c2a28}.track-label-clickable{cursor:pointer}.video-scale-lane{border:0;margin-top:1px}.track-entry-timestamps,.track-entry-content{padding:8px 16px;white-space:normal;word-wrap:break-spaces}.track-entry-timestamps{display:flex;justify-content:center}.track-entry-content{white-space:normal;word-wrap:break-word}.track-entry-content:empty{border:0;display:none}.entries-container{display:flex;flex-direction:column;height:100%;text-align:center}.entries-container h4{margin:0}.entries-container .entries-header{background-color:#2c2a28;padding:16px 0}.entries-container .entries-time-range{color:#8c8c8c;font-size:.7rem}.entries-container .entries{flex-grow:1;max-height:100%;overflow-y:scroll}.entries-container .entry-time-range{color:#6c6c6c}.entries-container .load-entries-button{align-items:center;display:flex;flex-grow:1;justify-content:center;width:100%}.entries-container .entry{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;align-items:center;border-bottom:1px solid #3a3a3a;cursor:pointer;display:flex;flex-direction:column;font-size:.7rem;justify-content:center;min-height:3.5rem;padding:8px;position:relative;text-align:center}.entries-container .entry.entry-hover,.entries-container .entry:hover{background-color:#2c2a28}.entries-container .entry.entry-active{background-color:#0c89c7}.entries-container .entry.entry-active .entry-time-range{color:#fff}.entries-container .entry:not(.entry-active) .entry-play-icon:hover{fill:#0c89c7}.entries-container .entry-play-icon{fill:#fff;padding:8px;position:absolute;right:0;top:0}.entries-container .entry-play-icon svg{height:.8rem;width:.8rem}.entries-container .entry-actions{align-items:center;border-bottom:1px solid #3a3a3a;display:flex;margin-top:7px;padding:8px 16px}.entries-container .entry-actions .back-button{margin-right:8px}.entry-container{padding:12px 16px;text-align:left}.entry-container .entry-details{display:grid;grid-row-gap:4px;grid-template-columns:8rem 2fr}.entry-container .entry-details label{color:#8c8c8c}.entry-container .entry-play,.entry-container .entry-back{margin-bottom:16px}.entry-container .entry-back{align-items:center;display:flex}.menu-container{background-color:#131315;min-height:500px;padding:16px 0 0}.menu-container .menu-header{align-self:center;display:flex;margin:0 0 16px 8px}.menu-container .menu-back{border-radius:3px;width:50px}.menu-container .menu-back:hover{background-color:#2c2a28}.menu-container h4{align-items:center;display:flex;flex-grow:1;font-size:1rem;margin:0;padding:0 8px;text-align:center}.menu-container .menu-entries{height:100%;max-height:100%;overflow-y:auto}.menu-container ul{flex-direction:column}.menu-container li{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;max-width:100%;padding:12px 16px}.menu-container li:hover{background-color:#0c89c7}.menu-container h5{font-style:italic;font-weight:normal;padding:0 16px}.menu-container .menu-empty{margin-top:64px;text-align:center;width:100%}.menu-container .video-info{display:grid;font-size:.7rem;grid-row-gap:16px;grid-template-columns:minmax(50px, 2fr) minmax(100px, 5fr);max-width:100%;padding:16px}.overlay-container{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;z-index:9999}\n',""])},453:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"root",function(){return or}),r.d(n,"entry",function(){return ar}),r.d(n,"keyboardControls",function(){return lr}),r.d(n,"menu",function(){return sr}),r.d(n,"overlay",function(){return cr}),r.d(n,"tracks",function(){return ur}),r.d(n,"video",function(){return dr});var i,o,a,l,s,c,u,d,p,h,m,v,y,f,b,k,g,T,S,x,w,E,C,O,P,M,j,z,_,R,I,D,F,N,H,A,L,V,U,W,B,q,G,K,X,$,Y,Z,J,Q,ee,te,re,ne,ie,oe,ae,le,se,ce,ue,de,pe,he,me,ve,ye,fe,be,ke,ge,Te,Se,xe,we,Ee,Ce,Oe,Pe,Me,je,ze,_e,Re,Ie,De,Fe,Ne,He,Ae,Le,Ve,Ue,We,Be,qe,Ge,Ke,Xe,$e,Ye,Ze,Je,Qe,et,tt,rt,nt,it,ot,at,lt,st,ct=r(8),ut=r.n(ct),dt=r(7),pt=r.n(dt),ht=r(12),mt=r.n(ht),vt=r(13),yt=r.n(vt),ft=r(14),bt=r.n(ft),kt=(r(201),r(0)),gt=r.n(kt),Tt=r(32),St=r(6),xt=r(5),wt=r.n(xt),Et=r(16),Ct=r.n(Et),Ot=r(9),Pt=r.n(Ot),Mt=r(3),jt=r.n(Mt),zt=(r(53),r(2)),_t=(i=zt.d.bound,o=zt.d.bound,a=zt.d.bound,l=zt.d.bound,s=zt.d.bound,c=zt.d.bound,u=zt.d.bound,d=zt.d.bound,p=zt.d.bound,h=zt.d.bound,m=zt.d.bound,v=zt.d.bound,y=function(){function ControlStore(e){ut()(this,ControlStore),Pt()(this,"controlMap",f,this),Pt()(this,"controls",b,this),this.rootStore=e,this.InitializeControlMap()}return pt()(ControlStore,[{key:"InitializeControlMap",value:function InitializeControlMap(){var e={};Object.values(this.controls).forEach(function(t){t.forEach(function(t){var r=t[0],n=t[1];r.forEach(function(t){e[t]={},n.action&&(e[t].action=n.action.action),n.shiftAction&&(e[t].shiftAction=n.shiftAction.action),n.altAction&&(e[t].altAction=n.altAction.action)})})}),this.controlMap=e}},{key:"RegisterControlListener",value:function RegisterControlListener(){document.addEventListener("keydown",this.HandleInput)}},{key:"UnregisterControlListener",value:function UnregisterControlListener(){document.removeEventListener("keydown",this.HandleInput)}},{key:"HandleInput",value:function HandleInput(e){var t,r=this.controlMap[e.key]||{};!t&&e.shiftKey&&(t=r.shiftAction),!t&&e.altKey&&(t=r.altAction),!t&&e.ctrlKey&&(t=r.controlAction),t||(t=r.action),t&&(e.preventDefault(),t(e))}},{key:"SeekFrames",value:function SeekFrames(e){var t=e.frames,r=e.seconds;this.rootStore.videoStore.SeekFrames({frames:t,seconds:r})}},{key:"PlayPause",value:function PlayPause(){this.rootStore.videoStore.PlayPause()}},{key:"PlayCurrentEntry",value:function PlayCurrentEntry(){this.rootStore.entryStore.PlayCurrentEntry()}},{key:"SetPlaybackRate",value:function SetPlaybackRate(e){this.rootStore.videoStore.SetPlaybackRate(e)}},{key:"ChangePlaybackRate",value:function ChangePlaybackRate(e){this.rootStore.videoStore.ChangePlaybackRate(e)}},{key:"ToggleFullscreen",value:function ToggleFullscreen(){this.rootStore.videoStore.ToggleFullscreen()}},{key:"ToggleMuted",value:function ToggleMuted(){this.rootStore.videoStore.ToggleMuted()}},{key:"SetVolume",value:function SetVolume(e){this.rootStore.videoStore.SetVolume(e*this.rootStore.videoStore.scale)}},{key:"ChangeVolume",value:function ChangeVolume(e){this.rootStore.videoStore.ChangeVolume(e*this.rootStore.videoStore.scale)}},{key:"ToggleTrackByIndex",value:function ToggleTrackByIndex(e){this.rootStore.trackStore.ToggleTrackByIndex(parseInt(e)-1)}}]),ControlStore}(),f=jt()(y.prototype,"controlMap",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jt()(y.prototype,"InitializeControlMap",[i],Object.getOwnPropertyDescriptor(y.prototype,"InitializeControlMap"),y.prototype),jt()(y.prototype,"HandleInput",[o],Object.getOwnPropertyDescriptor(y.prototype,"HandleInput"),y.prototype),jt()(y.prototype,"SeekFrames",[a],Object.getOwnPropertyDescriptor(y.prototype,"SeekFrames"),y.prototype),jt()(y.prototype,"PlayPause",[l],Object.getOwnPropertyDescriptor(y.prototype,"PlayPause"),y.prototype),jt()(y.prototype,"PlayCurrentEntry",[s],Object.getOwnPropertyDescriptor(y.prototype,"PlayCurrentEntry"),y.prototype),jt()(y.prototype,"SetPlaybackRate",[c],Object.getOwnPropertyDescriptor(y.prototype,"SetPlaybackRate"),y.prototype),jt()(y.prototype,"ChangePlaybackRate",[u],Object.getOwnPropertyDescriptor(y.prototype,"ChangePlaybackRate"),y.prototype),jt()(y.prototype,"ToggleFullscreen",[d],Object.getOwnPropertyDescriptor(y.prototype,"ToggleFullscreen"),y.prototype),jt()(y.prototype,"ToggleMuted",[p],Object.getOwnPropertyDescriptor(y.prototype,"ToggleMuted"),y.prototype),jt()(y.prototype,"SetVolume",[h],Object.getOwnPropertyDescriptor(y.prototype,"SetVolume"),y.prototype),jt()(y.prototype,"ChangeVolume",[m],Object.getOwnPropertyDescriptor(y.prototype,"ChangeVolume"),y.prototype),jt()(y.prototype,"ToggleTrackByIndex",[v],Object.getOwnPropertyDescriptor(y.prototype,"ToggleTrackByIndex"),y.prototype),b=jt()(y.prototype,"controls",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){var e=this;return{Playback:[[["p"," "],{action:{description:"Play/Pause",action:this.PlayPause}}],[["l"],{action:{description:"Play current entry",action:this.PlayCurrentEntry}}],[["f"],{action:{description:"Toggle fullscreen",action:this.ToggleFullscreen}}],[["-"],{action:{description:"Reduce playback rate by 0.5x",action:function action(){return e.ChangePlaybackRate(-.5)}}}],[["["],{action:{description:"Reduce playback rate by 0.1x",action:function action(){return e.ChangePlaybackRate(-.1)}}}],[["="],{action:{description:"Reset playback rate to normal",action:function action(){return e.SetPlaybackRate(1)}}}],[["]"],{action:{description:"Increase playback rate by 0.1x",action:function action(){return e.ChangePlaybackRate(.1)}}}],[["+"],{action:{description:"Increase playback rate by 0.5x",action:function action(){return e.ChangePlaybackRate(.5)}}}]],Volume:[[["m"],{action:{description:"Toggle mute",action:this.ToggleMuted}}],[["ArrowDown"],{action:{description:"Reduce volume by 5%",action:function action(){return e.ChangeVolume(-.05)}},shiftAction:{description:"Reduce volume by 25%",action:function action(){return e.ChangeVolume(-.25)}}}],[["ArrowUp"],{action:{description:"Increase volume by 5%",action:function action(){return e.ChangeVolume(.05)}},shiftAction:{description:"Increase volume by 25%",action:function action(){return e.ChangeVolume(.25)}}}]],Seeking:[[["ArrowLeft"],{action:{description:"Go back 1 frame",action:function action(){return e.SeekFrames({frames:-1})}},shiftAction:{description:"Go back 1 second",action:function action(){return e.SeekFrames({seconds:-1})}},altAction:{description:"Go back 1 minute",action:function action(){return e.SeekFrames({seconds:-60})}}}],[["ArrowRight"],{action:{description:"Go forward 1 frame",action:function action(){return e.SeekFrames({frames:1})}},shiftAction:{description:"Go forward 1 second",action:function action(){return e.SeekFrames({seconds:1})}},altAction:{description:"Go forward 1 minute",action:function action(){return e.SeekFrames({seconds:60})}}}]],Tracks:[[["1","2","3","4","5","6","7","8","9"],{keyLabel:"1-9",action:{description:"Toggle the specified track",action:function action(t){return e.ToggleTrackByIndex(t.key)}}}]]}}}),y),Rt=(k=zt.d.bound,g=zt.d.bound,T=zt.d.bound,S=zt.d.bound,x=zt.d.bound,w=zt.d.bound,E=zt.d.bound,C=zt.d.bound,O=function(){function EntryStore(e){ut()(this,EntryStore),Pt()(this,"entries",P,this),Pt()(this,"entryTime",M,this),Pt()(this,"selectedEntry",j,this),Pt()(this,"hoverEntries",z,this),Pt()(this,"hoverTime",_,this),this.rootStore=e}return pt()(EntryStore,[{key:"Reset",value:function Reset(){this.entries=[],this.entryTime=void 0,this.selectedEntry=void 0,this.hoverEntries=[],this.hoverTime=void 0}},{key:"PlayCurrentEntry",value:function PlayCurrentEntry(){this.selectedEntry&&this.rootStore.videoStore.PlaySegment(this.rootStore.videoStore.TimeToFrame(this.selectedEntry.startTime),this.rootStore.videoStore.TimeToFrame(this.selectedEntry.endTime))}},{key:"PlayEntry",value:function PlayEntry(e){e&&this.rootStore.videoStore.PlaySegment(this.rootStore.videoStore.TimeToFrame(e.startTime),this.rootStore.videoStore.TimeToFrame(e.endTime))}},{key:"SetSelectedEntry",value:function SetSelectedEntry(e){this.selectedEntry=e}},{key:"ClearSelectedEntry",value:function ClearSelectedEntry(){this.selectedEntry=void 0}},{key:"SetEntries",value:function SetEntries(e,t){this.ClearSelectedEntry(),this.entries=e||[],this.entryTime=t}},{key:"SetHoverEntries",value:function SetHoverEntries(e,t){this.hoverEntries=e||[],this.hoverTime=t}},{key:"ClearHoverEntries",value:function ClearHoverEntries(){this.hoverEntries=[],this.hoverTime=void 0}},{key:"ClearEntries",value:function ClearEntries(){this.entries=[],this.hoverEntries=[]}}]),EntryStore}(),P=jt()(O.prototype,"entries",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),M=jt()(O.prototype,"entryTime",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=jt()(O.prototype,"selectedEntry",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=jt()(O.prototype,"hoverEntries",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),_=jt()(O.prototype,"hoverTime",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jt()(O.prototype,"PlayCurrentEntry",[k],Object.getOwnPropertyDescriptor(O.prototype,"PlayCurrentEntry"),O.prototype),jt()(O.prototype,"PlayEntry",[g],Object.getOwnPropertyDescriptor(O.prototype,"PlayEntry"),O.prototype),jt()(O.prototype,"SetSelectedEntry",[T],Object.getOwnPropertyDescriptor(O.prototype,"SetSelectedEntry"),O.prototype),jt()(O.prototype,"ClearSelectedEntry",[S],Object.getOwnPropertyDescriptor(O.prototype,"ClearSelectedEntry"),O.prototype),jt()(O.prototype,"SetEntries",[x],Object.getOwnPropertyDescriptor(O.prototype,"SetEntries"),O.prototype),jt()(O.prototype,"SetHoverEntries",[w],Object.getOwnPropertyDescriptor(O.prototype,"SetHoverEntries"),O.prototype),jt()(O.prototype,"ClearHoverEntries",[E],Object.getOwnPropertyDescriptor(O.prototype,"ClearHoverEntries"),O.prototype),jt()(O.prototype,"ClearEntries",[C],Object.getOwnPropertyDescriptor(O.prototype,"ClearEntries"),O.prototype),O),It=(R=zt.d.bound,I=zt.d.bound,D=zt.d.bound,F=zt.d.bound,N=function(){function MenuStore(e){ut()(this,MenuStore),Pt()(this,"showMenu",H,this),Pt()(this,"libraries",A,this),Pt()(this,"objects",L,this),Pt()(this,"selectedObject",V,this),Pt()(this,"SelectVideo",U,this),Pt()(this,"ListLibraries",W,this),Pt()(this,"ListObjects",B,this),this.rootStore=e}return pt()(MenuStore,[{key:"FilterVideos",value:function(){var e=Ct()(wt.a.mark(function _callee2(e){var t,r,n=this;return wt.a.wrap(function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:return t=["ABR Master"],r={},e.forEach(function(e){return r[e.versions[0].type]=!1}),i.next=5,Promise.all(Object.keys(r).map(function(){var e=Ct()(wt.a.mark(function _callee(e){var i;return wt.a.wrap(function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n.rootStore.client.ContentObjectMetadata({versionHash:e,metadataSubtree:"name"});case 2:i=o.sent,r[e]=t.includes(i);case 4:case"end":return o.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}()));case 5:return i.abrupt("return",e.filter(function(e){return r[e.versions[0].type]}));case 6:case"end":return i.stop()}},_callee2)}));return function FilterVideos(t){return e.apply(this,arguments)}}()},{key:"ToggleMenu",value:function ToggleMenu(){this.showMenu=!this.showMenu}}]),MenuStore}(),H=jt()(N.prototype,"showMenu",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),A=jt()(N.prototype,"libraries",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),L=jt()(N.prototype,"objects",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return{}}}),V=jt()(N.prototype,"selectedObject",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jt()(N.prototype,"ToggleMenu",[R],Object.getOwnPropertyDescriptor(N.prototype,"ToggleMenu"),N.prototype),U=jt()(N.prototype,"SelectVideo",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Object(zt.h)(wt.a.mark(function _callee3(e){var t,r,n,i,o;return wt.a.wrap(function _callee3$(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.libraryId,r=e.objectId,n=e.versionHash,this.rootStore.Reset(),this.rootStore.videoStore.IndicateLoading(),n&&(r=this.rootStore.client.utils.DecodeVersionHash(n).objectId),t){a.next=8;break}return a.next=7,this.rootStore.client.ContentObjectLibraryId({objectId:r});case 7:t=a.sent;case 8:return a.next=10,this.rootStore.client.ContentObject({objectId:r,versionHash:n});case 10:return i=a.sent,n||(n=i.hash),a.next=14,this.rootStore.client.ContentObjectMetadata({objectId:r,versionHash:n});case 14:o=a.sent,this.selectedObject={libraryId:t,objectId:i.id,versionHash:n,name:o.name||n,metadata:o},this.rootStore.videoStore.SetVideo(this.selectedObject);case 17:case"end":return a.stop()}},_callee3,this)}))}}),W=jt()(N.prototype,"ListLibraries",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Object(zt.h)(wt.a.mark(function _callee5(){var e,t=this;return wt.a.wrap(function _callee5$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.rootStore.client.ContentLibraries();case 2:return e=r.sent,r.next=5,Promise.all(e.map(function(){var e=Ct()(wt.a.mark(function _callee4(e){var r;return wt.a.wrap(function _callee4$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.rootStore.client.ContentObjectMetadata({libraryId:e,objectId:e.replace("ilib","iq__")});case 3:return(r=n.sent).name=r.name||e,n.abrupt("return",{libraryId:e,metadata:r});case 8:return n.prev=8,n.t0=n.catch(0),n.abrupt("return",void 0);case 11:case"end":return n.stop()}},_callee4,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()));case 5:r.t0=function(e){return e},r.t1=function(e,t){return e.metadata.name.toLowerCase()>t.metadata.name.toLowerCase()?1:-1},this.libraries=r.sent.filter(r.t0).sort(r.t1);case 8:case"end":return r.stop()}},_callee5,this)}))}}),B=jt()(N.prototype,"ListObjects",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Object(zt.h)(wt.a.mark(function _callee7(e){var t,r;return wt.a.wrap(function _callee7$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.rootStore.client.ContentObjects({libraryId:e,filterOptions:{select:["description","image","name","player_background","public"],limit:1e3,sort:"name"}});case 2:return t=n.sent,r=t.contents,n.next=6,this.FilterVideos(r);case 6:return r=n.sent,n.next=9,Promise.all(r.map(function(){var e=Ct()(wt.a.mark(function _callee6(e){var t;return wt.a.wrap(function _callee6$(r){for(;;)switch(r.prev=r.next){case 0:return t=e.versions[0],r.abrupt("return",{objectId:t.id,versionHash:t.hash,metadata:t.meta});case 2:case"end":return r.stop()}},_callee6)}));return function(t){return e.apply(this,arguments)}}()));case 9:this.objects[e]=n.sent;case 10:case"end":return n.stop()}},_callee7,this)}))}}),N),Dt=r(36),Ft=r.n(Dt),Nt=0,Ht=function(){function Id(){ut()(this,Id)}return pt()(Id,null,[{key:"next",value:function next(){return++Nt}},{key:"nextTag",value:function nextTag(){return"id-"+ ++Nt}}]),Id}(),At=(q=zt.d.bound,G=function(){function OverlayStore(e){ut()(this,OverlayStore),Pt()(this,"overlayTracks",K,this),this.client=e}return pt()(OverlayStore,[{key:"Reset",value:function Reset(){this.overlayTracks=[]}},{key:"AddOverlayTracks",value:function AddOverlayTracks(e){if(e){var t=Object.keys(e).map(function(t){var r=e[t];if(r)return Object.keys(r.object_detection).map(function(e){return Ft()({entryId:Ht.next(),entryType:"overlay",label:"Overlay Test",text:e},r.object_detection[e][0])})}).filter(function(e){return e});this.overlayTracks.push({label:"Overlay Test",entries:t})}}}]),OverlayStore}(),K=jt()(G.prototype,"overlayTracks",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),jt()(G.prototype,"AddOverlayTracks",[q],Object.getOwnPropertyDescriptor(G.prototype,"AddOverlayTracks"),G.prototype),G),Lt=r(38),Vt=r.n(Lt),Ut=r(125),Wt=r(126),Bt=r.n(Wt),qt=r(172),Gt=r(78),Kt=r.n(Gt),Xt=(X=zt.d.bound,$=zt.d.bound,Y=zt.d.bound,Z=zt.d.bound,J=zt.d.bound,Q=zt.d.bound,ee=zt.d.bound,te=zt.d.bound,re=function(){function Tracks(e){var t=this;ut()(this,Tracks),Pt()(this,"tracks",ne,this),Pt()(this,"audioTracks",ie,this),Pt()(this,"subtitleTracks",oe,this),Pt()(this,"metadataTracks",ae,this),Pt()(this,"selectedTrack",le,this),this.AddSubtitleTracksFromHLSPlaylist=Object(zt.h)(wt.a.mark(function _callee2(e,t){var r,n=this;return wt.a.wrap(function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:if(t){i.next=2;break}return i.abrupt("return",[]);case 2:return r=[],i.next=5,Promise.all(Object.keys(t).map(function(){var i=Ct()(wt.a.mark(function _callee(i){var o,a,l,s,c,u,d;return wt.a.wrap(function _callee$(p){for(;;)switch(p.prev=p.next){case 0:return o=t[i].uri,a=Kt()(e,o),p.next=4,n.ParseHLSPlaylist(a);case 4:if(l=p.sent){p.next=7;break}return p.abrupt("return");case 7:return s=l.segments[0].uri,c=a.split("?")[0].replace("playlist.m3u8",""),u=Kt()(c,s),p.next=12,fetch(u);case 12:return p.next=14,p.sent.text();case 14:d=p.sent,r.push({label:i,vttData:d});case 16:case"end":return p.stop()}},_callee)}));return function(e){return i.apply(this,arguments)}}()));case 5:return i.abrupt("return",r);case 6:case"end":return i.stop()}},_callee2)})),Pt()(this,"AddTracksFromHLSPlaylist",se,this),this.DownloadAudioTrack=function(){var e=Ct()(wt.a.mark(function _callee4(e,r){var n;return wt.a.wrap(function _callee4$(i){for(;;)switch(i.prev=i.next){case 0:return n=new Uint8Array([]),i.next=3,new Promise(function(){var i=Ct()(wt.a.mark(function _callee3(i){return wt.a.wrap(function _callee3$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.rootStore.client.DownloadPart({libraryId:e.libraryId,versionHash:e.versionHash,partHash:r,chunked:!0,format:"arrayBuffer",callback:function callback(e){var t=e.chunk,r=e.bytesFinished,o=e.bytesTotal;n=new Uint8Array([].concat(Vt()(n),Vt()(new Uint8Array(t)))),r===o&&i()}});case 2:case"end":return o.stop()}},_callee3)}));return function(e){return i.apply(this,arguments)}}());case 3:return i.abrupt("return",n.buffer);case 4:case"end":return i.stop()}},_callee4)}));return function(t,r){return e.apply(this,arguments)}}(),this.AddAudioTracks=Object(zt.h)(wt.a.mark(function _callee6(e){var t,r,n,i,o,a=this;return wt.a.wrap(function _callee6$(l){for(;;)switch(l.prev=l.next){case 0:t=e.reduce(function(e,t){return e+t.duration.float},0),r=Math.ceil(Math.max(5,50*(5e3-t)/5e3)),n=this.rootStore.menuStore.selectedObject,this.audioTracks=[{trackId:Ht.next(),label:"Audio",trackType:"audio",entries:[]}],i=wt.a.mark(function _callee5(t){var i,o,l,s,c,u,d,p,h,m;return wt.a.wrap(function _callee5$(v){for(;;)switch(v.prev=v.next){case 0:return i=e[t],v.next=3,a.DownloadAudioTrack(n,i.source);case 3:return o=v.sent,l=new AudioContext,s=l.createBufferSource(),v.next=8,new Promise(function(e){l.decodeAudioData(o,function(t){s.buffer=t,e()})});case 8:c=Math.ceil(s.buffer.duration*r),u=s.buffer.getChannelData(0),d=Math.round(u.length/c),p=1/r,h=i.timeline_start.float,m=Vt()(Array(c).keys()).map(function(e){return u.slice(e*d,(e+1)*d)}).map(function(e,t){return{startTime:h+t*p,endTime:h+(t+1)*p,max:Math.max.apply(Math,Vt()(e))}}),a.audioTracks[0].entries=[].concat(Vt()(a.audioTracks[0].entries),Vt()(m));case 15:case"end":return v.stop()}},_callee5)}),o=0;case 6:if(!(o<e.length)){l.next=11;break}return l.delegateYield(i(o),"t0",8);case 8:o++,l.next=6;break;case 11:case"end":return l.stop()}},_callee6,this)})),Pt()(this,"AddTracksFromTags",ce,this),this.rootStore=e}return pt()(Tracks,[{key:"Reset",value:function Reset(){this.tracks=[],this.audioTracks=[],this.subtitleTracks=[],this.metadataTracks=[],this.selectedTrack=void 0}},{key:"ParseHLSPlaylist",value:function(){var e=Ct()(wt.a.mark(function _callee7(e){var t,r;return wt.a.wrap(function _callee7$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e);case 2:return n.next=4,n.sent.text();case 4:return t=n.sent,(r=new qt.a).push(t),r.end(),n.abrupt("return",r.manifest);case 9:case"end":return n.stop()}},_callee7)}));return function ParseHLSPlaylist(t){return e.apply(this,arguments)}}()},{key:"Cue",value:function Cue(e){var t,r,n=e.entryType,i=e.label,o=e.startTime,a=e.endTime,l=e.text,s=e.entry;return"string"==typeof o&&o.split(":").length>1?(t=o,r=a,o=this.rootStore.videoStore.videoHandler.SMPTEToTime(o),a=this.rootStore.videoStore.videoHandler.SMPTEToTime(a)):(t=this.rootStore.videoStore.videoHandler.TimeToSMPTE(o),r=this.rootStore.videoStore.videoHandler.TimeToSMPTE(a)),{entryId:Ht.next(),entryType:n,label:i,startTime:o,endTime:a,startTimeSMPTE:t,endTimeSMPTE:r,text:l,entry:s}}},{key:"FormatVTTCue",value:function FormatVTTCue(e,t){var r={};return["align","endTime","id","line","lineAlign","position","positionAlign","region","size","snapToLines","startTime","text","vertical"].forEach(function(e){return r[e]=t[e]}),this.Cue({entryType:"vtt",label:e,startTime:t.startTime,endTime:t.endTime,text:t.text,entry:r})}},{key:"ParseVTTTrack",value:function ParseVTTTrack(e){var t=this,r=new Ut.WebVTT.Parser(window,Ut.WebVTT.StringDecoder()),n=[];r.oncue=function(r){return n.push(t.FormatVTTCue(e.label,r))};try{r.parse(e.vttData),r.flush()}catch(t){console.error("VTT cue parse failure on track ".concat(e.label,": ")),console.error(t)}return n}},{key:"ParseTagTrack",value:function ParseTagTrack(e){var t=this;return Object.keys(e.tags).map(function(r){return e.tags[r].map(function(n){var i=n.start,o=n.end;return t.Cue({label:e.label,startTime:i,endTime:o,text:r})})}).flat().sort(function(e,t){return e.startTime>t.startTime?1:-1})}},{key:"InitializeTracks",value:function(){var e=Ct()(wt.a.mark(function _callee8(){var e,t=this;return wt.a.wrap(function _callee8$(r){for(;;)switch(r.prev=r.next){case 0:e=[],this.subtitleTracks.map(function(r){var n=t.ParseVTTTrack(r),i=new Bt.a;n.forEach(function(e){return i.insert(e.startTime,e.endTime,e)}),e.push(Ft()({trackId:Ht.next()},r,{trackType:"vtt",entries:n,intervalTree:i}))}),this.metadataTracks.map(function(r){var n=t.ParseTagTrack(r),i=new Bt.a;n.forEach(function(e){return i.insert(e.startTime,e.endTime,e)}),e.push({trackId:Ht.next(),label:r.label,trackType:"metadata",entries:n,intervalTree:i})}),Object(zt.o)(function(){return t.tracks=e});case 4:case"end":return r.stop()}},_callee8,this)}));return function InitializeTracks(){return e.apply(this,arguments)}}()},{key:"SelectedTrack",value:function SelectedTrack(){var e=this;if(this.selectedTrack)return this.tracks.find(function(t){return t.trackId===e.selectedTrack})}},{key:"SetSelectedTrack",value:function SetSelectedTrack(e){this.selectedTrack=e}},{key:"ClearSelectedTrack",value:function ClearSelectedTrack(){this.selectedTrack=void 0}},{key:"ToggleTrack",value:function ToggleTrack(e){var t=this.tracks.find(function(t){return t.label===e});t&&(t.active=this.rootStore.videoStore.ToggleTrack(e))}},{key:"ToggleTrackByIndex",value:function ToggleTrackByIndex(e){var t=this.tracks[e];t&&(t.active=this.rootStore.videoStore.ToggleTrack(t.label))}}]),Tracks}(),ne=jt()(re.prototype,"tracks",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),ie=jt()(re.prototype,"audioTracks",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),oe=jt()(re.prototype,"subtitleTracks",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),ae=jt()(re.prototype,"metadataTracks",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),le=jt()(re.prototype,"selectedTrack",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=jt()(re.prototype,"AddTracksFromHLSPlaylist",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Object(zt.h)(wt.a.mark(function _callee9(e){var t,r;return wt.a.wrap(function _callee9$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.split("?")[0].replace("playlist.m3u8",""),n.next=4,this.ParseHLSPlaylist(e);case 4:return r=n.sent,n.next=7,this.AddSubtitleTracksFromHLSPlaylist(t,r.mediaGroups.SUBTITLES.subs);case 7:this.subtitleTracks=n.sent,n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),console.error("Error parsing subtitle tracks from playlist:"),console.error(n.t0);case 14:case"end":return n.stop()}},_callee9,this,[[0,10]])}))}}),ce=jt()(re.prototype,"AddTracksFromTags",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){var e=this;return function(t){if(!t)return null;e.metadataTracks=[{label:"Tags",tags:t}]}}}),jt()(re.prototype,"InitializeTracks",[Y],Object.getOwnPropertyDescriptor(re.prototype,"InitializeTracks"),re.prototype),jt()(re.prototype,"SelectedTrack",[Z],Object.getOwnPropertyDescriptor(re.prototype,"SelectedTrack"),re.prototype),jt()(re.prototype,"SetSelectedTrack",[J],Object.getOwnPropertyDescriptor(re.prototype,"SetSelectedTrack"),re.prototype),jt()(re.prototype,"ClearSelectedTrack",[Q],Object.getOwnPropertyDescriptor(re.prototype,"ClearSelectedTrack"),re.prototype),jt()(re.prototype,"ToggleTrack",[ee],Object.getOwnPropertyDescriptor(re.prototype,"ToggleTrack"),re.prototype),jt()(re.prototype,"ToggleTrackByIndex",[te],Object.getOwnPropertyDescriptor(re.prototype,"ToggleTrackByIndex"),re.prototype),re),$t=r(10),Yt=r.n($t),Zt={NTSC:Yt()(3e4).div(1001),NTSCFilm:Yt()(24e3).div(1001),NTSCHD:Yt()(6e4).div(1001),PAL:Yt()(25),PALHD:Yt()(50),Film:Yt()(24),Web:Yt()(30),High:Yt()(60)},Jt=function(){function FrameAccurateVideo(e){var t=e.video,r=e.frameRate,n=e.dropFrame,i=void 0!==n&&n,o=e.callback;ut()(this,FrameAccurateVideo),this.video=t,this.frameRate=r||Zt.NTSC,this.dropFrame=i&&(r.equals(Zt.NTSC)||r.equals(Zt.NTSC_HD)),this.callback=o,o&&this.RegisterCallback(),this.Update=this.Update.bind(this)}return pt()(FrameAccurateVideo,[{key:"ProgressToTime",value:function ProgressToTime(e){var t=this.video.duration||0;return Yt()(e).mul(t).valueOf()}},{key:"ProgressToSMPTE",value:function ProgressToSMPTE(e){var t=this.video.duration||0;return this.TimeToSMPTE(Yt()(e).mul(t))}},{key:"TimeToFrame",value:function TimeToFrame(e){return Yt()(e).mul(this.frameRate)}},{key:"TimeToSMPTE",value:function TimeToSMPTE(e){return this.SMPTE(this.TimeToFrame(e))}},{key:"SMPTEToFrame",value:function SMPTEToFrame(e){var t=e.split(":").reverse(),r=Yt()(t[0]),n=Yt()(t[1]),i=Yt()(t[2]),o=Yt()(t[3]||0),a=0;if(this.dropFrame){var l=this.frameRate.equals(Zt.NTSCHD)?Yt()(4):Yt()(2),s=i.add(o.mul(60)),c=s.div(10).floor();a=s.mul(l).sub(c.mul(l))}return r.add(n.mul(this.frameRate.round())).add(i.mul(this.frameRate.round()).mul(60)).add(o.mul(this.frameRate.round()).mul(60).mul(60)).sub(a).valueOf()}},{key:"SMPTEToTime",value:function SMPTEToTime(e){var t=this.SMPTEToFrame(e);return Yt()(t).div(this.frameRate).valueOf()}},{key:"Frame",value:function Frame(){return this.TimeToFrame(this.video.currentTime)}},{key:"Pad",value:function Pad(e){return(e=e.valueOf())<10?"0".concat(e):e}},{key:"SMPTE",value:function SMPTE(e){var t=(e?Yt()(e):this.Frame()).floor(),r=this.frameRate.round();if(this.dropFrame){var n=this.frameRate.equals(Zt.NTSCHD)?Yt()(4):Yt()(2),i=Yt()("17982").mul(n).div(2),o=Yt()("1798").mul(n).div(2),a=t.div(i).floor(),l=t.mod(i);l.compare(n)<0&&(l=l.add(n)),t=t.add(n.mul(a).mul("9").add(n.mul(l.sub(n).div(o).floor())))}var s=t.div(r.mul(3600)).mod(24).floor(),c=t.div(r.mul(60)).mod(60).floor(),u=t.div(r).mod(60).floor(),d=t.mod(r).floor();return"".concat(this.Pad(s),":").concat(this.Pad(c),":").concat(this.Pad(u),":").concat(this.Pad(d))}},{key:"Progress",value:function Progress(){return isNaN(this.video.duration)?Yt()(0):Yt()(this.video.currentTime).div(this.video.duration)}},{key:"TotalFrames",value:function TotalFrames(){return Yt()(this.video.duration).mul(this.frameRate).valueOf()}},{key:"SeekForward",value:function SeekForward(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.Frame();this.Seek(t.add(e))}},{key:"SeekBackward",value:function SeekBackward(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=Yt()(this.Frame());this.Seek(t.sub(e))}},{key:"SeekPercentage",value:function SeekPercentage(e){this.Seek(Yt()(this.TotalFrames()).mul(e))}},{key:"Seek",value:function Seek(e){e=Yt()(e).floor().add(.5),this.video.currentTime=e.div(this.frameRate).valueOf().toString()}},{key:"Update",value:function Update(){this.callback&&this.callback({frame:this.Frame().valueOf(),smpte:this.SMPTE(),progress:this.Progress().valueOf()})}},{key:"RegisterCallback",value:function RegisterCallback(){var e=this;this.Update(),this.video.onseeked=function(t){return e.Update(t)},this.video.onseeking=function(t){return e.Update(t)},this.video.onplay=function(){return e.AddListener()},this.video.onpause=function(){e.Seek(e.Frame().add(e.frameRate.valueOf()>30?2:1)),e.RemoveListener()},this.video.onended=function(){return e.RemoveListener()},this.video.onratechange=function(){e.listener&&(e.RemoveListener(),e.AddListener())}}},{key:"RemoveCallback",value:function RemoveCallback(){this.video.onseeked=void 0,this.video.onseeking=void 0,this.video.onplay=void 0,this.video.onpause=void 0,this.video.onended=void 0,this.video.onratechange=void 0}},{key:"AddListener",value:function AddListener(){var e=this,t=Yt()(this.video.playbackRate).mul(this.frameRate).add(Yt()("0.00001")),r=Math.min(Math.max(Yt()(1e3).div(t).valueOf(),20),100);this.listener=setInterval(function(){e.video.paused||e.video.ended||e.Update()},r)}},{key:"RemoveListener",value:function RemoveListener(){this.listener&&clearInterval(this.listener),this.Update()}}]),FrameAccurateVideo}(),Qt=function SafeTraverse(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];1===r.length&&Array.isArray(r[0])&&(r=r[0]);for(var i=e,o=0;o<r.length;o++)if(void 0===(i=i[r[o]]))return;return i},er=(ue=zt.d.bound,de=zt.d.bound,pe=zt.d.bound,he=zt.d.bound,me=zt.d.bound,ve=zt.d.bound,ye=zt.d.bound,fe=zt.d.bound,be=zt.d.bound,ke=zt.d.bound,ge=zt.d.bound,Te=zt.d.bound,Se=zt.d.bound,xe=zt.d.bound,we=zt.d.bound,Ee=zt.d.bound,Ce=zt.d.bound,Oe=zt.d.bound,Pe=zt.d.bound,Me=zt.d.bound,je=zt.d.bound,ze=zt.d.bound,_e=zt.d.bound,Re=zt.d.bound,Ie=zt.d.bound,De=function(){function VideoStore(e){ut()(this,VideoStore),Pt()(this,"contentObject",Fe,this),Pt()(this,"name",Ne,this),Pt()(this,"initialized",He,this),Pt()(this,"loading",Ae,this),Pt()(this,"source",Le,this),Pt()(this,"poster",Ve,this),Pt()(this,"dropFrame",Ue,this),Pt()(this,"frameRateKey",We,this),Pt()(this,"frameRate",Be,this),Pt()(this,"currentTime",qe,this),Pt()(this,"frame",Ge,this),Pt()(this,"smpte",Ke,this),Pt()(this,"duration",Xe,this),Pt()(this,"playing",$e,this),Pt()(this,"playbackRate",Ye,this),Pt()(this,"fullScreen",Ze,this),Pt()(this,"volume",Je,this),Pt()(this,"muted",Qe,this),Pt()(this,"seek",et,this),Pt()(this,"scale",tt,this),Pt()(this,"scaleMin",rt,this),Pt()(this,"scaleMax",nt,this),Pt()(this,"segmentEnd",it,this),Pt()(this,"SetVideo",ot,this),Pt()(this,"Initialize",at,this),this.rootStore=e}return pt()(VideoStore,[{key:"scaleMinTime",get:function get(){return this.videoHandler.ProgressToTime(this.scaleMin/this.scale)}},{key:"scaleMaxTime",get:function get(){return this.videoHandler.ProgressToTime(this.scaleMax/this.scale)}},{key:"scaleMinSMPTE",get:function get(){return this.videoHandler.ProgressToSMPTE(this.scaleMin/this.scale)}},{key:"scaleMaxSMPTE",get:function get(){return this.videoHandler.ProgressToSMPTE(this.scaleMax/this.scale)}}]),pt()(VideoStore,[{key:"Reset",value:function Reset(){this.initialized=!1,this.videoHandler&&(this.videoHandler.RemoveCallback(),this.videoHandler=void 0),this.source=void 0,this.poster=void 0,this.dropFrame=!1,this.frameRateKey="NTSC",this.frameRate=Zt.NTSC,this.currentTime=0,this.frame=0,this.smpte="00:00:00:00",this.playing=!1,this.playbackRate=1,this.fullScreen=!1,this.volume=100,this.muted=!1,this.seek=0,this.scale=1e4,this.scaleMin=0,this.scaleMax=this.scale,this.segmentEnd=void 0,this.rootStore.keyboardControlStore.UnregisterControlListener(),this.rootStore.entryStore.ClearEntries()}},{key:"IndicateLoading",value:function IndicateLoading(){this.loading=!0,this.Reset()}},{key:"ToggleTrack",value:function ToggleTrack(e){var t=Array.from(this.video.textTracks).find(function(t){return t.label===e});if(t)return"showing"===t.mode?(t.mode="disabled",!1):(t.mode="showing",!0)}},{key:"ProgressToSMPTE",value:function ProgressToSMPTE(e){return this.videoHandler.ProgressToSMPTE(e/this.scale)}},{key:"TimeToSMPTE",value:function TimeToSMPTE(e){return this.videoHandler.TimeToSMPTE(e)}},{key:"TimeToFrame",value:function TimeToFrame(e){return this.videoHandler.TimeToFrame(e)}},{key:"Update",value:function Update(e){var t=e.frame,r=e.smpte,n=e.progress;if(this.video){if(this.frame=Math.floor(t),this.smpte=r,this.seek=n*this.scale,this.duration=this.video.duration,this.currentTime=this.video.currentTime,this.seek<this.scaleMin&&(this.scaleMin=this.seek),this.playing&&this.seek>this.scaleMax){var i=this.scaleMax-this.scaleMin;this.scaleMax=Math.min(this.scale,this.scaleMax+i/2),this.scaleMin=this.scaleMax-i}this.segmentEnd&&this.frame>=this.segmentEnd-1&&(this.video.pause(),this.Seek(this.segmentEnd-1),this.segmentEnd=void 0)}}},{key:"PlayPause",value:function PlayPause(){this.video.paused?this.video.play():this.video.pause()}},{key:"SetPlaybackRate",value:function SetPlaybackRate(e){this.video.playbackRate=e}},{key:"ChangePlaybackRate",value:function ChangePlaybackRate(e){this.video.playbackRate=Math.min(4,Math.max(.1,this.video.playbackRate+e))}},{key:"SetFrameRate",value:function SetFrameRate(e){this.frameRateKey=e,this.frameRate=Zt[e],this.videoHandler.frameRate=this.frameRate,this.videoHandler.Update()}},{key:"SetDropFrame",value:function SetDropFrame(e){this.dropFrame=e,this.videoHandler.dropFrame=this.dropFrame,this.videoHandler.Update()}},{key:"ScrollScale",value:function ScrollScale(e,t){if(this.video&&this.video.duration){var r,n;if((t*=-.003*this.scale)>0){var i=this.scale*e,o=this.scaleMax-this.scaleMin;r=t*(i-this.scaleMin)/o,n=t*(this.scaleMax-i)/o}else r=t,n=t;this.SetScale(Math.max(0,this.scaleMin+r),this.seek,Math.min(this.scale,this.scaleMax-n))}}},{key:"SetScale",value:function SetScale(e,t,r){var n=.015*this.scale;r-e<n||(e>=t?e===this.scaleMin?e=Math.max(0,e-n):t+=n:t>=r&&(r===this.scaleMax?r=Math.min(this.scale,r+n):t-=n),this.scaleMin=e,this.scaleMax=r,this.SeekPercentage(t/this.scale,!1))}},{key:"PlaySegment",value:function PlaySegment(e,t){this.Seek(e),this.segmentEnd=t,this.video.play()}},{key:"Seek",value:function Seek(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this.segmentEnd=void 0),this.videoHandler.Seek(e)}},{key:"SeekPercentage",value:function SeekPercentage(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this.segmentEnd=void 0),this.videoHandler.SeekPercentage(e)}},{key:"SeekFrames",value:function SeekFrames(e){var t=e.frames,r=void 0===t?0:t,n=e.seconds,i=void 0===n?0:n;i&&(r+=this.frameRate.ceil().mul(i));var o=this.frame+r,a=o/this.videoHandler.TotalFrames()*this.scale,l=.015*this.scale,s=this.scaleMax-this.scaleMin;a<=this.scaleMin?(this.scaleMin=Math.max(0,a-l),this.scaleMax=this.scaleMin+s):a>=this.scaleMax&&(this.scaleMax=Math.min(this.scale,a+l),this.scaleMin=this.scaleMax-s),this.videoHandler.Seek(o)}},{key:"ScrollVolume",value:function ScrollVolume(e){var t=this.muted?0:this.volume;this.SetVolume(Math.max(0,Math.min(this.scale,t-e*this.scale*.01)))}},{key:"SetVolume",value:function SetVolume(e){this.video.volume=e/this.scale,0===e?this.video.muted=!0:this.video.muted&&0!==e&&(this.video.muted=!1)}},{key:"ChangeVolume",value:function ChangeVolume(e){this.video.volume=Math.max(0,Math.min(1,this.video.volume+e/this.scale)),0===this.video.volume?this.video.muted=!0:this.video.muted&&0!==this.video.volume&&(this.video.muted=!1)}},{key:"SetMuted",value:function SetMuted(e){this.video.muted=e,0===this.video.volume&&(this.video.volume=.5)}},{key:"ToggleMuted",value:function ToggleMuted(){this.video.muted=!this.video.muted,0===this.video.volume&&(this.video.volume=.5)}},{key:"ToggleFullscreen",value:function ToggleFullscreen(){if(this.fullScreen)document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();else{var e=this.video.parentElement.parentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}}}]),VideoStore}(),Fe=jt()(De.prototype,"contentObject",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ne=jt()(De.prototype,"name",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),He=jt()(De.prototype,"initialized",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),Ae=jt()(De.prototype,"loading",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),Le=jt()(De.prototype,"source",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ve=jt()(De.prototype,"poster",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue=jt()(De.prototype,"dropFrame",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),We=jt()(De.prototype,"frameRateKey",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"NTSC"}}),Be=jt()(De.prototype,"frameRate",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Zt.NTSC}}),qe=jt()(De.prototype,"currentTime",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),Ge=jt()(De.prototype,"frame",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),Ke=jt()(De.prototype,"smpte",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return"00:00:00:00"}}),Xe=jt()(De.prototype,"duration",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$e=jt()(De.prototype,"playing",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),Ye=jt()(De.prototype,"playbackRate",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 1}}),Ze=jt()(De.prototype,"fullScreen",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),Je=jt()(De.prototype,"volume",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 100}}),Qe=jt()(De.prototype,"muted",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!1}}),et=jt()(De.prototype,"seek",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),tt=jt()(De.prototype,"scale",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 1e4}}),rt=jt()(De.prototype,"scaleMin",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return 0}}),nt=jt()(De.prototype,"scaleMax",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return this.scale}}),it=jt()(De.prototype,"segmentEnd",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){}}),jt()(De.prototype,"scaleMinTime",[zt.e],Object.getOwnPropertyDescriptor(De.prototype,"scaleMinTime"),De.prototype),jt()(De.prototype,"scaleMaxTime",[zt.e],Object.getOwnPropertyDescriptor(De.prototype,"scaleMaxTime"),De.prototype),jt()(De.prototype,"scaleMinSMPTE",[zt.e],Object.getOwnPropertyDescriptor(De.prototype,"scaleMinSMPTE"),De.prototype),jt()(De.prototype,"scaleMaxSMPTE",[zt.e],Object.getOwnPropertyDescriptor(De.prototype,"scaleMaxSMPTE"),De.prototype),jt()(De.prototype,"Reset",[ue],Object.getOwnPropertyDescriptor(De.prototype,"Reset"),De.prototype),jt()(De.prototype,"IndicateLoading",[de],Object.getOwnPropertyDescriptor(De.prototype,"IndicateLoading"),De.prototype),ot=jt()(De.prototype,"SetVideo",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Object(zt.h)(wt.a.mark(function _callee(e){var t,r,n;return wt.a.wrap(function _callee$(i){for(;;)switch(i.prev=i.next){case 0:return this.name=e.name,i.next=3,this.rootStore.client.PlayoutOptions({versionHash:e.versionHash,protocols:["hls"],drms:["aes-128"]});case 3:if(t=i.sent,r=t.hls.playoutUrl,!e.metadata.image&&!e.metadata.public.image){i.next=9;break}return i.next=8,this.rootStore.client.Rep({versionHash:e.versionHash,rep:"player_background",channelAuth:!0});case 8:n=i.sent;case 9:return i.next=11,this.rootStore.trackStore.AddTracksFromHLSPlaylist(r);case 11:return i.next=13,this.rootStore.trackStore.AddTracksFromTags(e.metadata.segment_level_tags);case 13:return i.next=15,this.rootStore.overlayStore.AddOverlayTracks(e.metadata.frame_level_tags);case 15:this.source=r,this.poster=n,this.loading=!1;case 18:case"end":return i.stop()}},_callee,this)}))}}),at=jt()(De.prototype,"Initialize",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return Object(zt.h)(wt.a.mark(function _callee2(e){var t,r,n=this;return wt.a.wrap(function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:return this.video=e,t=new Jt({video:e,frameRate:this.frameRate,dropFrame:this.dropFrame,callback:this.Update}),this.videoHandler=t,i.next=5,this.rootStore.trackStore.InitializeTracks();case 5:e.load(),e.parentElement.parentElement.onfullscreenchange=Object(zt.d)(function(){return n.fullScreen=!n.fullScreen}),this.volume=e.volume,this.muted=e.muted,this.video.addEventListener("pause",Object(zt.d)(function(){return n.playing=!1})),this.video.addEventListener("play",Object(zt.d)(function(){return n.playing=!0})),this.video.addEventListener("ratechange",Object(zt.d)(function(){return n.playbackRate=n.video.playbackRate})),this.video.addEventListener("volumechange",Object(zt.d)(function(){n.volume=e.volume*n.scale,n.muted=e.muted})),this.video.addEventListener("click",Object(zt.d)(function(){n.click?(clearTimeout(n.click),n.click=void 0,n.ToggleFullscreen()):n.click=setTimeout(function(){n.video.paused?n.video.play():n.video.pause(),n.click=void 0},200)})),this.video.addEventListener("canplaythrough",Object(zt.d)(function(){t.Update(),n.initialized=!0})),this.rootStore.keyboardControlStore.RegisterControlListener(),(r=Qt(this.rootStore.menuStore.selectedObject.metadata,"offerings","default","media_struct","streams","audio_2ch_und","sources")||Qt(this.rootStore.menuStore.selectedObject.metadata,"offerings","default","media_struct","streams","audio_2ch_eng","sources"))&&this.rootStore.trackStore.AddAudioTracks(r);case 18:case"end":return i.stop()}},_callee2,this)}))}}),jt()(De.prototype,"ProgressToSMPTE",[me],Object.getOwnPropertyDescriptor(De.prototype,"ProgressToSMPTE"),De.prototype),jt()(De.prototype,"TimeToSMPTE",[ve],Object.getOwnPropertyDescriptor(De.prototype,"TimeToSMPTE"),De.prototype),jt()(De.prototype,"TimeToFrame",[ye],Object.getOwnPropertyDescriptor(De.prototype,"TimeToFrame"),De.prototype),jt()(De.prototype,"Update",[fe],Object.getOwnPropertyDescriptor(De.prototype,"Update"),De.prototype),jt()(De.prototype,"PlayPause",[be],Object.getOwnPropertyDescriptor(De.prototype,"PlayPause"),De.prototype),jt()(De.prototype,"SetPlaybackRate",[ke],Object.getOwnPropertyDescriptor(De.prototype,"SetPlaybackRate"),De.prototype),jt()(De.prototype,"ChangePlaybackRate",[ge],Object.getOwnPropertyDescriptor(De.prototype,"ChangePlaybackRate"),De.prototype),jt()(De.prototype,"SetFrameRate",[Te],Object.getOwnPropertyDescriptor(De.prototype,"SetFrameRate"),De.prototype),jt()(De.prototype,"SetDropFrame",[Se],Object.getOwnPropertyDescriptor(De.prototype,"SetDropFrame"),De.prototype),jt()(De.prototype,"ScrollScale",[xe],Object.getOwnPropertyDescriptor(De.prototype,"ScrollScale"),De.prototype),jt()(De.prototype,"SetScale",[we],Object.getOwnPropertyDescriptor(De.prototype,"SetScale"),De.prototype),jt()(De.prototype,"PlaySegment",[Ee],Object.getOwnPropertyDescriptor(De.prototype,"PlaySegment"),De.prototype),jt()(De.prototype,"Seek",[Ce],Object.getOwnPropertyDescriptor(De.prototype,"Seek"),De.prototype),jt()(De.prototype,"SeekPercentage",[Oe],Object.getOwnPropertyDescriptor(De.prototype,"SeekPercentage"),De.prototype),jt()(De.prototype,"SeekFrames",[Pe],Object.getOwnPropertyDescriptor(De.prototype,"SeekFrames"),De.prototype),jt()(De.prototype,"ScrollVolume",[Me],Object.getOwnPropertyDescriptor(De.prototype,"ScrollVolume"),De.prototype),jt()(De.prototype,"SetVolume",[je],Object.getOwnPropertyDescriptor(De.prototype,"SetVolume"),De.prototype),jt()(De.prototype,"ChangeVolume",[ze],Object.getOwnPropertyDescriptor(De.prototype,"ChangeVolume"),De.prototype),jt()(De.prototype,"SetMuted",[_e],Object.getOwnPropertyDescriptor(De.prototype,"SetMuted"),De.prototype),jt()(De.prototype,"ToggleMuted",[Re],Object.getOwnPropertyDescriptor(De.prototype,"ToggleMuted"),De.prototype),jt()(De.prototype,"ToggleFullscreen",[Ie],Object.getOwnPropertyDescriptor(De.prototype,"ToggleFullscreen"),De.prototype),De),tr=r(131);Object(zt.f)({enforceActions:"always"});var rr,nr,ir=new(lt=function(){function RootStore(){ut()(this,RootStore),Pt()(this,"client",st,this),this.keyboardControlStore=new _t(this),this.entryStore=new Rt(this),this.menuStore=new It(this),this.overlayStore=new At(this),this.trackStore=new Xt(this),this.videoStore=new er(this),this.InitializeClient()}return pt()(RootStore,[{key:"Reset",value:function Reset(){[this.videoStore,this.entryStore,this.overlayStore,this.trackStore].forEach(function(e){return e.Reset()})}},{key:"InitializeClient",value:function(){var e=Ct()(wt.a.mark(function _callee(){var e,t,n,i,o,a,l=this;return wt.a.wrap(function _callee$(s){for(;;)switch(s.prev=s.next){case 0:if(window.self!==window.top){s.next=17;break}return s.next=3,Promise.all([r.e(2),r.e(0)]).then(r.t.bind(null,634,7));case 3:if(t=s.sent.ElvClient,(i=window.location.search.split("?")[1])&&(i=i.split("&")).forEach(function(e){"privateKey"===e.split("=")[0]&&(n=e.split("=")[1])}),n){s.next=8;break}throw Error("No private key specified");case 8:return s.next=10,t.FromConfigurationUrl({configUrl:EluvioConfiguration["config-url"]});case 10:return e=s.sent,o=e.GenerateWallet(),a=o.AddAccount({privateKey:n}),s.next=15,e.SetSigner({signer:a});case 15:s.next=18;break;case 17:e=new tr.FrameClient({target:window.parent,timeout:30});case 18:Object(zt.o)(function(){return l.client=e});case 19:case"end":return s.stop()}},_callee)}));return function InitializeClient(){return e.apply(this,arguments)}}()}]),RootStore}(),st=jt()(lt.prototype,"client",[zt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jt()(lt.prototype,"InitializeClient",[zt.d],Object.getOwnPropertyDescriptor(lt.prototype,"InitializeClient"),lt.prototype),lt),or=ir,ar=ir.entryStore,lr=ir.keyboardControlStore,sr=ir.menuStore,cr=ir.overlayStore,ur=ir.trackStore,dr=ir.videoStore,pr=r(15),hr=r(181),mr=r.n(hr),vr=r(182),yr=r.n(vr),fr=r(45),br={" ":"Space",ArrowLeft:"←",ArrowUp:"↑",ArrowRight:"→",ArrowDown:"↓"},kr=Object(St.b)("keyboardControls")(rr=Object(St.c)(rr=function(e){function KeyboardControls(){return ut()(this,KeyboardControls),mt()(this,yt()(KeyboardControls).apply(this,arguments))}return bt()(KeyboardControls,e),pt()(KeyboardControls,[{key:"FormatControls",value:function FormatControls(e,t){return e.map(function(e){return e=br[e]||e.toUpperCase(),t&&(e="".concat(t," + ").concat(e)),e})}},{key:"Control",value:function Control(e,t,r){var n=(e=this.FormatControls(e,r)).map(function(e){return gt.a.createElement("label",{key:"keyboard-control-label-".concat(e),className:"control-label"},e)});return gt.a.createElement("div",{key:"keyboard-control-".concat(e),className:"control-group"},gt.a.createElement("div",{className:"control-labels"},n),gt.a.createElement("div",{className:"control-description"},t.description))}},{key:"ControlGroup",value:function ControlGroup(e,t){t.keyLabel&&(e=[t.keyLabel]);var r=[];return t.action&&r.push(this.Control(e,t.action)),t.shiftAction&&r.push(this.Control(e,t.shiftAction,"Shift")),t.altAction&&r.push(this.Control(e,t.altAction,"Alt")),r}},{key:"ControlSection",value:function ControlSection(e,t){var r=this,n=t.map(function(e){return r.ControlGroup(e[0],e[1])});return gt.a.createElement("div",{key:"keyboard-controls-".concat(e),className:"control-section"},gt.a.createElement("h3",null,e),n)}},{key:"ControlInfo",value:function ControlInfo(){var e=this,t=Object.keys(this.props.keyboardControls.controls).map(function(t){return e.ControlSection(t,e.props.keyboardControls.controls[t])});return gt.a.createElement("div",{className:"keyboard-control-info"},t)}},{key:"render",value:function render(){return gt.a.createElement("div",{className:"keyboard-controls-icon"},gt.a.createElement(fr.a,{content:this.ControlInfo(),className:"keyboard-controls-tooltip"},gt.a.createElement(pr.c,{icon:yr.a})))}}]),KeyboardControls}(gt.a.Component))||rr)||rr,gr=Object(St.b)("menu")(nr=Object(St.b)("video")(nr=Object(St.c)(nr=function(e){function Header(e){return ut()(this,Header),mt()(this,yt()(Header).call(this,e))}return bt()(Header,e),pt()(Header,[{key:"render",value:function render(){return gt.a.createElement("header",null,gt.a.createElement("div",{className:"header-left"},gt.a.createElement(pr.b,{icon:mr.a,title:"Menu",onClick:this.props.menu.ToggleMenu,className:"menu-button ".concat(this.props.menu.showMenu?"menu-button-active":"")}),gt.a.createElement("h1",{className:"header-text"},this.props.video.name||"Eluvio Video Editor")),gt.a.createElement("div",{className:"header-right"},gt.a.createElement(kr,null)))}}]),Header}(gt.a.Component))||nr)||nr)||nr,Tr=r(11),Sr=r.n(Tr),xr=r(183),wr=r.n(xr),Er=r(129),Cr=r.n(Er),Or=r(46),Pr=r.n(Or),Mr=r(184),jr=r.n(Mr),zr=r(93),_r=r.n(zr),Rr=r(185),Ir=r.n(Rr),Dr=r(186),Fr=r.n(Dr),Nr=r(187),Hr=r.n(Nr),Ar=r(188),Lr=r.n(Ar),Vr=r(189),Ur=r.n(Vr),Wr=function PlaybackRate(e){var t=Vt()(Array(40)).map(function(e,t){return Yt()(t+1).div(10)});return gt.a.createElement(pr.f,{content:gt.a.createElement("span",null,"Playback Rate")},gt.a.createElement("select",{"aria-label":"Playback Rate",className:"video-playback-rate",value:Yt()(e.video.playbackRate),onChange:function onChange(t){return e.video.SetPlaybackRate(t.target.value)}},t.map(function(e){return gt.a.createElement("option",{key:"video-rate-".concat(e),value:e},"".concat(e,"x"))})))},Br=function FrameRate(e){return gt.a.createElement(pr.f,{content:gt.a.createElement("span",null,"Frame Rate")},gt.a.createElement("select",{"aria-label":"Frame Rate",value:e.video.frameRateKey,onChange:function onChange(t){return e.video.SetFrameRate(t.target.value)}},Object.keys(Zt).map(function(e){return gt.a.createElement("option",{key:"frame-rate-".concat(e),value:e},e)})))},qr=function DropFrame(e){return"NTSC"!==e.video.frameRateKey&&"NTSCHD"!==e.video.frameRateKey?null:gt.a.createElement(pr.f,{content:gt.a.createElement("span",null,"Drop Frame Notation")},gt.a.createElement("select",{"aria-label":"Drop Frame Notation",value:e.video.dropFrame,onChange:function onChange(t){return e.video.SetDropFrame("true"===t.target.value)}},gt.a.createElement("option",{value:!1},"NDF"),gt.a.createElement("option",{value:!0},"DF")))},Gr=function PlayPause(e){var t=e.video.playing?"Pause":"Play";return gt.a.createElement(pr.f,{content:gt.a.createElement("span",null,t)},gt.a.createElement(pr.b,{className:"video-control-play-pause",label:t,icon:e.video.playing?jr.a:_r.a,onClick:e.video.PlayPause}))},Kr=function FullscreenToggle(e){var t=e.video.fullScreen?"Exit Full Screen":"Full Screen";return gt.a.createElement(pr.f,{content:gt.a.createElement("span",null,t)},gt.a.createElement(pr.b,{label:t,icon:e.video.fullScreen?Fr.a:Ir.a,onClick:e.video.ToggleFullscreen}))},Xr=function Volume(e){var t=e.video.muted||0===e.video.volume?Hr.a:e.video.volume<e.video.scale/2?Lr.a:Ur.a;return gt.a.createElement("div",{onWheel:function onWheel(t){var r=t.deltaY;return e.video.ScrollVolume(r)},className:"video-volume-controls"},gt.a.createElement(pr.f,{content:gt.a.createElement("span",null,e.video.muted?"Unmute":"Mute")},gt.a.createElement(pr.b,{icon:t,onClick:function onClick(){return e.video.SetMuted(!e.video.muted)},className:"video-volume-icon"})),gt.a.createElement(pr.e,{min:0,max:e.video.scale,value:e.video.muted?0:e.video.volume,renderToolTip:function renderToolTip(t){return"".concat(Math.floor(t/e.video.scale*100),"%")},className:"video-volume-slider",onChange:function onChange(t){return e.video.SetVolume(t)}}))},$r=function FrameControl(e){var t=e.video,r=e.frames,n=void 0===r?0:r,i=e.seconds,o=void 0===i?0:i,a=e.label,l=e.icon;return gt.a.createElement(pr.f,{content:gt.a.createElement("span",null,a)},gt.a.createElement(pr.b,{label:a,icon:l,onClick:function onClick(){t.SeekFrames({frames:n,seconds:o})}}))},Yr=function Seek(e){return gt.a.createElement(pr.e,{key:"video-progress",min:e.video.scaleMin,max:e.video.scaleMax,value:e.video.seek,handleClassName:"video-seek-handle",showMarks:!0,renderToolTip:function renderToolTip(t){return gt.a.createElement("span",null,e.video.ProgressToSMPTE(t))},onChange:function onChange(t){return e.video.SeekPercentage(Yt()(t).div(e.video.scale))},className:"video-seek"})},Zr=function Scale(e){return gt.a.createElement(pr.d,{key:"video-scale",min:0,max:e.video.scale,handles:[{position:e.video.scaleMin},{position:e.video.seek,disabled:!0,className:"video-seek-handle"},{position:e.video.scaleMax}],showMarks:!0,renderToolTip:function renderToolTip(t){return gt.a.createElement("span",null,e.video.ProgressToSMPTE(t))},onChange:function onChange(t){var r=Pr()(t,3),n=r[0],i=r[1],o=r[2];return e.video.SetScale(n,i,o)},className:"video-scale"})};qr=Object(St.b)("video")(Object(St.c)(qr)),$r=Object(St.b)("video")(Object(St.c)($r)),Br=Object(St.b)("video")(Object(St.c)(Br)),Kr=Object(St.b)("video")(Object(St.c)(Kr)),Wr=Object(St.b)("video")(Object(St.c)(Wr)),Gr=Object(St.b)("video")(Object(St.c)(Gr)),Zr=Object(St.b)("video")(Object(St.c)(Zr)),Yr=Object(St.b)("video")(Object(St.c)(Yr)),Xr=Object(St.b)("video")(Object(St.c)(Xr));var Jr,Qr,en=r(190),tn=r.n(en),rn=r(191),nn=r.n(rn),on=r(192),an=r.n(on),ln=r(94),sn=r.n(ln),cn=Object(St.b)("video")(Jr=Object(St.c)(Jr=function(e){function VideoControls(){return ut()(this,VideoControls),mt()(this,yt()(VideoControls).apply(this,arguments))}return bt()(VideoControls,e),pt()(VideoControls,[{key:"Seek",value:function Seek(){return gt.a.createElement(Yr,null)}},{key:"Scale",value:function Scale(){return this.props.video.fullScreen?gt.a.createElement(Zr,null):null}},{key:"Controls",value:function Controls(){return gt.a.createElement("div",{className:"video-controls"},gt.a.createElement("div",{className:"controls left-controls"},gt.a.createElement(Wr,null),gt.a.createElement(Br,null),gt.a.createElement(qr,null)),gt.a.createElement("div",{className:"controls center-controls"},gt.a.createElement($r,{label:"Backward 1 Second",seconds:-1,icon:sn.a}),gt.a.createElement($r,{label:"Backward 1 Frame",frames:-1,icon:an.a}),gt.a.createElement(Gr,null),gt.a.createElement($r,{label:"Forward 1 Frame",frames:1,icon:tn.a}),gt.a.createElement($r,{label:"Forward 1 Second",seconds:1,icon:nn.a})),gt.a.createElement("div",{className:"controls right-controls"},gt.a.createElement(Xr,null),gt.a.createElement(Kr,null)))}},{key:"render",value:function render(){return this.props.video.initialized?gt.a.createElement("div",{className:"video-controls-container ".concat(this.props.video.fullScreen?"fullscreen":"")},gt.a.createElement("div",{className:"mono video-time"},this.props.video.smpte),this.Controls(),this.Seek(),this.Scale()):null}}]),VideoControls}(gt.a.Component))||Jr)||Jr,un=r(50),dn=r(1),pn=r.n(dn),hn=r(72),mn=Object(St.b)("video")(Qr=Object(St.b)("overlay")(Qr=Object(St.b)("entry")(Qr=Object(St.c)(Qr=function(e){function Overlay(e){var t;return ut()(this,Overlay),(t=mt()(this,yt()(Overlay).call(this,e))).state={context:void 0,hovering:!1},t.InitializeCanvas=t.InitializeCanvas.bind(Sr()(t)),t.Click=t.Click.bind(Sr()(t)),t.Hover=t.Hover.bind(Sr()(t)),t.ClearHover=t.ClearHover.bind(Sr()(t)),t.Draw=t.Draw.bind(Sr()(t)),t.ToolTipContent=t.ToolTipContent.bind(Sr()(t)),t}return bt()(Overlay,e),pt()(Overlay,[{key:"componentWillMount",value:function componentWillMount(){var e=this;this.resizeObserver=new hn.a(function(t){e.lastUpdate&&performance.now()-e.lastUpdate<100&&clearTimeout(e.resizeUpdate),e.resizeUpdate=setTimeout(function(){var r=t[0].target,n=t[0].contentRect,i=n.height,o=n.width,a=r.videoWidth/r.videoHeight;o/i<a&&(i=o/a),e.setState({videoHeight:i,videoWidth:o})},100),e.lastUpdate=performance.now()}),this.resizeObserver.observe(this.props.element)}},{key:"componentDidMount",value:function componentDidMount(){var e=this;this.setState({DisposeDrawReaction:Object(zt.n)(function(){return{frame:e.props.video.frame,hoverEntries:e.props.entry.hoverEntries.map(function(e){return e.entryId}).sort(),selectedEntries:e.props.entry.entries.map(function(e){return e.entryId}).sort(),selectedEntry:e.props.entry.selectedEntry,videoWidth:e.state.videoWidth,videoHeight:e.state.videoHeight}},function(){return e.Draw()},{delay:25,equals:function equals(e,t){return JSON.stringify(e)===JSON.stringify(t)}})})}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.state.DisposeDrawReaction&&this.state.DisposeDrawReaction()}},{key:"InitializeCanvas",value:function InitializeCanvas(e){e&&this.setState({context:e.getContext("2d")})}},{key:"Entries",value:function Entries(){var e=this;return 0===this.props.video.frame?[]:this.props.overlay.overlayTracks.map(function(t){return t.entries[e.props.video.frame]}).flat()}},{key:"EntriesAt",value:function EntriesAt(e){var t=e.clientX,r=e.clientY,n=this.state.context.canvas.getBoundingClientRect(),i=n.top,o=n.left,a=n.height,l=n.width;return t=(t-o)/l,r=(r-i)/a,this.Entries().filter(function(e){var n=e.box,i=n.x1,o=n.x2,a=n.y1,l=n.y2;return i<=t&&o>=t&&a<=r&&l>=r})}},{key:"Click",value:function Click(e){var t=e.clientX,r=e.clientY;if(!this.props.video.playing){var n=this.EntriesAt({clientX:t,clientY:r});this.props.entry.SetEntries(n,this.props.video.smpte)}}},{key:"Hover",value:function Hover(e){var t=e.clientX,r=e.clientY;if(!this.props.video.playing){var n=this.EntriesAt({clientX:t,clientY:r});this.props.entry.SetHoverEntries(n,this.props.video.smpte),this.setState({hovering:!0})}}},{key:"ClearHover",value:function ClearHover(){this.setState({hovering:!1}),this.props.entry.SetHoverEntries([])}},{key:"ToolTipContent",value:function ToolTipContent(){return this.state.hovering&&0!==this.props.entry.hoverEntries.length?gt.a.createElement("div",{className:"track-entry-container"},this.props.entry.hoverEntries.map(function(e){return gt.a.createElement("div",{className:"track-entry",key:"entry-".concat(e.entryId)},gt.a.createElement("div",{className:"track-entry-content"},e.text))})):null}},{key:"Draw",value:function Draw(){var e=this;if(this.state.context){var t=this.Entries();this.state.context.canvas.width=this.state.videoWidth,this.state.context.canvas.height=this.state.videoHeight;var r=this.state.context,n=r.canvas.width,i=r.canvas.height;r.clearRect(0,0,r.canvas.width,r.canvas.height),0!==t.length&&t.forEach(function(t){var o=t.box,a=o.x1,l=o.x2,s=o.y1,c=o.y2,u=a*n,d=s*i,p=l*n,h=c*i,m=e.props.entry.entries.map(function(e){return e.entryId}),v=e.props.entry.hoverEntries.map(function(e){return e.entryId});r.globalAlpha=.4,r.lineWidth=2;var y="#00ff00";m.includes(t.entryId)?(r.globalAlpha=.8,y="#0fafff"):v.includes(t.entryId)&&(r.globalAlpha=.8,y="#45fdff"),e.props.entry.entries.length>0&&t.entryId===e.props.entry.selectedEntry&&(y="#ffffff"),r.strokeStyle=y,r.beginPath(),r.rect(u,d,p-u,h-d),r.stroke()})}}},{key:"render",value:function render(){return gt.a.createElement("div",{className:"overlay-container",style:{width:"".concat(this.state.videoWidth,"px")}},gt.a.createElement(fr.a,{onMouseMove:this.Hover,onMouseLeave:this.ClearHover,content:this.ToolTipContent()},gt.a.createElement("canvas",{onClick:this.Click,ref:this.InitializeCanvas,className:"overlay-canvas"})))}}]),Overlay}(gt.a.Component))||Qr)||Qr)||Qr)||Qr;mn.propTypes={element:pn.a.object.isRequired};var vn,yn=mn,fn=r(95),bn=Object(St.b)("tracks")(vn=Object(St.b)("video")(vn=Object(St.c)(vn=function(e){function Video(e){var t;return ut()(this,Video),(t=mt()(this,yt()(Video).call(this,e))).state={videoWidth:0,videoHeight:0,player:void 0},t.InitializeVideo=t.InitializeVideo.bind(Sr()(t)),t.InitializeTracks=t.InitializeTracks.bind(Sr()(t)),t}return bt()(Video,e),pt()(Video,[{key:"componentWillMount",value:function componentWillMount(){this.initialHeight=.4*document.body.getBoundingClientRect().height}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0)}},{key:"InitializeVideo",value:function InitializeVideo(e){if(e){var t=new wr.a,r=Cr()(this.props.video.source).addSearch("player_profile","hls-js").toString();t.loadSource(r),t.attachMedia(e),this.setState({player:t,video:e}),this.props.video.Initialize(e)}}},{key:"InitializeTracks",value:function InitializeTracks(e){this.props.video.InitializeTracks(e)}},{key:"Poster",value:function Poster(){return this.props.video.frame>0||!this.props.video.poster?null:gt.a.createElement(pr.c,{onClick:this.props.video.PlayPause,icon:this.props.video.poster,useLoadingIndicator:!1,className:"video-poster"})}},{key:"Overlay",value:function Overlay(){if(this.state.video)return gt.a.createElement(yn,{element:this.state.video})}},{key:"Video",value:function Video(){var e=this;return this.props.video.source?gt.a.createElement(fn.ResizableBox,{className:"video-container",height:this.initialHeight,width:1/0,handle:gt.a.createElement("div",{className:"resize-handle ".concat(this.props.video.fullScreen?"hidden":"")})},this.Overlay(),gt.a.createElement("video",{crossOrigin:"anonymous",ref:this.InitializeVideo,muted:!0,autoPlay:!1,controls:!1,preload:"auto",onWheel:function onWheel(t){var r=t.deltaY;return e.props.video.ScrollVolume(r)}}),this.Poster()):null}},{key:"render",value:function render(){var e=this.props.video.loading,t=this.props.video.source&&!this.props.video.initialized;return gt.a.createElement("div",{className:"video-component"},gt.a.createElement(un.a,{loading:e,loadingClassname:"video-controls-loading"},this.Video()),gt.a.createElement(un.a,{loading:t,loadingClassname:"video-controls-loading"},gt.a.createElement(cn,null)))}}]),Video}(gt.a.Component))||vn)||vn)||vn,kn=r(28),gn=r.n(kn),Tn=function(e){function TrackCanvas(){return ut()(this,TrackCanvas),mt()(this,yt()(TrackCanvas).apply(this,arguments))}return bt()(TrackCanvas,e),pt()(TrackCanvas,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(){return!1}},{key:"render",value:function render(){var e=this,t=Ft()({},this.props);return delete t.SetRef,gt.a.createElement("canvas",gn()({},t,{width:"50",height:"50",className:this.props.className,ref:function ref(t){return e.props.SetRef(t&&t.getContext("2d"))}}))}}]),TrackCanvas}(gt.a.Component);Tn.propTypes={SetRef:pn.a.func.isRequired};var Sn,xn=Tn,wn="#ffffff",En=Object(St.b)("video")(Sn=Object(St.b)("entry")(Sn=Object(St.b)("tracks")(Sn=Object(St.c)(Sn=function(e){function Track(e){var t;return ut()(this,Track),(t=mt()(this,yt()(Track).call(this,e))).state={context:void 0,hovering:!1,hoverTime:0},t.activeEntryIds=[],t.Draw=t.Draw.bind(Sr()(t)),t.DrawIfActiveChanged=t.DrawIfActiveChanged.bind(Sr()(t)),t.Click=t.Click.bind(Sr()(t)),t.Hover=t.Hover.bind(Sr()(t)),t.ClearHover=t.ClearHover.bind(Sr()(t)),t}return bt()(Track,e),pt()(Track,[{key:"componentDidMount",value:function componentDidMount(){var e=this;this.setState({DisposeDrawReaction:Object(zt.n)(function(){return{duration:e.props.video.duration,scale:e.props.video.scale,scaleMax:e.props.video.scaleMax,scaleMin:e.props.video.scaleMin,entries:e.props.entry.entries,hoverEntries:e.props.entry.hoverEntries,selectedEntry:e.props.entry.selectedEntry}},function(){return e.Draw()},{delay:25}),DisposeActiveReaction:Object(zt.n)(function(){return{frame:e.props.video.frame}},function(){return e.DrawIfActiveChanged()},{delay:100}),DisposeResizeReaction:Object(zt.n)(function(){return{width:e.props.width,height:e.props.height}},function(t){var r=t.width,n=t.height;e.state.context&&e.state.context.canvas&&(e.state.context.canvas.width=r,e.state.context.canvas.height=n,e.Draw())},{delay:100})})}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.state.DisposeDrawReaction(),this.state.DisposeActiveReaction(),this.state.DisposeResizeReaction()}},{key:"ClientXToCanvasPosition",value:function ClientXToCanvasPosition(e){return Yt()(e-this.state.context.canvas.offsetLeft).div(this.state.context.canvas.offsetWidth).valueOf()}},{key:"Search",value:function Search(e){return this.props.track.intervalTree.search(e,e)}},{key:"TimeAt",value:function TimeAt(e){var t=Yt()(this.props.video.scaleMax-this.props.video.scaleMin).div(this.props.video.scale).mul(this.props.video.duration),r=Yt()(this.props.video.scaleMin).div(this.props.video.scale).mul(this.props.video.duration);return t.mul(this.ClientXToCanvasPosition(e)).add(r).valueOf()}},{key:"Click",value:function Click(e){var t=e.clientX,r=this.TimeAt(t),n=this.Search(r);this.props.entry.SetEntries(n,this.props.video.TimeToSMPTE(r)),this.props.tracks.SetSelectedTrack(this.props.track.trackId)}},{key:"Hover",value:function Hover(e){var t=e.clientX,r=this.TimeAt(t),n=this.Search(r);this.props.entry.SetHoverEntries(n,this.props.video.TimeToSMPTE(r)),this.setState({hovering:!0,hoverTime:this.TimeAt(t)})}},{key:"ClearHover",value:function ClearHover(){this.props.entry.SetHoverEntries([]),this.setState({hovering:!1})}},{key:"DrawIfActiveChanged",value:function DrawIfActiveChanged(){var e=this.Search(this.props.video.currentTime).map(function(e){return e.entryId}).sort();e.toString()!==this.activeEntryIds.toString()&&(this.activeEntryIds=e,this.Draw())}},{key:"Draw",value:function Draw(){if(this.state.context&&this.state.context.canvas){var e=this.state.context;e.clearRect(0,0,e.canvas.width,e.canvas.height);var t=Yt()(this.props.video.scaleMax-this.props.video.scaleMin).div(this.props.video.scale).mul(this.props.video.duration),r=Yt()(this.props.video.scaleMin).div(this.props.video.scale).mul(this.props.video.duration),n=Yt()(e.canvas.offsetWidth).div(t),i=Yt()(e.canvas.offsetHeight).div(2),o=i.div(2).valueOf(),a=this.Search(this.props.video.currentTime).map(function(e){return e.entryId}),l=this.props.entry.entries.map(function(e){return e.entryId}),s=this.props.entry.selectedEntry?this.props.entry.selectedEntry.entryId:void 0,c=this.props.entry.hoverEntries.map(function(e){return e.entryId});this.props.track.entries.forEach(function(t){var u=Yt()(t.startTime).sub(r).mul(n).floor().valueOf(),d=Yt()(t.endTime).sub(r).mul(n).floor().valueOf();d.valueOf()<0||u.valueOf()>e.canvas.offsetWidth||(e.beginPath(),e.globalAlpha=.4,s===t.entryId?(e.globalAlpha=.6,e.fillStyle=wn,e.strokeStyle=wn,e.fillRect(u,o,d-u,i),e.rect(u,o,d-u,i)):l.includes(t.entryId)?(e.fillStyle="#0fafff",e.strokeStyle="#0fafff",e.fillRect(u,o,d-u,i),e.rect(u,o,d-u,i)):c.includes(t.entryId)?(e.fillStyle=wn,e.strokeStyle=wn,e.fillRect(u,o,d-u,i),e.rect(u,o,d-u,i)):a.includes(t.entryId)?(e.fillStyle="#36ff00",e.strokeStyle="#36ff00",e.fillRect(u,o,d-u,i),e.rect(u,o,d-u,i)):(e.fillStyle=wn,e.strokeStyle=wn,e.rect(u,o,d-u,i)),e.stroke())})}}},{key:"ToolTipContent",value:function ToolTipContent(){return this.state.hovering&&this.props.entry.hoverEntries&&0!==this.props.entry.hoverEntries.length?gt.a.createElement("div",{className:"track-entry-container"},this.props.entry.hoverEntries.map(function(e){return gt.a.createElement("div",{className:"track-entry",key:"entry-".concat(e.entryId)},gt.a.createElement("div",{className:"track-entry-timestamps"},"".concat(e.startTimeSMPTE," - ").concat(e.endTimeSMPTE)),gt.a.createElement("div",{className:"track-entry-content"},e.text))})):null}},{key:"Canvas",value:function Canvas(){var e=this;return gt.a.createElement(xn,{className:"track",onClick:this.Click,onMouseMove:this.Hover,onMouseLeave:this.ClearHover,SetRef:function SetRef(t){return e.setState({context:t})}})}},{key:"render",value:function render(){var e=this;return gt.a.createElement(pr.f,{content:this.ToolTipContent()},gt.a.createElement("div",{onWheel:function onWheel(t){var r=t.deltaY,n=t.clientX;return e.props.video.ScrollScale(e.ClientXToCanvasPosition(n),r)},className:"track-container"},this.Canvas()))}}]),Track}(gt.a.Component))||Sn)||Sn)||Sn)||Sn;En.propTypes={track:pn.a.object.isRequired,width:pn.a.number.isRequired,height:pn.a.number.isRequired,entry:pn.a.object,video:pn.a.object};var Cn,On=En,Pn=Object(St.b)("video")(Cn=Object(St.b)("tracks")(Cn=Object(St.c)(Cn=function(e){function AudioTrack(e){var t;return ut()(this,AudioTrack),(t=mt()(this,yt()(AudioTrack).call(this,e))).state={context:void 0},t.Draw=t.Draw.bind(Sr()(t)),t}return bt()(AudioTrack,e),pt()(AudioTrack,[{key:"componentDidMount",value:function componentDidMount(){var e=this;this.setState({DisposeDrawReaction:Object(zt.n)(function(){return{entries:e.props.track.entries.length,duration:e.props.video.duration,scale:e.props.video.scale,scaleMax:e.props.video.scaleMax,scaleMin:e.props.video.scaleMin}},function(){return e.Draw()},{delay:500}),DisposeResizeReaction:Object(zt.n)(function(){return{width:e.props.width,height:e.props.height}},function(t){var r=t.width,n=t.height;e.state.context&&e.state.context.canvas&&(e.state.context.canvas.width=r,e.state.context.canvas.height=n,e.Draw())},{delay:500})})}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.state.DisposeDrawReaction(),this.state.DisposeResizeReaction()}},{key:"ClientXToCanvasPosition",value:function ClientXToCanvasPosition(e){return Yt()(e-this.state.context.canvas.offsetLeft).div(this.state.context.canvas.offsetWidth).valueOf()}},{key:"Draw",value:function Draw(){if(this.state.context&&this.state.context.canvas){var e=this.state.context;e.clearRect(0,0,e.canvas.width,e.canvas.height);var t=Yt()(this.props.video.scaleMax-this.props.video.scaleMin).div(this.props.video.scale).mul(this.props.video.duration),r=Yt()(this.props.video.scaleMin).div(this.props.video.scale).mul(this.props.video.duration),n=Yt()(e.canvas.offsetWidth).div(t),i=e.canvas.offsetHeight;e.fillStyle="#ffffff",e.strokeStyle="#ffffff";var o=1/(1.1*Math.max.apply(Math,Vt()(this.props.track.entries.map(function(e){return e.max}))));this.props.track.entries.forEach(function(t){var a=Yt()(t.startTime).sub(r).mul(n).floor().valueOf(),l=Yt()(t.endTime).sub(r).mul(n).floor().valueOf();if(!(l.valueOf()<0||a.valueOf()>e.canvas.offsetWidth)){var s=i*t.max*o;e.beginPath(),e.fillRect(a,i-s,l-a,s),e.stroke()}})}}},{key:"Canvas",value:function Canvas(){var e=this;return gt.a.createElement(xn,{className:"track",SetRef:function SetRef(t){return e.setState({context:t})}})}},{key:"render",value:function render(){var e=this;return gt.a.createElement("div",{onWheel:function onWheel(t){var r=t.deltaY,n=t.clientX;return e.props.video.ScrollScale(e.ClientXToCanvasPosition(n),r)},className:"track-container"},this.Canvas())}}]),AudioTrack}(gt.a.Component))||Cn)||Cn)||Cn;Pn.propTypes={track:pn.a.object.isRequired,width:pn.a.number.isRequired,height:pn.a.number.isRequired,video:pn.a.object};var Mn,jn,zn,_n,Rn=Pn,In=function BackButton(e){var t=e.onClick,r=e.className,n=void 0===r?"":r;return gt.a.createElement(pr.b,{label:"Back",className:"back-button ".concat(n||""),icon:sn.a,onClick:t})},Dn=function Checkbox(e){var t=e.value,r=e.onChange,n=e.toolTip,i=e.className,o=void 0===i?"":i,a=gt.a.createElement("div",{className:"checkbox-container ".concat(o||"")},gt.a.createElement("div",{onClick:function onClick(e){e.stopPropagation(),r(!t)},className:"checkbox ".concat(t?"checked":"")}));return n?gt.a.createElement(pr.f,{content:n},a):a},Fn=Object(St.b)("tracks")(Mn=Object(St.b)("video")(Mn=Object(St.c)(Mn=function(e){function Timeline(e){var t;return ut()(this,Timeline),(t=mt()(this,yt()(Timeline).call(this,e))).state={trackDimensions:new DOMRect,trackContainerDimensions:new DOMRect},t.WatchResize=t.WatchResize.bind(Sr()(t)),t}return bt()(Timeline,e),pt()(Timeline,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0)}},{key:"WatchResize",value:function WatchResize(e){var t=this;e&&(this.resizeObserver=new hn.a(function(e){var r=e[0],n=document.getElementsByClassName("track-lane-content")[0];t.setState({trackDimensions:n?n.getBoundingClientRect():new DOMRect,trackContainerDimensions:r.contentRect})}),this.resizeObserver.observe(e))}},{key:"TrackLane",value:function TrackLane(e){var t=this,r=e.trackId,n=e.trackType,i=e.label,o=e.content,a=e.key,l=e.className,s=void 0===l?"":l,c=r&&"audio"!==n,u=r&&this.props.tracks.selectedTrack===r,d=function selectTrack(){c&&(u?t.props.tracks.ClearSelectedTrack():t.props.tracks.SetSelectedTrack(r))};return gt.a.createElement("div",{key:"track-lane-".concat(a||i),className:"track-lane ".concat(s)},gt.a.createElement("div",{onClick:d,onKeyPress:Object(pr.g)(d),tabIndex:r?0:void 0,className:"\n              track-label\n              ".concat(u?"track-label-selected":"","\n              ").concat(c?"track-label-clickable":"","\n            ")},i),gt.a.createElement("div",{className:"track-lane-content"},o))}},{key:"CurrentTimeIndicator",value:function CurrentTimeIndicator(){var e=this.props.video.scaleMax-this.props.video.scaleMin,t=(this.props.video.seek-this.props.video.scaleMin)*(this.state.trackDimensions.width/e)+this.state.trackDimensions.left;return gt.a.createElement("div",{style:{height:this.state.trackContainerDimensions.height-1+"px",left:t-1+"px"},className:"track-time-indicator"})}},{key:"TrackLabel",value:function TrackLabel(e){var t,r=this,n="vtt"===e.trackType,i=n?function(){return r.props.tracks.ToggleTrack(e.label)}:void 0;if(n){var o=gt.a.createElement("span",null,e.active?"Disable":"Enable"," ",e.label);t=gt.a.createElement(Dn,{value:e.active,onChange:i,toolTip:o,className:"track-toggle"})}return gt.a.createElement("div",{className:"track-label"},e.label,t)}},{key:"Track",value:function Track(e){var t="vtt"===e.trackType?"".concat(e.active?"Disable":"Enable"," ").concat(e.label):e.label;return this.TrackLane({trackId:e.trackId,trackType:e.trackType,label:this.TrackLabel(e),content:"audio"===e.trackType?gt.a.createElement(Rn,{track:e,width:this.state.trackDimensions.width,height:this.state.trackDimensions.height}):gt.a.createElement(On,{track:e,width:this.state.trackDimensions.width,height:this.state.trackDimensions.height}),labelToolTip:gt.a.createElement("span",null,t)})}},{key:"Tracks",value:function Tracks(){var e=this;return gt.a.createElement("div",{ref:this.WatchResize,className:"tracks-container"},this.CurrentTimeIndicator(),this.props.tracks.tracks.filter(function(e){return"vtt"===e.trackType}).slice().sort(function(e,t){return e.label>t.label?1:-1}).map(function(t){return e.Track(t)}),this.props.tracks.tracks.filter(function(e){return"vtt"!==e.trackType}).slice().sort(function(e,t){return e.label>t.label?1:-1}).map(function(t){return e.Track(t)}),this.props.tracks.audioTracks.map(function(t){return e.Track(t)}))}},{key:"render",value:function render(){return this.props.video.initialized?gt.a.createElement("div",{className:"timeline"},this.TrackLane({label:gt.a.createElement("span",{className:"mono"},"".concat(this.props.video.frame," :: ").concat(this.props.video.smpte)),content:gt.a.createElement(Zr,null),key:"scale",className:"video-scale-lane"}),this.Tracks()):null}}]),Timeline}(gt.a.Component))||Mn)||Mn)||Mn,Nn=Object(St.b)("menu")(jn=Object(St.c)(jn=function(e){function Menu(e){var t;return ut()(this,Menu),(t=mt()(this,yt()(Menu).call(this,e))).state={library:void 0,objectId:void 0},t.SelectLibrary=t.SelectLibrary.bind(Sr()(t)),t.SelectObject=t.SelectObject.bind(Sr()(t)),t}return bt()(Menu,e),pt()(Menu,[{key:"SelectLibrary",value:function(){var e=Ct()(wt.a.mark(function _callee(e){return wt.a.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:this.setState({library:e});case 1:case"end":return t.stop()}},_callee,this)}));return function SelectLibrary(t){return e.apply(this,arguments)}}()},{key:"SelectObject",value:function(){var e=Ct()(wt.a.mark(function _callee2(e,t,r){return wt.a.wrap(function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return this.props.menu.ToggleMenu(),this.setState({objectId:t}),n.next=4,this.props.menu.SelectVideo({libraryId:e,objectId:t,versionHash:r});case 4:case"end":return n.stop()}},_callee2,this)}));return function SelectObject(t,r,n){return e.apply(this,arguments)}}()},{key:"SelectedObject",value:function SelectedObject(){var e=this,t=this.props.menu.selectedObject,r=t.metadata.video_tags?gt.a.createElement(gt.a.Fragment,null,gt.a.createElement("label",null,"Video Tags"),gt.a.createElement("span",{className:"wrap"},Object.keys(t.metadata.video_tags).join(", "))):null;return gt.a.createElement(un.a,{loading:!t,render:function render(){return gt.a.createElement("div",{className:"menu-entries"},gt.a.createElement("div",{className:"menu-header"},gt.a.createElement(In,{onClick:function onClick(){return e.setState({objectId:void 0})}}),gt.a.createElement("h4",null,t.name)),gt.a.createElement("h5",null,t.metadata.description),gt.a.createElement("div",{className:"video-info"},gt.a.createElement("label",null,"Library ID"),gt.a.createElement("div",null,t.libraryId),gt.a.createElement("label",null,"Object ID"),gt.a.createElement("span",null,t.objectId),gt.a.createElement("label",null,"Version Hash"),gt.a.createElement("span",{className:"wrap"},t.versionHash),r))}})}},{key:"Objects",value:function Objects(){var e=this,t=this.state.library.libraryId,r=gt.a.createElement(pr.a,{key:"objects-container",Load:Ct()(wt.a.mark(function _callee3(){return wt.a.wrap(function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.props.menu.ListObjects(t);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},_callee3)}))},0===(this.props.menu.objects[t]||[]).length?gt.a.createElement("div",{className:"menu-empty"},"No Content Available"):gt.a.createElement("ul",null,(this.props.menu.objects[t]||[]).map(function(r){var n=function onClick(){return e.SelectObject(t,r.objectId,r.versionHash)};return gt.a.createElement("li",{tabIndex:0,onClick:n,onKeyPress:Object(pr.g)(n),key:"content-object-".concat(r.objectId)},r.metadata.name)})));return gt.a.createElement("div",{className:"menu-entries"},gt.a.createElement("div",{className:"menu-header"},gt.a.createElement(In,{onClick:function onClick(){return e.setState({library:void 0})}}),gt.a.createElement("h4",null,this.state.library.metadata.name)),r)}},{key:"Libraries",value:function Libraries(){var e=this;return gt.a.createElement(pr.a,{key:"libraries-container",Load:this.props.menu.ListLibraries},0===Object.keys(this.props.menu.libraries).length?gt.a.createElement("div",{className:"menu-empty"},"No Libraries Available"):gt.a.createElement("div",{className:"menu-entries"},gt.a.createElement("ul",null,this.props.menu.libraries.map(function(t){var r=function onClick(){return e.SelectLibrary(t)};return gt.a.createElement("li",{tabIndex:0,onKeyPress:Object(pr.g)(r),onClick:r,key:"library-".concat(t.libraryId)},t.metadata.name)}))))}},{key:"Navigation",value:function Navigation(){return this.state.objectId?this.SelectedObject():this.state.library?this.Objects():this.Libraries()}},{key:"render",value:function render(){return this.props.menu.showMenu?gt.a.createElement("div",{className:"menu-container"},this.Navigation()):null}}]),Menu}(gt.a.Component))||jn)||jn,Hn=Object(St.b)("entry")(zn=Object(St.c)(zn=function(e){function Entry(){return ut()(this,Entry),mt()(this,yt()(Entry).apply(this,arguments))}return bt()(Entry,e),pt()(Entry,[{key:"Actions",value:function Actions(e){return gt.a.createElement(gt.a.Fragment,null,gt.a.createElement("div",{className:"entry-back"},gt.a.createElement(In,{onClick:this.props.entry.ClearSelectedEntry})),gt.a.createElement("div",null,gt.a.createElement("button",{tabIndex:0,className:"entry-play",onClick:this.props.entry.PlayCurrentEntry},e?"Play Segment":"")))}},{key:"VttEntry",value:function VttEntry(e){var t=e.entry;return gt.a.createElement("div",{className:"entry-details"},this.Actions(!0),gt.a.createElement("label",null,"Text"),gt.a.createElement("div",null,t.text),gt.a.createElement("label",null,"Start Time"),gt.a.createElement("span",null,"".concat(t.startTime," (").concat(e.startTimeSMPTE,")")),gt.a.createElement("label",null,"End Time"),gt.a.createElement("span",null,"".concat(t.endTime," (").concat(e.endTimeSMPTE,")")),gt.a.createElement("label",null,"Align"),gt.a.createElement("span",null,t.align),gt.a.createElement("label",null,"Line"),gt.a.createElement("span",null,t.line),gt.a.createElement("label",null,"Line Align"),gt.a.createElement("span",null,t.lineAlign),gt.a.createElement("label",null,"Position"),gt.a.createElement("span",null,t.position),gt.a.createElement("label",null,"Position Align"),gt.a.createElement("span",null,t.positionAlign),gt.a.createElement("label",null,"Region"),gt.a.createElement("span",null,t.region),gt.a.createElement("label",null,"Size"),gt.a.createElement("span",null,t.size),gt.a.createElement("label",null,"Snap to Lines"),gt.a.createElement("span",null,t.snapToLines),gt.a.createElement("label",null,"Vertical"),gt.a.createElement("span",null,t.vertical))}},{key:"TagEntry",value:function TagEntry(e){return gt.a.createElement("div",{className:"entry-details"},this.Actions(!0),gt.a.createElement("label",null,"Tag"),gt.a.createElement("div",null,e.text),gt.a.createElement("label",null,"Start Time"),gt.a.createElement("span",null,"".concat(e.startTime.toFixed(3)," (").concat(e.startTimeSMPTE,")")),gt.a.createElement("label",null,"End Time"),gt.a.createElement("span",null,"".concat(e.endTime.toFixed(3)," (").concat(e.endTimeSMPTE,")")))}},{key:"OverlayEntry",value:function OverlayEntry(e){return gt.a.createElement("div",{className:"entry-details"},this.Actions(),gt.a.createElement("label",null,"Tag"),gt.a.createElement("div",null,e.text),gt.a.createElement("label",null,"Confidence"),gt.a.createElement("div",null,e.confidence.toFixed(3)),gt.a.createElement("label",null,"Bounding Box"),gt.a.createElement("div",null),gt.a.createElement("div",{className:"entry-details indented"},gt.a.createElement("label",null,"X1"),gt.a.createElement("div",null,e.box.x1.toFixed(4)),gt.a.createElement("label",null,"Y1"),gt.a.createElement("div",null,e.box.y1.toFixed(4)),gt.a.createElement("label",null,"X2"),gt.a.createElement("div",null,e.box.x2.toFixed(4)),gt.a.createElement("label",null,"Y2"),gt.a.createElement("div",null,e.box.y2.toFixed(4))))}},{key:"RenderEntry",value:function RenderEntry(e){return"vtt"===e.entryType?this.VttEntry(e):"overlay"===e.entryType?this.OverlayEntry(e):this.TagEntry(e)}},{key:"render",value:function render(){return gt.a.createElement("div",{className:"entry-container"},this.RenderEntry(this.props.entry.selectedEntry))}}]),Entry}(gt.a.Component))||zn)||zn,An=Object(St.b)("video")(_n=Object(St.b)("entry")(_n=Object(St.c)(_n=function(e){function Entries(e){var t;return ut()(this,Entries),(t=mt()(this,yt()(Entries).call(this,e))).state={entryLimit:100},t}return bt()(Entries,e),pt()(Entries,[{key:"Entries",value:function Entries(){if(this.props.entry.entries.length>0)return this.props.entry.entries;var e=this.props.video.scaleMinTime,t=this.props.video.scaleMaxTime;return this.props.track.entries.filter(function(r){var n=r.startTime;return r.endTime>=e&&n<=t})}},{key:"Header",value:function Header(){var e;return e="vtt"===this.props.track.trackType?gt.a.createElement("h4",null,this.props.track.label," - WebVTT Track"):gt.a.createElement("h4",null,this.props.track.label," - Metadata Track"),gt.a.createElement("div",{className:"entries-header"},e,gt.a.createElement("div",{className:"entries-time-range"},this.props.video.scaleMinSMPTE," - ",this.props.video.scaleMaxSMPTE))}},{key:"PlayEntry",value:function PlayEntry(e,t){var r=this;if(t)return gt.a.createElement(pr.b,{className:"entry-play-icon",label:"Play Segment",icon:_r.a,onClick:function onClick(t){t.stopPropagation(),r.props.entry.PlayEntry(e)}})}},{key:"Entry",value:function Entry(e,t,r){var n=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=function onClick(){return n.props.entry.SetSelectedEntry(e)};return gt.a.createElement("div",{role:"button",tabIndex:0,onClick:o,onKeyPress:Object(pr.g)(o),onMouseEnter:function onMouseEnter(){return n.props.entry.SetHoverEntries([e],e.startTime)},onMouseLeave:function onMouseLeave(){return n.props.entry.ClearHoverEntries()},className:"entry ".concat(t?"entry-active":""," ").concat(r?"entry-hover":""),key:"entry-".concat(e.entryId)},gt.a.createElement("div",{className:"entry-text"},e.text),gt.a.createElement("div",{className:"entry-time-range"},e.startTimeSMPTE," - ",e.endTimeSMPTE),this.PlayEntry(e,i))}},{key:"SelectedEntry",value:function SelectedEntry(){return gt.a.createElement(Hn,null)}},{key:"EntryList",value:function EntryList(){var e,t,r=this,n=this.Entries(),i=this.props.track.intervalTree.search(this.props.video.currentTime,this.props.video.currentTime).map(function(e){return e.entryId}),o=this.props.entry.hoverEntries.map(function(e){return e.entryId}),a=["vtt","metadata"].includes(this.props.track.trackType);return this.props.entry.entries.length>0&&(e=gt.a.createElement("div",{className:"entry-actions"},gt.a.createElement(In,{onClick:this.props.entry.ClearEntries}),this.props.entry.entryTime)),n.length>this.state.entryLimit&&(t=gt.a.createElement("div",{className:"entry"},gt.a.createElement("div",{className:"load-entries-button",onClick:function onClick(){return r.setState({entryLimit:r.state.entryLimit+100})}},"Load More..."))),gt.a.createElement("div",{className:"entries"},e,n.slice(0,this.state.entryLimit).map(function(e){return r.Entry(e,i.includes(e.entryId),o.includes(e.entryId),a)}),t)}},{key:"render",value:function render(){return gt.a.createElement("div",{className:"entries-container"},this.Header(),this.props.entry.selectedEntry?this.SelectedEntry():this.EntryList())}}]),Entries}(gt.a.Component))||_n)||_n)||_n;An.propTypes={track:pn.a.object.isRequired};var Ln,Vn,Un=An,Wn=Object(St.b)("tracks")(Ln=Object(St.c)(Ln=function(e){function SidePanel(){return ut()(this,SidePanel),mt()(this,yt()(SidePanel).apply(this,arguments))}return bt()(SidePanel,e),pt()(SidePanel,[{key:"Entries",value:function Entries(){if(!this.props.tracks.selectedTrack)return null;var e=this.props.tracks.SelectedTrack();return gt.a.createElement(Un,{track:e})}},{key:"render",value:function render(){return gt.a.createElement(fn.ResizableBox,{className:"side-panel",height:1/0,width:500,handle:gt.a.createElement("div",{className:"resize-handle"})},gt.a.createElement("div",{className:"side-panel-content"},this.Entries()))}}]),SidePanel}(gt.a.Component))||Ln)||Ln,Bn=Object(St.b)("root")(Vn=Object(St.c)(Vn=function(e){function App(){return ut()(this,App),mt()(this,yt()(App).apply(this,arguments))}return bt()(App,e),pt()(App,[{key:"render",value:function render(){return this.props.root.client?gt.a.createElement("div",{className:"video-editor"},gt.a.createElement(gr,null),gt.a.createElement(Nn,null),gt.a.createElement("div",{className:"video-level",key:"video-".concat(this.props.root.videoStore.source)},gt.a.createElement(Wn,null),gt.a.createElement(bn,null)),gt.a.createElement(Fn,null)):null}}]),App}(gt.a.Component))||Vn)||Vn;Object(Tt.render)(gt.a.createElement(St.a,n,gt.a.createElement(Bn,null)),document.getElementById("app"))},93:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"></path></svg>'},94:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevrons-left"><polyline points="11 17 6 12 11 7"></polyline><polyline points="18 17 13 12 18 7"></polyline></svg>'}});